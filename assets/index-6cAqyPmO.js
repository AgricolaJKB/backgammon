var Lt=Object.defineProperty;var zt=(t,e,n)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var je=(t,e,n)=>zt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function W(){}function jt(t,e){for(const n in e)t[n]=e[n];return t}function wt(t){return t()}function Ge(){return Object.create(null)}function ae(t){t.forEach(wt)}function Re(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Xt(t){return Object.keys(t).length===0}function kt(t,...e){if(t==null){for(const l of e)l(void 0);return W}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function H(t,e,n){t.$$.on_destroy.push(kt(e,n))}function Yt(t,e,n,l){if(t){const r=Ct(t,e,n,l);return t[0](r)}}function Ct(t,e,n,l){return t[1]&&l?jt(n.ctx.slice(),t[1](l(e))):n.ctx}function Wt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],i=Math.max(e.dirty.length,r.length);for(let c=0;c<i;c+=1)o[c]=e.dirty[c]|r[c];return o}return e.dirty|r}return e.dirty}function Rt(t,e,n,l,r,o){if(r){const i=Ct(e,n,l,o);t.p(i,r)}}function Zt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Et(t,e,n){return t.set(n),e}let Oe=!1;function Ht(){Oe=!0}function Ut(){Oe=!1}function Ft(t,e,n,l){for(;t<e;){const r=t+(e-t>>1);n(r)<=l?t=r+1:e=r}return t}function Jt(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const s=[];for(let f=0;f<e.length;f++){const a=e[f];a.claim_order!==void 0&&s.push(a)}e=s}const n=new Int32Array(e.length+1),l=new Int32Array(e.length);n[0]=-1;let r=0;for(let s=0;s<e.length;s++){const f=e[s].claim_order,a=(r>0&&e[n[r]].claim_order<=f?r+1:Ft(1,r,m=>e[n[m]].claim_order,f))-1;l[s]=n[a]+1;const _=a+1;n[_]=s,r=Math.max(_,r)}const o=[],i=[];let c=e.length-1;for(let s=n[r]+1;s!=0;s=l[s-1]){for(o.push(e[s-1]);c>=s;c--)i.push(e[c]);c--}for(;c>=0;c--)i.push(e[c]);o.reverse(),i.sort((s,f)=>s.claim_order-f.claim_order);for(let s=0,f=0;s<i.length;s++){for(;f<o.length&&i[s].claim_order>=o[f].claim_order;)f++;const a=f<o.length?o[f]:null;t.insertBefore(i[s],a)}}function Gt(t,e){t.appendChild(e)}function T(t,e){if(Oe){for(Jt(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function B(t,e,n){Oe&&!n?T(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function he(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function Me(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function z(){return $(" ")}function be(){return $("")}function ue(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ie(t){return t.dataset.svelteH}function N(t){return Array.from(t.childNodes)}function Kt(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Dt(t,e,n,l,r=!1){Kt(t);const o=(()=>{for(let i=t.claim_info.last_index;i<t.length;i++){const c=t[i];if(e(c)){const s=n(c);return s===void 0?t.splice(i,1):t[i]=s,r||(t.claim_info.last_index=i),c}}for(let i=t.claim_info.last_index-1;i>=0;i--){const c=t[i];if(e(c)){const s=n(c);return s===void 0?t.splice(i,1):t[i]=s,r?s===void 0&&t.claim_info.last_index--:t.claim_info.last_index=i,c}}return l()})();return o.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,o}function It(t,e,n,l){return Dt(t,r=>r.nodeName===e,r=>{const o=[];for(let i=0;i<r.attributes.length;i++){const c=r.attributes[i];n[c.name]||o.push(c.name)}o.forEach(i=>r.removeAttribute(i))},()=>l(e))}function P(t,e,n){return It(t,e,n,A)}function Ze(t,e,n){return It(t,e,n,Me)}function oe(t,e){return Dt(t,n=>n.nodeType===3,n=>{const l=""+e;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>$(e),!0)}function j(t){return oe(t," ")}function ye(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let Te;function Qt(){if(Te===void 0){Te=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Te=!0}}return Te}function $t(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=A("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const r=Qt();let o;return r?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=ue(window,"message",i=>{i.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{o=ue(l.contentWindow,"resize",e),e()}),Gt(t,l),()=>{(r||o&&l.contentWindow)&&o(),d(l)}}function xt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Ae;function we(t){Ae=t}function At(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function He(t){At().$$.on_mount.push(t)}function Pt(){const t=At();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=xt(e,n,{cancelable:l});return r.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}const ve=[],se=[];let pe=[];const Ye=[],en=Promise.resolve();let We=!1;function tn(){We||(We=!0,en.then(Nt))}function Se(t){pe.push(t)}function ke(t){Ye.push(t)}const Xe=new Set;let me=0;function Nt(){if(me!==0)return;const t=Ae;do{try{for(;me<ve.length;){const e=ve[me];me++,we(e),nn(e.$$)}}catch(e){throw ve.length=0,me=0,e}for(we(null),ve.length=0,me=0;se.length;)se.pop()();for(let e=0;e<pe.length;e+=1){const n=pe[e];Xe.has(n)||(Xe.add(n),n())}pe.length=0}while(ve.length);for(;Ye.length;)Ye.pop()();We=!1,Xe.clear(),we(t)}function nn(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Se)}}function ln(t){const e=[],n=[];pe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),pe=e}const Ve=new Set;let de;function Ce(){de={r:0,c:[],p:de}}function Ee(){de.r||ae(de.c),de=de.p}function q(t,e){t&&t.i&&(Ve.delete(t),t.i(e))}function X(t,e,n,l){if(t&&t.o){if(Ve.has(t))return;Ve.add(t),de.c.push(()=>{Ve.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function F(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function De(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function x(t){t&&t.c()}function ee(t,e){t&&t.l(e)}function G(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Se(()=>{const o=t.$$.on_mount.map(wt).filter(Re);t.$$.on_destroy?t.$$.on_destroy.push(...o):ae(o),t.$$.on_mount=[]}),r.forEach(Se)}function K(t,e){const n=t.$$;n.fragment!==null&&(ln(n.after_update),ae(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rn(t,e){t.$$.dirty[0]===-1&&(ve.push(t),tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ce(t,e,n,l,r,o,i=null,c=[-1]){const s=Ae;we(t);const f=t.$$={fragment:null,ctx:[],props:o,update:W,not_equal:r,bound:Ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Ge(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};i&&i(f.root);let a=!1;if(f.ctx=n?n(t,e.props||{},(_,m,...k)=>{const g=k.length?k[0]:m;return f.ctx&&r(f.ctx[_],f.ctx[_]=g)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](g),a&&rn(t,_)),m}):[],f.update(),a=!0,ae(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){Ht();const _=N(e.target);f.fragment&&f.fragment.l(_),_.forEach(d)}else f.fragment&&f.fragment.c();e.intro&&q(t.$$.fragment),G(t,e.target,e.anchor),Ut(),Nt()}we(s)}class fe{constructor(){je(this,"$$");je(this,"$$set")}$destroy(){K(this,1),this.$destroy=W}$on(e,n){if(!Re(n))return W;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Xt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const on="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(on);function Ke(t){let e;function n(o,i){return o[1]?cn:sn}let l=n(t),r=l(t);return{c(){e=Me("svg"),r.c(),this.h()},l(o){e=Ze(o,"svg",{class:!0});var i=N(e);r.l(i),i.forEach(d),this.h()},h(){p(e,"class","svelte-18d6l3w")},m(o,i){B(o,e,i),r.m(e,null)},p(o,i){l===(l=n(o))&&r?r.p(o,i):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null)))},d(o){o&&d(e),r.d()}}}function sn(t){let e,n;return{c(){e=Me("polygon"),this.h()},l(l){e=Ze(l,"polygon",{points:!0,fill:!0}),N(e).forEach(d),this.h()},h(){p(e,"points",n="0,"+t[3]+" "+t[2]+","+t[3]+" "+t[2]/2+",0"),p(e,"fill",t[0])},m(l,r){B(l,e,r)},p(l,r){r&12&&n!==(n="0,"+l[3]+" "+l[2]+","+l[3]+" "+l[2]/2+",0")&&p(e,"points",n),r&1&&p(e,"fill",l[0])},d(l){l&&d(e)}}}function cn(t){let e,n;return{c(){e=Me("polygon"),this.h()},l(l){e=Ze(l,"polygon",{points:!0,fill:!0}),N(e).forEach(d),this.h()},h(){p(e,"points",n="0,0 "+t[2]+",0 "+t[2]/2+","+t[3]),p(e,"fill",t[0])},m(l,r){B(l,e,r)},p(l,r){r&12&&n!==(n="0,0 "+l[2]+",0 "+l[2]/2+","+l[3])&&p(e,"points",n),r&1&&p(e,"fill",l[0])},d(l){l&&d(e)}}}function fn(t){let e,n,l=t[2]&&t[3]&&Ke(t);return{c(){e=A("div"),l&&l.c(),this.h()},l(r){e=P(r,"DIV",{class:!0});var o=N(e);l&&l.l(o),o.forEach(d),this.h()},h(){p(e,"class","container svelte-18d6l3w"),Se(()=>t[4].call(e))},m(r,o){B(r,e,o),l&&l.m(e,null),n=$t(e,t[4].bind(e))},p(r,[o]){r[2]&&r[3]?l?l.p(r,o):(l=Ke(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:W,o:W,d(r){r&&d(e),l&&l.d(),n()}}}function un(t,e,n){let{color:l}=e,{reversed:r=!1}=e,o,i;function c(){o=this.clientWidth,i=this.clientHeight,n(2,o),n(3,i)}return t.$$set=s=>{"color"in s&&n(0,l=s.color),"reversed"in s&&n(1,r=s.reversed)},[l,r,o,i,c]}class an extends fe{constructor(e){super(),ce(this,e,un,fn,le,{color:0,reversed:1})}}function dn(t){let e,n,l,r,o;const i=t[15].default,c=Yt(i,t,t[14],null);return{c(){e=A("div"),c&&c.c(),this.h()},l(s){e=P(s,"DIV",{id:!0,style:!0,class:!0});var f=N(e);c&&c.l(f),f.forEach(d),this.h()},h(){p(e,"id",t[2]),J(e,"transform","translate("+t[3]+"px, "+t[4]+"px)"),p(e,"class",n="draggable "+(t[1]&&"deactivated")+" "+(t[5]&&"moving")+" svelte-gvmcw0")},m(s,f){B(s,e,f),c&&c.m(e,null),t[16](e),l=!0,r||(o=[ue(window,"mousemove",t[7]),ue(e,"mousedown",t[6]),ue(e,"mouseup",t[8])],r=!0)},p(s,[f]){c&&c.p&&(!l||f&16384)&&Rt(c,i,s,s[14],l?Wt(i,s[14],f,null):Zt(s[14]),null),(!l||f&4)&&p(e,"id",s[2]),(!l||f&24)&&J(e,"transform","translate("+s[3]+"px, "+s[4]+"px)"),(!l||f&34&&n!==(n="draggable "+(s[1]&&"deactivated")+" "+(s[5]&&"moving")+" svelte-gvmcw0"))&&p(e,"class",n)},i(s){l||(q(c,s),l=!0)},o(s){X(c,s),l=!1},d(s){s&&d(e),c&&c.d(s),t[16](null),r=!1,ae(o)}}}function hn(t,e,n){let{$$slots:l={},$$scope:r}=e;const o=Pt();let{maxDrag:i=[1/0,1/0]}=e,{resetAfterDrag:c=!1}=e,{deactivated:s=!1}=e,{invertX:f=!1}=e,{invertY:a=!1}=e,{el:_=null}=e,{id:m=null}=e,k=0,g=0,D=!1;function b(){s||(n(5,D=!0),o("dragstart"))}function y(w){D&&(n(3,k+=(f?-1:1)*w.movementX),n(4,g+=(a?-1:1)*w.movementY)),i&&(k>i[0]||k<-i[0]||g>i[1]||g<-i[1])&&V()}function V(){n(5,D=!1),o("dragend"),c&&(n(3,k=0),n(4,g=0))}const I=()=>{n(3,k=0),n(4,g=0)};function S(w){se[w?"unshift":"push"](()=>{_=w,n(0,_)})}return t.$$set=w=>{"maxDrag"in w&&n(9,i=w.maxDrag),"resetAfterDrag"in w&&n(10,c=w.resetAfterDrag),"deactivated"in w&&n(1,s=w.deactivated),"invertX"in w&&n(11,f=w.invertX),"invertY"in w&&n(12,a=w.invertY),"el"in w&&n(0,_=w.el),"id"in w&&n(2,m=w.id),"$$scope"in w&&n(14,r=w.$$scope)},[_,s,m,k,g,D,b,y,V,i,c,f,a,I,r,l,S]}class Bt extends fe{constructor(e){super(),ce(this,e,hn,dn,le,{maxDrag:9,resetAfterDrag:10,deactivated:1,invertX:11,invertY:12,el:0,id:2,reset:13})}get reset(){return this.$$.ctx[13]}}function _n(t){let e,n;return{c(){e=A("div"),this.h()},l(l){e=P(l,"DIV",{class:!0,style:!0}),N(e).forEach(d),this.h()},h(){p(e,"class",n="checker "+t[1]+" svelte-4vmxi2"),J(e,"background-color",t[1]),J(e,"border","1px solid black")},m(l,r){B(l,e,r)},p(l,r){r&2&&n!==(n="checker "+l[1]+" svelte-4vmxi2")&&p(e,"class",n),r&2&&J(e,"background-color",l[1])},d(l){l&&d(e)}}}function mn(t){let e,n,l,r;function o(s){t[11](s)}function i(s){t[12](s)}let c={id:t[0],deactivated:!t[2],$$slots:{default:[_n]},$$scope:{ctx:t}};return t[3]!==void 0&&(c.el=t[3]),t[4]!==void 0&&(c.reset=t[4]),e=new Bt({props:c}),se.push(()=>De(e,"el",o)),se.push(()=>De(e,"reset",i)),e.$on("dragstart",t[5]),e.$on("dragend",t[6]),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,f){G(e,s,f),r=!0},p(s,[f]){const a={};f&1&&(a.id=s[0]),f&4&&(a.deactivated=!s[2]),f&65538&&(a.$$scope={dirty:f,ctx:s}),!n&&f&8&&(n=!0,a.el=s[3],ke(()=>n=!1)),!l&&f&16&&(l=!0,a.reset=s[4],ke(()=>l=!1)),e.$set(a)},i(s){r||(q(e.$$.fragment,s),r=!0)},o(s){X(e.$$.fragment,s),r=!1},d(s){K(e,s)}}}function gn(t,e,n){let{id:l}=e,{position:r}=e,{color:o}=e,{triangleCentroids:i}=e,{draggable:c=!1}=e,{invertX:s=!1}=e,{invertY:f=!1}=e;const a=Pt();let _,m,k=()=>{},g;He(()=>{m=document.querySelector(".moving-checker-cache")});const D=()=>{g=_.parentElement;const{left:I,top:S}=_.getBoundingClientRect();m.appendChild(_),n(3,_.style.position="absolute",_),n(3,_.style.left=`${I}px`,_),n(3,_.style.top=`${S}px`,_),m.style.pointerEvents="auto"},b=()=>{if(!i)return;const{left:I,top:S,width:w,height:C}=_.getBoundingClientRect(),U={x:I+w/2,y:S+C/2},E=i.reduce((te,R)=>{const L=Math.sqrt(Math.pow(U.x-R.x,2)+Math.pow(U.y-R.y,2));return L<te.distance?{distance:L,...R}:te},{distance:1/0,triangle:null});if(E.triangle.dataset.position==r)g.appendChild(_);else if(E.triangle.dataset.position<=23&&(o==="white"&&E.triangle.dataset.position<r||o==="black"&&E.triangle.dataset.position>r))g.appendChild(_);else if(!E.occupiedBy||E.occupiedBy===o)a("move",{checker_id:l,start:r,end:Number(E.triangle.dataset.position)});else if(E.length===1&&E.occupiedBy!==o&&E.triangle.classList.contains("triangle")){const te=document.querySelector(`.hit.${o==="white"?"black":"white"}`),R=E.checkersContainer.children[0];a("move",{checker_id:R.id,start:Number(E.triangle.dataset.position),end:Number(te.dataset.position)}),a("move",{checker_id:l,start:r,end:Number(E.triangle.dataset.position)})}else g.appendChild(_);k(),m.style.pointerEvents="none",n(3,_.style.position="static",_)};function y(I){_=I,n(3,_)}function V(I){k=I,n(4,k)}return t.$$set=I=>{"id"in I&&n(0,l=I.id),"position"in I&&n(7,r=I.position),"color"in I&&n(1,o=I.color),"triangleCentroids"in I&&n(8,i=I.triangleCentroids),"draggable"in I&&n(2,c=I.draggable),"invertX"in I&&n(9,s=I.invertX),"invertY"in I&&n(10,f=I.invertY)},[l,o,c,_,k,D,b,r,i,s,f,y,V]}class vn extends fe{constructor(e){super(),ce(this,e,gn,mn,le,{id:0,position:7,color:1,triangleCentroids:8,draggable:2,invertX:9,invertY:10})}}function pn(t){let e,n="?";return{c(){e=A("span"),e.textContent=n,this.h()},l(l){e=P(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1p91mot"&&(e.textContent=n),this.h()},h(){p(e,"class","svelte-a1rwuv")},m(l,r){B(l,e,r)},p:W,d(l){l&&d(e)}}}function bn(t){let e=[1,3,5].includes(t[0]),n,l=[2,3,4,5,6].includes(t[0]),r,o=[4,5,6].includes(t[0]),i,c,s=e&&Qe(),f=l&&$e(),a=o&&xe(),_=t[0]===6&&et();return{c(){s&&s.c(),n=z(),f&&f.c(),r=z(),a&&a.c(),i=z(),_&&_.c(),c=be()},l(m){s&&s.l(m),n=j(m),f&&f.l(m),r=j(m),a&&a.l(m),i=j(m),_&&_.l(m),c=be()},m(m,k){s&&s.m(m,k),B(m,n,k),f&&f.m(m,k),B(m,r,k),a&&a.m(m,k),B(m,i,k),_&&_.m(m,k),B(m,c,k)},p(m,k){k&1&&(e=[1,3,5].includes(m[0])),e?s||(s=Qe(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),k&1&&(l=[2,3,4,5,6].includes(m[0])),l?f||(f=$e(),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),k&1&&(o=[4,5,6].includes(m[0])),o?a||(a=xe(),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null),m[0]===6?_||(_=et(),_.c(),_.m(c.parentNode,c)):_&&(_.d(1),_=null)},d(m){m&&(d(n),d(r),d(i),d(c)),s&&s.d(m),f&&f.d(m),a&&a.d(m),_&&_.d(m)}}}function Qe(t){let e;return{c(){e=A("div"),this.h()},l(n){e=P(n,"DIV",{class:!0}),N(e).forEach(d),this.h()},h(){p(e,"class","dot center svelte-a1rwuv")},m(n,l){B(n,e,l)},d(n){n&&d(e)}}}function $e(t){let e,n,l;return{c(){e=A("div"),n=z(),l=A("div"),this.h()},l(r){e=P(r,"DIV",{class:!0}),N(e).forEach(d),n=j(r),l=P(r,"DIV",{class:!0}),N(l).forEach(d),this.h()},h(){p(e,"class","dot top-left svelte-a1rwuv"),p(l,"class","dot bottom-right svelte-a1rwuv")},m(r,o){B(r,e,o),B(r,n,o),B(r,l,o)},d(r){r&&(d(e),d(n),d(l))}}}function xe(t){let e,n,l;return{c(){e=A("div"),n=z(),l=A("div"),this.h()},l(r){e=P(r,"DIV",{class:!0}),N(e).forEach(d),n=j(r),l=P(r,"DIV",{class:!0}),N(l).forEach(d),this.h()},h(){p(e,"class","dot top-right svelte-a1rwuv"),p(l,"class","dot bottom-left svelte-a1rwuv")},m(r,o){B(r,e,o),B(r,n,o),B(r,l,o)},d(r){r&&(d(e),d(n),d(l))}}}function et(t){let e,n,l;return{c(){e=A("div"),n=z(),l=A("div"),this.h()},l(r){e=P(r,"DIV",{class:!0}),N(e).forEach(d),n=j(r),l=P(r,"DIV",{class:!0}),N(l).forEach(d),this.h()},h(){p(e,"class","dot center-left svelte-a1rwuv"),p(l,"class","dot center-right svelte-a1rwuv")},m(r,o){B(r,e,o),B(r,n,o),B(r,l,o)},d(r){r&&(d(e),d(n),d(l))}}}function yn(t){let e;function n(o,i){return o[0]?bn:pn}let l=n(t),r=l(t);return{c(){e=A("div"),r.c(),this.h()},l(o){e=P(o,"DIV",{class:!0});var i=N(e);r.l(i),i.forEach(d),this.h()},h(){p(e,"class","dice svelte-a1rwuv")},m(o,i){B(o,e,i),r.m(e,null)},p(o,[i]){l===(l=n(o))&&r?r.p(o,i):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null)))},i:W,o:W,d(o){o&&d(e),r.d()}}}function wn(t,e,n){let{number:l}=e;return t.$$set=r=>{"number"in r&&n(0,l=r.number)},[l]}class tt extends fe{constructor(e){super(),ce(this,e,wn,yn,le,{number:0})}}const ge=[];function Ne(t,e){return{subscribe:Tt(t,e).subscribe}}function Tt(t,e=W){let n;const l=new Set;function r(c){if(le(t,c)&&(t=c,n)){const s=!ge.length;for(const f of l)f[1](),ge.push(f,t);if(s){for(let f=0;f<ge.length;f+=2)ge[f][0](ge[f+1]);ge.length=0}}}function o(c){r(c(t))}function i(c,s=W){const f=[c,s];return l.add(f),l.size===1&&(n=e(r,o)||W),c(t),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:i}}function qe(t,e,n){const l=!Array.isArray(t),r=l?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ne(n,(i,c)=>{let s=!1;const f=[];let a=0,_=W;const m=()=>{if(a)return;_();const g=e(l?f[0]:f,i,c);o?i(g):_=Re(g)?g:W},k=r.map((g,D)=>kt(g,b=>{f[D]=b,a&=~(1<<D),s&&m()},()=>{a|=1<<D}));return s=!0,m(),function(){ae(k),_(),s=!1}})}const kn="https://agricola.uber.space/backgammon/backend",Ue=kn,Cn=async(t="test")=>await(await fetch(`${Ue}/${t}`)).json(),En=async(t="test")=>{const n=await(await fetch(`${Ue}/${t}/roll`)).json(),l=n.throws[n.throws.length-1];return[l.dice1,l.dice2]},Dn=async(t="test",e)=>await(await fetch(`${Ue}/${t}/moves`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text(),Le=t=>new URL(window.location.href).searchParams.get(t),In=Ne(!1,t=>{const e=Le("debug");t(e==="true")}),Vt=Ne(null,(t,e)=>{const n=Le("user")||"white";t(n)}),An=Ne(null,(t,e)=>{const n=Le("game")||"test";t(n)}),Pe=Tt({});let nt=null;const Be=Ne(null,(t,e)=>{const n=Le("game")||"test",l=setInterval(async()=>{const r=await Cn(n);JSON.stringify(r)!==nt&&(t(r),nt=JSON.stringify(r))},1e3);return()=>clearInterval(l)}),Fe=qe(Be,t=>{var n;return t?(((n=t.moves[t.moves.length-1])==null?void 0:n.player)||"b")==="w"?"black":"white":null}),St=qe(Be,t=>{if(!t)return 1;const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?n.turn+1:(n==null?void 0:n.turn)||1}),Pn=qe(Be,t=>{if(!t)return[null,null];const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?[null,null]:[(n==null?void 0:n.dice1)||null,(n==null?void 0:n.dice2)||null]}),Ot=qe([Fe,Vt],([t,e])=>t===e),Mt=[{position:0,color:"white",id:"0-0"},{position:0,color:"white",id:"0-1"},{position:5,color:"black",id:"5-0"},{position:5,color:"black",id:"5-1"},{position:5,color:"black",id:"5-2"},{position:5,color:"black",id:"5-3"},{position:5,color:"black",id:"5-4"},{position:7,color:"black",id:"7-0"},{position:7,color:"black",id:"7-1"},{position:7,color:"black",id:"7-2"},{position:11,color:"white",id:"11-0"},{position:11,color:"white",id:"11-1"},{position:11,color:"white",id:"11-2"},{position:11,color:"white",id:"11-3"},{position:11,color:"white",id:"11-4"},{position:12,color:"black",id:"12-0"},{position:12,color:"black",id:"12-1"},{position:12,color:"black",id:"12-2"},{position:12,color:"black",id:"12-3"},{position:12,color:"black",id:"12-4"},{position:16,color:"white",id:"16-0"},{position:16,color:"white",id:"16-1"},{position:16,color:"white",id:"16-2"},{position:18,color:"white",id:"18-0"},{position:18,color:"white",id:"18-1"},{position:18,color:"white",id:"18-2"},{position:18,color:"white",id:"18-3"},{position:18,color:"white",id:"18-4"},{position:23,color:"black",id:"23-0"},{position:23,color:"black",id:"23-1"}];function lt(t,e,n){const l=t.slice();return l[13]=e[n],l[15]=n,l}function rt(t){let e,n,l,r;function o(){return t[9](t[15])}return{c(){e=A("div"),this.h()},l(i){e=P(i,"DIV",{class:!0}),N(e).forEach(d),this.h()},h(){p(e,"class",n="info "+t[13].player+" svelte-10k8uc2")},m(i,c){B(i,e,c),l||(r=[ue(e,"mouseenter",o),ue(e,"mouseout",t[10])],l=!0)},p(i,c){t=i,c&1&&n!==(n="info "+t[13].player+" svelte-10k8uc2")&&p(e,"class",n)},d(i){i&&d(e),l=!1,ae(r)}}}function Nn(t){let e,n=F(t[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=rt(lt(t,n,r));return{c(){e=A("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=P(r,"DIV",{class:!0});var o=N(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(d),this.h()},h(){p(e,"class","container svelte-10k8uc2")},m(r,o){B(r,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(r,[o]){if(o&7){n=F(r[0]);let i;for(i=0;i<n.length;i+=1){const c=lt(r,n,i);l[i]?l[i].p(c,o):(l[i]=rt(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},i:W,o:W,d(r){r&&d(e),he(l,r)}}}function Bn(t,e,n){let l,r,o;H(t,Pe,b=>n(12,l=b)),H(t,Be,b=>n(7,r=b)),H(t,St,b=>n(8,o=b));let{moveChecker:i}=e,{forcedPlayer:c}=e,{forcedTurn:s}=e,{forcedDices:f}=e,a=[],_;const m=b=>{_=b;const{state:y,moves:V,throw:I,player:S}=a[b-1];console.log(a[b],b),y.forEach(w=>{i(w.id,w.position)}),n(3,c=S),n(4,s=b),n(5,f=[I.dice1,I.dice2]),V.forEach(w=>{document.getElementById(`${w.checker_id}`).children[0].style.border="3px solid red",i(w.checker_id,w.end)})},k=()=>{const{moves:b,player:y}=a[_-1];b.forEach(V=>{document.getElementById(`${V.checker_id}`).children[0].style.border="1px solid black"}),r.moves.forEach(V=>{i(V.checker_id,V.end)}),l&&Object.values(l).forEach(V=>{i(V.checker_id,V.end)}),n(3,c=null),n(4,s=null),n(5,f=null),_=null},g=b=>m(b+1),D=()=>k();return t.$$set=b=>{"moveChecker"in b&&n(6,i=b.moveChecker),"forcedPlayer"in b&&n(3,c=b.forcedPlayer),"forcedTurn"in b&&n(4,s=b.forcedTurn),"forcedDices"in b&&n(5,f=b.forcedDices)},t.$$.update=()=>{t.$$.dirty&384&&n(0,a=Array.from({length:o-1},(b,y)=>{const V=r.moves.filter(S=>S.turn<y+1);return{state:Mt.map(S=>{const w=V.reverse().find(C=>C.checker_id===S.id);return w?{...S,position:w.end}:S}),moves:r.moves.filter(S=>S.turn===y+1),throw:r.throws.find(S=>S.turn===y+1),player:y%2===0?"white":"black"}}))},[a,m,k,c,s,f,i,r,o,g,D]}class Tn extends fe{constructor(e){super(),ce(this,e,Bn,Nn,le,{moveChecker:6,forcedPlayer:3,forcedTurn:4,forcedDices:5})}}function it(t){let e,n="Zieh die Würfel mit der Maus,<br/>um zu würfeln";return{c(){e=A("span"),e.innerHTML=n,this.h()},l(l){e=P(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-z01ytv"&&(e.innerHTML=n),this.h()},h(){p(e,"class","svelte-ql81fn")},m(l,r){B(l,e,r)},d(l){l&&d(e)}}}function Vn(t){let e,n,l,r,o;return n=new tt({props:{number:t[4][0]}}),r=new tt({props:{number:t[4][1]}}),{c(){e=A("div"),x(n.$$.fragment),l=z(),x(r.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var c=N(e);ee(n.$$.fragment,c),l=j(c),ee(r.$$.fragment,c),c.forEach(d),this.h()},h(){p(e,"class","dices svelte-ql81fn")},m(i,c){B(i,e,c),G(n,e,null),T(e,l),G(r,e,null),o=!0},p(i,c){const s={};c&16&&(s.number=i[4][0]),n.$set(s);const f={};c&16&&(f.number=i[4][1]),r.$set(f)},i(i){o||(q(n.$$.fragment,i),q(r.$$.fragment,i),o=!0)},o(i){X(n.$$.fragment,i),X(r.$$.fragment,i),o=!1},d(i){i&&d(e),K(n),K(r)}}}function ot(t){let e,n,l="Zug beenden",r,o;return{c(){e=A("div"),n=A("button"),n.textContent=l,this.h()},l(i){e=P(i,"DIV",{class:!0});var c=N(e);n=P(c,"BUTTON",{"data-svelte-h":!0}),Ie(n)!=="svelte-1gt0av7"&&(n.textContent=l),c.forEach(d),this.h()},h(){p(e,"class","actions svelte-ql81fn")},m(i,c){B(i,e,c),T(e,n),r||(o=ue(n,"click",t[10]),r=!0)},p:W,d(i){i&&d(e),r=!1,o()}}}function Sn(t){let e,n,l,r,o=t[7]==="white"?"Weiß":"Schwarz",i,c,s=t[5]?"war":"ist",f,a,_,m,k,g,D,b,y,V,I,S,w,C,U,E,te,R;function L(u){t[14](u)}function ze(u){t[15](u)}function re(u){t[16](u)}let M={moveChecker:t[0]};t[2]!==void 0&&(M.forcedPlayer=t[2]),t[1]!==void 0&&(M.forcedTurn=t[1]),t[3]!==void 0&&(M.forcedDices=t[3]),y=new Tn({props:M}),se.push(()=>De(y,"forcedPlayer",L)),se.push(()=>De(y,"forcedTurn",ze)),se.push(()=>De(y,"forcedDices",re));let Z=!t[4][0]&&!t[4][1]&&t[8]&&it();E=new Bt({props:{maxDrag:[150,150],resetAfterDrag:!0,deactivated:t[4][0]||!t[8],$$slots:{default:[Vn]},$$scope:{ctx:t}}}),E.$on("dragend",t[9]);let O=t[4][0]&&t[4][1]&&t[8]&&ot(t);return{c(){e=A("div"),n=A("div"),l=A("div"),r=A("p"),i=$(o),c=z(),f=$(s),a=$(" am Zug"),_=z(),m=A("p"),k=$("Zug "),g=$(t[6]),b=z(),x(y.$$.fragment),w=z(),C=A("div"),Z&&Z.c(),U=z(),x(E.$$.fragment),te=z(),O&&O.c(),this.h()},l(u){e=P(u,"DIV",{class:!0});var v=N(e);n=P(v,"DIV",{class:!0});var h=N(n);l=P(h,"DIV",{class:!0});var Y=N(l);r=P(Y,"P",{class:!0});var ne=N(r);i=oe(ne,o),c=j(ne),f=oe(ne,s),a=oe(ne," am Zug"),ne.forEach(d),_=j(Y),m=P(Y,"P",{class:!0});var _e=N(m);k=oe(_e,"Zug "),g=oe(_e,t[6]),_e.forEach(d),Y.forEach(d),b=j(h),ee(y.$$.fragment,h),h.forEach(d),w=j(v),C=P(v,"DIV",{class:!0});var ie=N(C);Z&&Z.l(ie),U=j(ie),ee(E.$$.fragment,ie),ie.forEach(d),te=j(v),O&&O.l(v),v.forEach(d),this.h()},h(){p(r,"class","player svelte-ql81fn"),p(m,"class","turn svelte-ql81fn"),p(l,"class",D="info "+t[7]+" svelte-ql81fn"),p(n,"class","header svelte-ql81fn"),p(C,"class","dice-container svelte-ql81fn"),p(e,"class","container svelte-ql81fn")},m(u,v){B(u,e,v),T(e,n),T(n,l),T(l,r),T(r,i),T(r,c),T(r,f),T(r,a),T(l,_),T(l,m),T(m,k),T(m,g),T(n,b),G(y,n,null),T(e,w),T(e,C),Z&&Z.m(C,null),T(C,U),G(E,C,null),T(e,te),O&&O.m(e,null),R=!0},p(u,[v]){(!R||v&128)&&o!==(o=u[7]==="white"?"Weiß":"Schwarz")&&ye(i,o),(!R||v&32)&&s!==(s=u[5]?"war":"ist")&&ye(f,s),(!R||v&64)&&ye(g,u[6]),(!R||v&128&&D!==(D="info "+u[7]+" svelte-ql81fn"))&&p(l,"class",D);const h={};v&1&&(h.moveChecker=u[0]),!V&&v&4&&(V=!0,h.forcedPlayer=u[2],ke(()=>V=!1)),!I&&v&2&&(I=!0,h.forcedTurn=u[1],ke(()=>I=!1)),!S&&v&8&&(S=!0,h.forcedDices=u[3],ke(()=>S=!1)),y.$set(h),!u[4][0]&&!u[4][1]&&u[8]?Z||(Z=it(),Z.c(),Z.m(C,U)):Z&&(Z.d(1),Z=null);const Y={};v&272&&(Y.deactivated=u[4][0]||!u[8]),v&524304&&(Y.$$scope={dirty:v,ctx:u}),E.$set(Y),u[4][0]&&u[4][1]&&u[8]?O?O.p(u,v):(O=ot(u),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i(u){R||(q(y.$$.fragment,u),q(E.$$.fragment,u),R=!0)},o(u){X(y.$$.fragment,u),X(E.$$.fragment,u),R=!1},d(u){u&&d(e),K(y),Z&&Z.d(),K(E),O&&O.d()}}}function On(t,e,n){let l,r,o,i,c,s,f,a,_;H(t,Pe,C=>n(17,i=C)),H(t,An,C=>n(18,c=C)),H(t,Pn,C=>n(11,s=C)),H(t,St,C=>n(12,f=C)),H(t,Fe,C=>n(13,a=C)),H(t,Ot,C=>n(8,_=C));let{moveChecker:m=()=>{}}=e,k,g,D,b=s;const y=async()=>{n(4,b=await En(c))},V=async()=>{await Dn(c,Object.values(i)),Et(Pe,i={},i)};function I(C){g=C,n(2,g)}function S(C){k=C,n(1,k)}function w(C){D=C,n(3,D)}return t.$$set=C=>{"moveChecker"in C&&n(0,m=C.moveChecker)},t.$$.update=()=>{t.$$.dirty&8196&&n(7,l=g||a),t.$$.dirty&4098&&n(6,r=k||f),t.$$.dirty&6&&n(5,o=g&&k),t.$$.dirty&2072&&(n(4,b=D||s),console.log(b,D))},[m,k,g,D,b,o,r,l,_,y,V,s,f,a,I,S,w]}class Mn extends fe{constructor(e){super(),ce(this,e,On,Sn,le,{moveChecker:0})}}function st(t){let e,n,l=t[3]-1+"",r;return{c(){e=A("span"),n=$("+"),r=$(l),this.h()},l(o){e=P(o,"SPAN",{class:!0});var i=N(e);n=oe(i,"+"),r=oe(i,l),i.forEach(d),this.h()},h(){p(e,"class","bottom-info svelte-8ynv3l")},m(o,i){B(o,e,i),T(e,n),T(e,r)},p(o,i){i&8&&l!==(l=o[3]-1+"")&&ye(r,l)},d(o){o&&d(e)}}}function qn(t){let e,n,l,r,o,i=t[3]>1&&st(t);return{c(){e=A("div"),n=A("span"),r=z(),i&&i.c(),this.h()},l(c){e=P(c,"DIV",{class:!0,"data-position":!0});var s=N(e);n=P(s,"SPAN",{class:!0}),N(n).forEach(d),r=j(s),i&&i.l(s),s.forEach(d),this.h()},h(){p(n,"class",l="label "+t[1]+" svelte-8ynv3l"),p(e,"class",o=t[1]+" checkerContainer "+t[2]+" box svelte-8ynv3l"),p(e,"data-position",t[0])},m(c,s){B(c,e,s),T(e,n),T(e,r),i&&i.m(e,null),t[5](e)},p(c,[s]){s&2&&l!==(l="label "+c[1]+" svelte-8ynv3l")&&p(n,"class",l),c[3]>1?i?i.p(c,s):(i=st(c),i.c(),i.m(e,null)):i&&(i.d(1),i=null),s&6&&o!==(o=c[1]+" checkerContainer "+c[2]+" box svelte-8ynv3l")&&p(e,"class",o),s&1&&p(e,"data-position",c[0])},i:W,o:W,d(c){c&&d(e),i&&i.d(),t[5](null)}}}function Ln(t,e,n){let{position:l}=e,{color:r}=e,{type:o}=e,i,c;const s=new MutationObserver(()=>{n(3,i=c.querySelectorAll(".draggable").length)});He(()=>{s.observe(c,{childList:!0})});function f(a){se[a?"unshift":"push"](()=>{c=a,n(4,c)})}return t.$$set=a=>{"position"in a&&n(0,l=a.position),"color"in a&&n(1,r=a.color),"type"in a&&n(2,o=a.type)},[l,r,o,i,c,f]}class qt extends fe{constructor(e){super(),ce(this,e,Ln,qn,le,{position:0,color:1,type:2})}}function ct(t,e,n){const l=t.slice();return l[11]=e[n].x,l[12]=e[n].y,l[13]=e[n].triangle,l[15]=n,l}function ft(t,e,n){const l=t.slice();return l[16]=e[n],l[18]=n,l}function ut(t,e,n){const l=t.slice();return l[16]=e[n],l[15]=n,l}function at(t,e,n){const l=t.slice();return l[20]=e[n],l}function dt(t,e,n){const l=t.slice();return l[23]=e[n],l[15]=n,l}function ht(t,e,n){const l=t.slice();return l[23]=e[n],l[15]=n,l}function _t(t){var l;let e,n;return e=new qt({props:{position:24+t[15],color:t[23],type:"hit",numberOfChildren:t[0]&&((l=t[0][24+t[15]])==null?void 0:l.length)}}),{c(){x(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,o){G(e,r,o),n=!0},p(r,o){var c;const i={};o&1&&(i.numberOfChildren=r[0]&&((c=r[0][24+r[15]])==null?void 0:c.length)),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){X(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function mt(t){var l;let e,n;return e=new qt({props:{position:26+t[15],color:t[23],type:"out",numberOfChildren:t[0]&&((l=t[0][26+t[15]])==null?void 0:l.length)}}),{c(){x(e.$$.fragment)},l(r){ee(e.$$.fragment,r)},m(r,o){G(e,r,o),n=!0},p(r,o){var c;const i={};o&1&&(i.numberOfChildren=r[0]&&((c=r[0][26+r[15]])==null?void 0:c.length)),e.$set(i)},i(r){n||(q(e.$$.fragment,r),n=!0)},o(r){X(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function zn(t){let e,n,l=F(t[5][t[15]+t[18]*12].checkers),r=[];for(let i=0;i<l.length;i+=1)r[i]=gt(at(t,l,i));const o=i=>X(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=be()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=be()},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);B(i,e,c),n=!0},p(i,c){if(c&175){l=F(i[5][i[15]+i[18]*12].checkers);let s;for(s=0;s<l.length;s+=1){const f=at(i,l,s);r[s]?(r[s].p(f,c),q(r[s],1)):(r[s]=gt(f),r[s].c(),q(r[s],1),r[s].m(e.parentNode,e))}for(Ce(),s=l.length;s<r.length;s+=1)o(s);Ee()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)q(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)X(r[c]);n=!1},d(i){i&&d(e),he(r,i)}}}function gt(t){let e,n;return e=new vn({props:{id:t[20],position:t[15]+t[18]*12,color:t[5][t[15]+t[18]*12].color,draggable:t[5][t[15]+t[18]*12].color===t[2]&&t[3],triangleCentroids:t[0],invertX:t[1]==="black",invertY:t[1]==="black"}}),e.$on("move",t[7]),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,r){G(e,l,r),n=!0},p(l,r){const o={};r&12&&(o.draggable=l[5][l[15]+l[18]*12].color===l[2]&&l[3]),r&1&&(o.triangleCentroids=l[0]),r&2&&(o.invertX=l[1]==="black"),r&2&&(o.invertY=l[1]==="black"),e.$set(o)},i(l){n||(q(e.$$.fragment,l),n=!0)},o(l){X(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function vt(t){let e,n,l,r,o,i;n=new an({props:{color:t[15]%2===0?"darkgrey":"grey",reversed:t[18]===0}});let c=t[5][t[15]+t[18]*12]&&zn(t);return{c(){e=A("div"),x(n.$$.fragment),l=z(),r=A("div"),c&&c.c(),this.h()},l(s){e=P(s,"DIV",{class:!0,style:!0,"data-position":!0});var f=N(e);ee(n.$$.fragment,f),l=j(f),r=P(f,"DIV",{class:!0});var a=N(r);c&&c.l(a),a.forEach(d),f.forEach(d),this.h()},h(){p(r,"class","checkerContainer "+(t[18]===1&&"reversed")+" svelte-1dh3mcl"),p(e,"class","triangle root-triangle svelte-1dh3mcl"),J(e,"width",100/12+"%"),p(e,"data-position",o=(t[1]==="white",t[15]+t[18]*12))},m(s,f){B(s,e,f),G(n,e,null),T(e,l),T(e,r),c&&c.m(r,null),i=!0},p(s,f){s[5][s[15]+s[18]*12]&&c.p(s,f),(!i||f&2&&o!==(o=(s[1]==="white",s[15]+s[18]*12)))&&p(e,"data-position",o)},i(s){i||(q(n.$$.fragment,s),q(c),i=!0)},o(s){X(n.$$.fragment,s),X(c),i=!1},d(s){s&&d(e),K(n),c&&c.d()}}}function pt(t){let e,n,l,r=F(Array.from({length:12})),o=[];for(let c=0;c<r.length;c+=1)o[c]=vt(ut(t,r,c));const i=c=>X(o[c],1,1,()=>{o[c]=null});return{c(){e=A("div");for(let c=0;c<o.length;c+=1)o[c].c();n=z(),this.h()},l(c){e=P(c,"DIV",{class:!0});var s=N(e);for(let f=0;f<o.length;f+=1)o[f].l(s);n=j(s),s.forEach(d),this.h()},h(){p(e,"class","side "+(t[18]===0?"upper":"lower")+" svelte-1dh3mcl")},m(c,s){B(c,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);T(e,n),l=!0},p(c,s){if(s&175){r=F(Array.from({length:12}));let f;for(f=0;f<r.length;f+=1){const a=ut(c,r,f);o[f]?(o[f].p(a,s),q(o[f],1)):(o[f]=vt(a),o[f].c(),q(o[f],1),o[f].m(e,n))}for(Ce(),f=r.length;f<o.length;f+=1)i(f);Ee()}},i(c){if(!l){for(let s=0;s<r.length;s+=1)q(o[s]);l=!0}},o(c){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)X(o[s]);l=!1},d(c){c&&d(e),he(o,c)}}}function bt(t){let e,n=F(t[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=yt(ct(t,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=be()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=be()},m(r,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(r,o);B(r,e,o)},p(r,o){if(o&1){n=F(r[0]);let i;for(i=0;i<n.length;i+=1){const c=ct(r,n,i);l[i]?l[i].p(c,o):(l[i]=yt(c),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(r){r&&d(e),he(l,r)}}}function yt(t){let e,n=t[13].dataset.position+"",l,r;return{c(){e=A("div"),l=$(n),r=z(),this.h()},l(o){e=P(o,"DIV",{class:!0,style:!0});var i=N(e);l=oe(i,n),r=j(i),i.forEach(d),this.h()},h(){p(e,"class","marker svelte-1dh3mcl"),J(e,"position","fixed"),J(e,"top",t[12]+"px"),J(e,"left",t[11]+"px"),J(e,"color","white")},m(o,i){B(o,e,i),T(e,l),T(e,r)},p(o,i){i&1&&n!==(n=o[13].dataset.position+"")&&ye(l,n),i&1&&J(e,"top",o[12]+"px"),i&1&&J(e,"left",o[11]+"px")},d(o){o&&d(e)}}}function jn(t){let e,n,l,r,o,i="Geschlagen",c,s,f,a,_,m="Im Ziel",k,g,D,b,y,V,I,S,w,C;n=new Mn({props:{moveChecker:t[6]}});let U=F(["white","black"]),E=[];for(let u=0;u<2;u+=1)E[u]=_t(ht(t,U,u));const te=u=>X(E[u],1,1,()=>{E[u]=null});let R=F(["white","black"]),L=[];for(let u=0;u<2;u+=1)L[u]=mt(dt(t,R,u));const ze=u=>X(L[u],1,1,()=>{L[u]=null});let re=F(Array.from({length:2})),M=[];for(let u=0;u<re.length;u+=1)M[u]=pt(ft(t,re,u));const Z=u=>X(M[u],1,1,()=>{M[u]=null});let O=t[0]&&t[4]&&bt(t);return{c(){e=A("div"),x(n.$$.fragment),l=z(),r=A("div"),o=A("span"),o.textContent=i,c=z(),s=A("div");for(let u=0;u<2;u+=1)E[u].c();f=z(),a=A("div"),_=A("span"),_.textContent=m,k=z(),g=A("div");for(let u=0;u<2;u+=1)L[u].c();D=z(),b=A("div"),y=A("div");for(let u=0;u<M.length;u+=1)M[u].c();I=z(),O&&O.c(),S=z(),w=A("div"),this.h()},l(u){e=P(u,"DIV",{class:!0});var v=N(e);ee(n.$$.fragment,v),l=j(v),r=P(v,"DIV",{class:!0});var h=N(r);o=P(h,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(o)!=="svelte-1ko309i"&&(o.textContent=i),c=j(h),s=P(h,"DIV",{class:!0});var Y=N(s);for(let Q=0;Q<2;Q+=1)E[Q].l(Y);Y.forEach(d),h.forEach(d),f=j(v),a=P(v,"DIV",{class:!0});var ne=N(a);_=P(ne,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(_)!=="svelte-15oige1"&&(_.textContent=m),k=j(ne),g=P(ne,"DIV",{class:!0});var _e=N(g);for(let Q=0;Q<2;Q+=1)L[Q].l(_e);_e.forEach(d),ne.forEach(d),v.forEach(d),D=j(u),b=P(u,"DIV",{class:!0});var ie=N(b);y=P(ie,"DIV",{class:!0});var Je=N(y);for(let Q=0;Q<M.length;Q+=1)M[Q].l(Je);Je.forEach(d),I=j(ie),O&&O.l(ie),ie.forEach(d),S=j(u),w=P(u,"DIV",{class:!0}),N(w).forEach(d),this.h()},h(){p(o,"class","label svelte-1dh3mcl"),p(s,"class","boxes svelte-1dh3mcl"),p(r,"class","hit-area svelte-1dh3mcl"),p(_,"class","label svelte-1dh3mcl"),p(g,"class","boxes svelte-1dh3mcl"),p(a,"class","out-area svelte-1dh3mcl"),p(e,"class","side-area svelte-1dh3mcl"),p(y,"class",V="board "+t[1]+" svelte-1dh3mcl"),p(b,"class","main-area svelte-1dh3mcl"),p(w,"class","moving-checker-cache svelte-1dh3mcl")},m(u,v){B(u,e,v),G(n,e,null),T(e,l),T(e,r),T(r,o),T(r,c),T(r,s);for(let h=0;h<2;h+=1)E[h]&&E[h].m(s,null);T(e,f),T(e,a),T(a,_),T(a,k),T(a,g);for(let h=0;h<2;h+=1)L[h]&&L[h].m(g,null);B(u,D,v),B(u,b,v),T(b,y);for(let h=0;h<M.length;h+=1)M[h]&&M[h].m(y,null);T(b,I),O&&O.m(b,null),B(u,S,v),B(u,w,v),C=!0},p(u,[v]){if(v&1){U=F(["white","black"]);let h;for(h=0;h<2;h+=1){const Y=ht(u,U,h);E[h]?(E[h].p(Y,v),q(E[h],1)):(E[h]=_t(Y),E[h].c(),q(E[h],1),E[h].m(s,null))}for(Ce(),h=2;h<2;h+=1)te(h);Ee()}if(v&1){R=F(["white","black"]);let h;for(h=0;h<2;h+=1){const Y=dt(u,R,h);L[h]?(L[h].p(Y,v),q(L[h],1)):(L[h]=mt(Y),L[h].c(),q(L[h],1),L[h].m(g,null))}for(Ce(),h=2;h<2;h+=1)ze(h);Ee()}if(v&175){re=F(Array.from({length:2}));let h;for(h=0;h<re.length;h+=1){const Y=ft(u,re,h);M[h]?(M[h].p(Y,v),q(M[h],1)):(M[h]=pt(Y),M[h].c(),q(M[h],1),M[h].m(y,null))}for(Ce(),h=re.length;h<M.length;h+=1)Z(h);Ee()}(!C||v&2&&V!==(V="board "+u[1]+" svelte-1dh3mcl"))&&p(y,"class",V),u[0]&&u[4]?O?O.p(u,v):(O=bt(u),O.c(),O.m(b,null)):O&&(O.d(1),O=null)},i(u){if(!C){q(n.$$.fragment,u);for(let v=0;v<2;v+=1)q(E[v]);for(let v=0;v<2;v+=1)q(L[v]);for(let v=0;v<re.length;v+=1)q(M[v]);C=!0}},o(u){X(n.$$.fragment,u),E=E.filter(Boolean);for(let v=0;v<2;v+=1)X(E[v]);L=L.filter(Boolean);for(let v=0;v<2;v+=1)X(L[v]);M=M.filter(Boolean);for(let v=0;v<M.length;v+=1)X(M[v]);C=!1},d(u){u&&(d(e),d(D),d(b),d(S),d(w)),K(n),he(E,u),he(L,u),he(M,u),O&&O.d()}}}function Xn(t,e,n){let l,r,o,i,c,s;H(t,Be,g=>n(8,l=g)),H(t,Pe,g=>n(9,r=g)),H(t,Vt,g=>n(1,o=g)),H(t,Fe,g=>n(2,i=g)),H(t,Ot,g=>n(3,c=g)),H(t,In,g=>n(4,s=g));let f=Mt.reduce((g,D)=>(g[D.position]||(g[D.position]={checkers:[],color:D.color}),g[D.position].checkers.push(D.id),g),{});const a=(g,D)=>{const b=document.getElementById(g);m[D].checkersContainer.appendChild(b)},_=g=>{const{checker_id:D,start:b,end:y}=g.detail;if(b===y)return;const V={checker_id:D,start:b,end:y};Et(Pe,r={...r,[D]:V},r),m[y].checkersContainer.appendChild(document.getElementById(D)),k()};let m;const k=()=>{const g=document.querySelectorAll(".triangle");n(0,m=Array.from(g).map(y=>{const{left:V,top:I,width:S,height:w}=y.getBoundingClientRect(),C=y.querySelector(".checkerContainer");let U=null,E=0;return C.children.length&&(U=C.children[0].children[0].classList[1],E=C.children.length),{x:V+S/2,y:I+w/2,triangle:y,checkersContainer:y.querySelector(".checkerContainer"),occupiedBy:U,length:E}}));const D=document.querySelectorAll(".hit");n(0,m=m.concat(Array.from(D).map(y=>{const{left:V,top:I,width:S,height:w}=y.getBoundingClientRect();return{x:V+S/2,y:I+w/2,triangle:y,checkersContainer:y,occupiedBy:y.classList[0],length:new Array(...y.children).filter(C=>C.classList.contains("draggable")).length}})));const b=document.querySelectorAll(".out");n(0,m=m.concat(Array.from(b).map(y=>{const{left:V,top:I,width:S,height:w}=y.getBoundingClientRect();return{x:V+S/2,y:I+w/2,triangle:y,checkersContainer:y,occupiedBy:y.classList[0],length:new Array(...y.children).filter(C=>C.classList.contains("draggable")).length}})))};return He(()=>{k()}),t.$$.update=()=>{if(t.$$.dirty&256){const{moves:g}=l||{};if(g)for(const D of g)a(D.checker_id,D.end);k()}},[m,o,i,c,s,f,a,_,l]}class Yn extends fe{constructor(e){super(),ce(this,e,Xn,jn,le,{})}}function Wn(t){let e,n,l;return n=new Yn({props:{startSettings:t[0]}}),{c(){e=A("div"),x(n.$$.fragment),this.h()},l(r){e=P(r,"DIV",{class:!0});var o=N(e);ee(n.$$.fragment,o),o.forEach(d),this.h()},h(){p(e,"class","game svelte-ze3agv")},m(r,o){B(r,e,o),G(n,e,null),l=!0},p:W,i(r){l||(q(n.$$.fragment,r),l=!0)},o(r){X(n.$$.fragment,r),l=!1},d(r){r&&d(e),K(n)}}}function Rn(t){return[{0:{checkers:2,color:"white"},5:{checkers:5,color:"black"},7:{checkers:3,color:"black"},11:{checkers:5,color:"white"},12:{checkers:5,color:"black"},16:{checkers:3,color:"white"},18:{checkers:5,color:"white"},23:{checkers:2,color:"black"}}]}class Zn extends fe{constructor(e){super(),ce(this,e,Rn,Wn,le,{})}}new Zn({target:document.getElementById("app")});

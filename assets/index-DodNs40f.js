var tn=Object.defineProperty;var nn=(t,e,n)=>e in t?tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ue=(t,e,n)=>nn(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function H(){}function qe(t,e){for(const n in e)t[n]=e[n];return t}function qt(t){return t()}function lt(){return Object.create(null)}function _e(t){t.forEach(qt)}function Je(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ln(t){return Object.keys(t).length===0}function zt(t,...e){if(t==null){for(const l of e)l(void 0);return H}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function K(t,e,n){t.$$.on_destroy.push(zt(e,n))}function jt(t,e,n,l){if(t){const r=Lt(t,e,n,l);return t[0](r)}}function Lt(t,e,n,l){return t[1]&&l?qe(n.ctx.slice(),t[1](l(e))):n.ctx}function Xt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],i=Math.max(e.dirty.length,r.length);for(let c=0;c<i;c+=1)o[c]=e.dirty[c]|r[c];return o}return e.dirty|r}return e.dirty}function Yt(t,e,n,l,r,o){if(r){const i=Lt(e,n,l,o);t.p(i,r)}}function Wt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Ut(t,e,n){return t.set(n),e}let ze=!1;function rn(){ze=!0}function on(){ze=!1}function sn(t,e,n,l){for(;t<e;){const r=t+(e-t>>1);n(r)<=l?t=r+1:e=r}return t}function cn(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const s=[];for(let f=0;f<e.length;f++){const _=e[f];_.claim_order!==void 0&&s.push(_)}e=s}const n=new Int32Array(e.length+1),l=new Int32Array(e.length);n[0]=-1;let r=0;for(let s=0;s<e.length;s++){const f=e[s].claim_order,_=(r>0&&e[n[r]].claim_order<=f?r+1:sn(1,r,a=>e[n[a]].claim_order,f))-1;l[s]=n[_]+1;const u=_+1;n[u]=s,r=Math.max(u,r)}const o=[],i=[];let c=e.length-1;for(let s=n[r]+1;s!=0;s=l[s-1]){for(o.push(e[s-1]);c>=s;c--)i.push(e[c]);c--}for(;c>=0;c--)i.push(e[c]);o.reverse(),i.sort((s,f)=>s.claim_order-f.claim_order);for(let s=0,f=0;s<i.length;s++){for(;f<o.length&&i[s].claim_order>=o[f].claim_order;)f++;const _=f<o.length?o[f]:null;t.insertBefore(i[s],_)}}function fn(t,e){t.appendChild(e)}function V(t,e){if(ze){for(cn(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function I(t,e,n){ze&&!n?V(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function fe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function je(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ie(t){return document.createTextNode(t)}function j(){return ie(" ")}function De(){return ie("")}function re(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ie(t){return t.dataset.svelteH}function T(t){return Array.from(t.childNodes)}function un(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Zt(t,e,n,l,r=!1){un(t);const o=(()=>{for(let i=t.claim_info.last_index;i<t.length;i++){const c=t[i];if(e(c)){const s=n(c);return s===void 0?t.splice(i,1):t[i]=s,r||(t.claim_info.last_index=i),c}}for(let i=t.claim_info.last_index-1;i>=0;i--){const c=t[i];if(e(c)){const s=n(c);return s===void 0?t.splice(i,1):t[i]=s,r?s===void 0&&t.claim_info.last_index--:t.claim_info.last_index=i,c}}return l()})();return o.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,o}function Ht(t,e,n,l){return Zt(t,r=>r.nodeName===e,r=>{const o=[];for(let i=0;i<r.attributes.length;i++){const c=r.attributes[i];n[c.name]||o.push(c.name)}o.forEach(i=>r.removeAttribute(i))},()=>l(e))}function N(t,e,n){return Ht(t,e,n,P)}function Ge(t,e,n){return Ht(t,e,n,je)}function ce(t,e){return Zt(t,n=>n.nodeType===3,n=>{const l=""+e;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>ie(e),!0)}function L(t){return ce(t," ")}function Ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let Be;function an(){if(Be===void 0){Be=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Be=!0}}return Be}function dn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=P("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const r=an();let o;return r?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=re(window,"message",i=>{i.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{o=re(l.contentWindow,"resize",e),e()}),fn(t,l),()=>{(r||o&&l.contentWindow)&&o(),h(l)}}function hn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Ne;function Pe(t){Ne=t}function Rt(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function Ke(t){Rt().$$.on_mount.push(t)}function Ft(){const t=Rt();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=hn(e,n,{cancelable:l});return r.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}const ke=[],oe=[];let ye=[];const He=[],_n=Promise.resolve();let Re=!1;function mn(){Re||(Re=!0,_n.then(Jt))}function Se(t){ye.push(t)}function ge(t){He.push(t)}const Ze=new Set;let be=0;function Jt(){if(be!==0)return;const t=Ne;do{try{for(;be<ke.length;){const e=ke[be];be++,Pe(e),gn(e.$$)}}catch(e){throw ke.length=0,be=0,e}for(Pe(null),ke.length=0,be=0;oe.length;)oe.pop()();for(let e=0;e<ye.length;e+=1){const n=ye[e];Ze.has(n)||(Ze.add(n),n())}ye.length=0}while(ke.length);for(;He.length;)He.pop()();Re=!1,Ze.clear(),Pe(t)}function gn(t){if(t.fragment!==null){t.update(),_e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Se)}}function pn(t){const e=[],n=[];ye.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ye=e}const Me=new Set;let pe;function de(){pe={r:0,c:[],p:pe}}function he(){pe.r||_e(pe.c),pe=pe.p}function B(t,e){t&&t.i&&(Me.delete(t),t.i(e))}function q(t,e,n,l){if(t&&t.o){if(Me.has(t))return;Me.add(t),pe.c.push(()=>{Me.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Z(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Qe(t,e){const n={},l={},r={$$scope:1};let o=t.length;for(;o--;){const i=t[o],c=e[o];if(c){for(const s in i)s in c||(l[s]=1);for(const s in c)r[s]||(n[s]=c[s],r[s]=1);t[o]=c}else for(const s in i)r[s]=1}for(const i in l)i in n||(n[i]=void 0);return n}function $e(t){return typeof t=="object"&&t!==null?t:{}}function ve(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function ee(t){t&&t.c()}function te(t,e){t&&t.l(e)}function Q(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Se(()=>{const o=t.$$.on_mount.map(qt).filter(Je);t.$$.on_destroy?t.$$.on_destroy.push(...o):_e(o),t.$$.on_mount=[]}),r.forEach(Se)}function $(t,e){const n=t.$$;n.fragment!==null&&(pn(n.after_update),_e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),mn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ue(t,e,n,l,r,o,i=null,c=[-1]){const s=Ne;Pe(t);const f=t.$$={fragment:null,ctx:[],props:o,update:H,not_equal:r,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:lt(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};i&&i(f.root);let _=!1;if(f.ctx=n?n(t,e.props||{},(u,a,...C)=>{const b=C.length?C[0]:a;return f.ctx&&r(f.ctx[u],f.ctx[u]=b)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](b),_&&vn(t,u)),a}):[],f.update(),_=!0,_e(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){rn();const u=T(e.target);f.fragment&&f.fragment.l(u),u.forEach(h)}else f.fragment&&f.fragment.c();e.intro&&B(t.$$.fragment),Q(t,e.target,e.anchor),on(),Jt()}Pe(s)}class ae{constructor(){Ue(this,"$$");Ue(this,"$$set")}$destroy(){$(this,1),this.$destroy=H}$on(e,n){if(!Je(n))return H;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!ln(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bn);function rt(t){let e;function n(o,i){return o[1]?kn:wn}let l=n(t),r=l(t);return{c(){e=je("svg"),r.c(),this.h()},l(o){e=Ge(o,"svg",{class:!0});var i=T(e);r.l(i),i.forEach(h),this.h()},h(){g(e,"class","svelte-18d6l3w")},m(o,i){I(o,e,i),r.m(e,null)},p(o,i){l===(l=n(o))&&r?r.p(o,i):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null)))},d(o){o&&h(e),r.d()}}}function wn(t){let e,n;return{c(){e=je("polygon"),this.h()},l(l){e=Ge(l,"polygon",{points:!0,fill:!0}),T(e).forEach(h),this.h()},h(){g(e,"points",n="0,"+t[3]+" "+t[2]+","+t[3]+" "+t[2]/2+",0"),g(e,"fill",t[0])},m(l,r){I(l,e,r)},p(l,r){r&12&&n!==(n="0,"+l[3]+" "+l[2]+","+l[3]+" "+l[2]/2+",0")&&g(e,"points",n),r&1&&g(e,"fill",l[0])},d(l){l&&h(e)}}}function kn(t){let e,n;return{c(){e=je("polygon"),this.h()},l(l){e=Ge(l,"polygon",{points:!0,fill:!0}),T(e).forEach(h),this.h()},h(){g(e,"points",n="0,0 "+t[2]+",0 "+t[2]/2+","+t[3]),g(e,"fill",t[0])},m(l,r){I(l,e,r)},p(l,r){r&12&&n!==(n="0,0 "+l[2]+",0 "+l[2]/2+","+l[3])&&g(e,"points",n),r&1&&g(e,"fill",l[0])},d(l){l&&h(e)}}}function yn(t){let e,n,l=t[2]&&t[3]&&rt(t);return{c(){e=P("div"),l&&l.c(),this.h()},l(r){e=N(r,"DIV",{class:!0});var o=T(e);l&&l.l(o),o.forEach(h),this.h()},h(){g(e,"class","container svelte-18d6l3w"),Se(()=>t[4].call(e))},m(r,o){I(r,e,o),l&&l.m(e,null),n=dn(e,t[4].bind(e))},p(r,[o]){r[2]&&r[3]?l?l.p(r,o):(l=rt(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:H,o:H,d(r){r&&h(e),l&&l.d(),n()}}}function Dn(t,e,n){let{color:l}=e,{reversed:r=!1}=e,o,i;function c(){o=this.clientWidth,i=this.clientHeight,n(2,o),n(3,i)}return t.$$set=s=>{"color"in s&&n(0,l=s.color),"reversed"in s&&n(1,r=s.reversed)},[l,r,o,i,c]}class En extends ae{constructor(e){super(),ue(this,e,Dn,yn,se,{color:0,reversed:1})}}function Cn(t){let e,n,l,r,o;const i=t[15].default,c=jt(i,t,t[14],null);return{c(){e=P("div"),c&&c.c(),this.h()},l(s){e=N(s,"DIV",{id:!0,style:!0,class:!0});var f=T(e);c&&c.l(f),f.forEach(h),this.h()},h(){g(e,"id",t[2]),J(e,"transform","translate("+t[3]+"px, "+t[4]+"px)"),g(e,"class",n="draggable "+(t[1]&&"deactivated")+" "+(t[5]&&"moving")+" svelte-gvmcw0")},m(s,f){I(s,e,f),c&&c.m(e,null),t[16](e),l=!0,r||(o=[re(window,"mousemove",t[7]),re(window,"touchmove",t[7]),re(e,"mousedown",t[6]),re(e,"mouseup",t[8]),re(e,"touchstart",t[6]),re(e,"touchend",t[8],{passive:!0})],r=!0)},p(s,[f]){c&&c.p&&(!l||f&16384)&&Yt(c,i,s,s[14],l?Xt(i,s[14],f,null):Wt(s[14]),null),(!l||f&4)&&g(e,"id",s[2]),(!l||f&24)&&J(e,"transform","translate("+s[3]+"px, "+s[4]+"px)"),(!l||f&34&&n!==(n="draggable "+(s[1]&&"deactivated")+" "+(s[5]&&"moving")+" svelte-gvmcw0"))&&g(e,"class",n)},i(s){l||(B(c,s),l=!0)},o(s){q(c,s),l=!1},d(s){s&&h(e),c&&c.d(s),t[16](null),r=!1,_e(o)}}}function Pn(t,e,n){let{$$slots:l={},$$scope:r}=e;const o=Ft();let{maxDrag:i=[1/0,1/0]}=e,{resetAfterDrag:c=!1}=e,{deactivated:s=!1}=e,{invertX:f=!1}=e,{invertY:_=!1}=e,{el:u=null}=e,{id:a=null}=e,C=0,b=0,M=0,k=0,p=!1;function y(m){console.log(m,"onMouseDown"),!s&&(n(5,p=!0),o("dragstart"),m.touches&&(M=m.touches[0].screenX,k=m.touches[0].screenY))}function v(m){if(p&&!m.touches)n(3,C+=(f?-1:1)*m.movementX),n(4,b+=(_?-1:1)*m.movementY);else if(p&&m.touches){const G=m.touches[0];if(M!==0||k!==0){const F=G.screenX-M,ne=G.screenY-k;n(3,C+=(f?-1:1)*F),n(4,b+=(_?-1:1)*ne)}M=G.screenX,k=G.screenY,console.log(C,b),m.stopPropagation(),m.preventDefault()}i&&(C>i[0]||C<-i[0]||b>i[1]||b<-i[1])&&S()}function S(){n(5,p=!1),o("dragend"),c&&(n(3,C=0),n(4,b=0))}const X=()=>{n(3,C=0),n(4,b=0)};function Y(m){oe[m?"unshift":"push"](()=>{u=m,n(0,u)})}return t.$$set=m=>{"maxDrag"in m&&n(9,i=m.maxDrag),"resetAfterDrag"in m&&n(10,c=m.resetAfterDrag),"deactivated"in m&&n(1,s=m.deactivated),"invertX"in m&&n(11,f=m.invertX),"invertY"in m&&n(12,_=m.invertY),"el"in m&&n(0,u=m.el),"id"in m&&n(2,a=m.id),"$$scope"in m&&n(14,r=m.$$scope)},[u,s,a,C,b,p,y,v,S,i,c,f,_,X,r,l,Y]}class Gt extends ae{constructor(e){super(),ue(this,e,Pn,Cn,se,{maxDrag:9,resetAfterDrag:10,deactivated:1,invertX:11,invertY:12,el:0,id:2,reset:13})}get reset(){return this.$$.ctx[13]}}const we=[];function Te(t,e){return{subscribe:Kt(t,e).subscribe}}function Kt(t,e=H){let n;const l=new Set;function r(c){if(se(t,c)&&(t=c,n)){const s=!we.length;for(const f of l)f[1](),we.push(f,t);if(s){for(let f=0;f<we.length;f+=2)we[f][0](we[f+1]);we.length=0}}}function o(c){r(c(t))}function i(c,s=H){const f=[c,s];return l.add(f),l.size===1&&(n=e(r,o)||H),c(t),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:i}}function Le(t,e,n){const l=!Array.isArray(t),r=l?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Te(n,(i,c)=>{let s=!1;const f=[];let _=0,u=H;const a=()=>{if(_)return;u();const b=e(l?f[0]:f,i,c);o?i(b):u=Je(b)?b:H},C=r.map((b,M)=>zt(b,k=>{f[M]=k,_&=~(1<<M),s&&a()},()=>{_|=1<<M}));return s=!0,a(),function(){_e(C),u(),s=!1}})}const In="https://agricola.uber.space/backgammon/backend",xe=In,Nn=async(t="test")=>await(await fetch(`${xe}/${t}`)).json(),Tn=async(t="test")=>{const n=await(await fetch(`${xe}/${t}/roll`)).json(),l=n.throws[n.throws.length-1];return[l.dice1,l.dice2]},Vn=async(t="test",e)=>await(await fetch(`${xe}/${t}/moves`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text(),Xe=t=>new URL(window.location.href).searchParams.get(t),An=Te(!1,t=>{const e=Xe("debug");t(e==="true")}),Qt=Te(null,(t,e)=>{const n=Xe("user")||"white";t(n)}),Bn=Te(null,(t,e)=>{const n=Xe("game")||"test";t(n)}),Oe=Kt([]);let it=null;const Ve=Te(null,(t,e)=>{const n=Xe("game")||"test",l=setInterval(async()=>{const r=await Nn(n);JSON.stringify(r)!==it&&(t(r),it=JSON.stringify(r))},1e3);return()=>clearInterval(l)}),et=Le(Ve,t=>{var n;return t?(((n=t.moves[t.moves.length-1])==null?void 0:n.player)||"b")==="w"?"black":"white":null}),$t=Le(Ve,t=>{if(!t)return 1;const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?n.turn+1:(n==null?void 0:n.turn)||1}),Mn=Le(Ve,t=>{if(!t)return[null,null];const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?[null,null]:[(n==null?void 0:n.dice1)||null,(n==null?void 0:n.dice2)||null]}),xt=Le([et,Qt],([t,e])=>t===e);function ot(t){let e;return{c(){e=P("div"),this.h()},l(n){e=N(n,"DIV",{class:!0,style:!0}),T(e).forEach(h),this.h()},h(){g(e,"class","moved svelte-1oqyr8y"),J(e,"background-color",t[2]==="white"?"black":"white")},m(n,l){I(n,e,l)},p(n,l){l&4&&J(e,"background-color",n[2]==="white"?"black":"white")},d(n){n&&h(e)}}}function Sn(t){let e,n,l=t[3]&&ot(t);return{c(){e=P("div"),l&&l.c(),this.h()},l(r){e=N(r,"DIV",{class:!0,style:!0});var o=T(e);l&&l.l(o),o.forEach(h),this.h()},h(){g(e,"class",n="checker "+t[2]+" svelte-1oqyr8y"),J(e,"background-color",t[2]),J(e,"border",(t[3]?"2px":"1px")+" solid black")},m(r,o){I(r,e,o),l&&l.m(e,null)},p(r,o){r[3]?l?l.p(r,o):(l=ot(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null),o&4&&n!==(n="checker "+r[2]+" svelte-1oqyr8y")&&g(e,"class",n),o&4&&J(e,"background-color",r[2]),o&8&&J(e,"border",(r[3]?"2px":"1px")+" solid black")},d(r){r&&h(e),l&&l.d()}}}function On(t){let e,n,l,r;function o(s){t[11](s)}function i(s){t[12](s)}let c={id:t[1],deactivated:!t[0],$$slots:{default:[Sn]},$$scope:{ctx:t}};return t[4]!==void 0&&(c.el=t[4]),t[5]!==void 0&&(c.reset=t[5]),e=new Gt({props:c}),oe.push(()=>ve(e,"el",o)),oe.push(()=>ve(e,"reset",i)),e.$on("dragstart",t[6]),e.$on("dragend",t[7]),{c(){ee(e.$$.fragment)},l(s){te(e.$$.fragment,s)},m(s,f){Q(e,s,f),r=!0},p(s,[f]){const _={};f&2&&(_.id=s[1]),f&1&&(_.deactivated=!s[0]),f&65548&&(_.$$scope={dirty:f,ctx:s}),!n&&f&16&&(n=!0,_.el=s[4],ge(()=>n=!1)),!l&&f&32&&(l=!0,_.reset=s[5],ge(()=>l=!1)),e.$set(_)},i(s){r||(B(e.$$.fragment,s),r=!0)},o(s){q(e.$$.fragment,s),r=!1},d(s){$(e,s)}}}function qn(t,e,n){let l,r;K(t,xt,v=>n(9,l=v)),K(t,et,v=>n(10,r=v));let{id:o}=e,{position:i}=e,{color:c}=e,{hasBeenMoved:s}=e,{draggable:f=!1}=e;const _=Ft();let u,a,C=()=>{},b;Ke(()=>{a=document.querySelector(".moving-checker-cache")});const M=()=>{b=u.parentElement;const{left:v,top:S}=u.getBoundingClientRect();console.log("onDragStart",v,S,u),a.appendChild(u),n(4,u.style.position="absolute",u),n(4,u.style.left=`${v}px`,u),n(4,u.style.top=`${S}px`,u),a.style.pointerEvents="auto"},k=()=>{const{left:v,top:S,width:X,height:Y}=u.getBoundingClientRect(),m={x:v+X/2,y:S+Y/2};_("move",{checker_id:o,start:String(i),coordinates:m,reset:()=>b.appendChild(u)}),C(),a.style.pointerEvents="none",n(4,u.style.position="static",u)};function p(v){u=v,n(4,u)}function y(v){C=v,n(5,C)}return t.$$set=v=>{"id"in v&&n(1,o=v.id),"position"in v&&n(8,i=v.position),"color"in v&&n(2,c=v.color),"hasBeenMoved"in v&&n(3,s=v.hasBeenMoved),"draggable"in v&&n(0,f=v.draggable)},t.$$.update=()=>{t.$$.dirty&1540&&n(0,f=c===r&&l)},[f,o,c,s,u,C,M,k,i,l,r,p,y]}class tt extends ae{constructor(e){super(),ue(this,e,qn,On,se,{id:1,position:8,color:2,hasBeenMoved:3,draggable:0})}}function zn(t){let e,n="?";return{c(){e=P("span"),e.textContent=n,this.h()},l(l){e=N(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1p91mot"&&(e.textContent=n),this.h()},h(){g(e,"class","svelte-a1rwuv")},m(l,r){I(l,e,r)},p:H,d(l){l&&h(e)}}}function jn(t){let e=[1,3,5].includes(t[0]),n,l=[2,3,4,5,6].includes(t[0]),r,o=[4,5,6].includes(t[0]),i,c,s=e&&st(),f=l&&ct(),_=o&&ft(),u=t[0]===6&&ut();return{c(){s&&s.c(),n=j(),f&&f.c(),r=j(),_&&_.c(),i=j(),u&&u.c(),c=De()},l(a){s&&s.l(a),n=L(a),f&&f.l(a),r=L(a),_&&_.l(a),i=L(a),u&&u.l(a),c=De()},m(a,C){s&&s.m(a,C),I(a,n,C),f&&f.m(a,C),I(a,r,C),_&&_.m(a,C),I(a,i,C),u&&u.m(a,C),I(a,c,C)},p(a,C){C&1&&(e=[1,3,5].includes(a[0])),e?s||(s=st(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),C&1&&(l=[2,3,4,5,6].includes(a[0])),l?f||(f=ct(),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),C&1&&(o=[4,5,6].includes(a[0])),o?_||(_=ft(),_.c(),_.m(i.parentNode,i)):_&&(_.d(1),_=null),a[0]===6?u||(u=ut(),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(a){a&&(h(n),h(r),h(i),h(c)),s&&s.d(a),f&&f.d(a),_&&_.d(a),u&&u.d(a)}}}function st(t){let e;return{c(){e=P("div"),this.h()},l(n){e=N(n,"DIV",{class:!0}),T(e).forEach(h),this.h()},h(){g(e,"class","dot center svelte-a1rwuv")},m(n,l){I(n,e,l)},d(n){n&&h(e)}}}function ct(t){let e,n,l;return{c(){e=P("div"),n=j(),l=P("div"),this.h()},l(r){e=N(r,"DIV",{class:!0}),T(e).forEach(h),n=L(r),l=N(r,"DIV",{class:!0}),T(l).forEach(h),this.h()},h(){g(e,"class","dot top-left svelte-a1rwuv"),g(l,"class","dot bottom-right svelte-a1rwuv")},m(r,o){I(r,e,o),I(r,n,o),I(r,l,o)},d(r){r&&(h(e),h(n),h(l))}}}function ft(t){let e,n,l;return{c(){e=P("div"),n=j(),l=P("div"),this.h()},l(r){e=N(r,"DIV",{class:!0}),T(e).forEach(h),n=L(r),l=N(r,"DIV",{class:!0}),T(l).forEach(h),this.h()},h(){g(e,"class","dot top-right svelte-a1rwuv"),g(l,"class","dot bottom-left svelte-a1rwuv")},m(r,o){I(r,e,o),I(r,n,o),I(r,l,o)},d(r){r&&(h(e),h(n),h(l))}}}function ut(t){let e,n,l;return{c(){e=P("div"),n=j(),l=P("div"),this.h()},l(r){e=N(r,"DIV",{class:!0}),T(e).forEach(h),n=L(r),l=N(r,"DIV",{class:!0}),T(l).forEach(h),this.h()},h(){g(e,"class","dot center-left svelte-a1rwuv"),g(l,"class","dot center-right svelte-a1rwuv")},m(r,o){I(r,e,o),I(r,n,o),I(r,l,o)},d(r){r&&(h(e),h(n),h(l))}}}function Ln(t){let e;function n(o,i){return o[0]?jn:zn}let l=n(t),r=l(t);return{c(){e=P("div"),r.c(),this.h()},l(o){e=N(o,"DIV",{class:!0});var i=T(e);r.l(i),i.forEach(h),this.h()},h(){g(e,"class","dice svelte-a1rwuv")},m(o,i){I(o,e,i),r.m(e,null)},p(o,[i]){l===(l=n(o))&&r?r.p(o,i):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null)))},i:H,o:H,d(o){o&&h(e),r.d()}}}function Xn(t,e,n){let{number:l}=e;return t.$$set=r=>{"number"in r&&n(0,l=r.number)},[l]}class at extends ae{constructor(e){super(),ue(this,e,Xn,Ln,se,{number:0})}}const Fe=[{position:0,color:"white",id:"0-0"},{position:0,color:"white",id:"0-1"},{position:5,color:"black",id:"5-0"},{position:5,color:"black",id:"5-1"},{position:5,color:"black",id:"5-2"},{position:5,color:"black",id:"5-3"},{position:5,color:"black",id:"5-4"},{position:7,color:"black",id:"7-0"},{position:7,color:"black",id:"7-1"},{position:7,color:"black",id:"7-2"},{position:11,color:"white",id:"11-0"},{position:11,color:"white",id:"11-1"},{position:11,color:"white",id:"11-2"},{position:11,color:"white",id:"11-3"},{position:11,color:"white",id:"11-4"},{position:12,color:"black",id:"12-0"},{position:12,color:"black",id:"12-1"},{position:12,color:"black",id:"12-2"},{position:12,color:"black",id:"12-3"},{position:12,color:"black",id:"12-4"},{position:16,color:"white",id:"16-0"},{position:16,color:"white",id:"16-1"},{position:16,color:"white",id:"16-2"},{position:18,color:"white",id:"18-0"},{position:18,color:"white",id:"18-1"},{position:18,color:"white",id:"18-2"},{position:18,color:"white",id:"18-3"},{position:18,color:"white",id:"18-4"},{position:23,color:"black",id:"23-0"},{position:23,color:"black",id:"23-1"}];function dt(t,e,n){const l=t.slice();return l[12]=e[n],l[14]=n,l}function ht(t){let e,n,l,r;function o(){return t[9](t[14])}return{c(){e=P("div"),this.h()},l(i){e=N(i,"DIV",{class:!0}),T(e).forEach(h),this.h()},h(){g(e,"class",n="info "+t[12].player+" svelte-u4d6th")},m(i,c){I(i,e,c),l||(r=[re(e,"mouseenter",o),re(e,"mouseout",t[10])],l=!0)},p(i,c){t=i,c&1&&n!==(n="info "+t[12].player+" svelte-u4d6th")&&g(e,"class",n)},d(i){i&&h(e),l=!1,_e(r)}}}function Yn(t){let e,n=Z(t[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=ht(dt(t,n,r));return{c(){e=P("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=N(r,"DIV",{class:!0});var o=T(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(h),this.h()},h(){g(e,"class","container svelte-u4d6th")},m(r,o){I(r,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(r,[o]){if(o&7){n=Z(r[0]);let i;for(i=0;i<n.length;i+=1){const c=dt(r,n,i);l[i]?l[i].p(c,o):(l[i]=ht(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},i:H,o:H,d(r){r&&h(e),fe(l,r)}}}function Wn(t,e,n){let l,r;K(t,Ve,b=>n(7,l=b)),K(t,$t,b=>n(8,r=b));let{forcedCheckerPositions:o}=e,{forcedPlayer:i}=e,{forcedTurn:c}=e,{forcedDices:s}=e,f=[];const _=b=>{const{state:M,moves:k,throw:p,player:y}=f[b];n(4,i=y),n(5,c=b+1),n(6,s=[p.dice1,p.dice2]),n(3,o=M.reduce((v,S)=>{v[S.position]=v[S.position]||[];const X=k.find(Y=>Y.checker_id===S.id);return X?(v[X.end]=v[X.end]||[],v[X.end].push({id:S.id,color:S.color,hasBeenMoved:!0})):v[S.position].push({id:S.id,color:S.color}),v},{}))},u=()=>{n(3,o=null),n(4,i=null),n(5,c=null),n(6,s=null)},a=b=>_(b),C=()=>u();return t.$$set=b=>{"forcedCheckerPositions"in b&&n(3,o=b.forcedCheckerPositions),"forcedPlayer"in b&&n(4,i=b.forcedPlayer),"forcedTurn"in b&&n(5,c=b.forcedTurn),"forcedDices"in b&&n(6,s=b.forcedDices)},t.$$.update=()=>{t.$$.dirty&384&&n(0,f=Array.from({length:r-1},(b,M)=>{const k=l.moves.filter(y=>y.turn<M+1);return{state:Fe.map(y=>{const v=k.reverse().find(S=>S.checker_id===y.id);return v?{...y,position:v.end}:y}),moves:l.moves.filter(y=>y.turn===M+1),throw:l.throws.find(y=>y.turn===M+1),player:M%2===0?"white":"black"}}))},[f,_,u,o,i,c,s,l,r,a,C]}class Un extends ae{constructor(e){super(),ue(this,e,Wn,Yn,se,{forcedCheckerPositions:3,forcedPlayer:4,forcedTurn:5,forcedDices:6})}}function _t(t){let e,n="Zieh die Würfel mit der Maus,<br/>um zu würfeln";return{c(){e=P("span"),e.innerHTML=n,this.h()},l(l){e=N(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-z01ytv"&&(e.innerHTML=n),this.h()},h(){g(e,"class","svelte-ql81fn")},m(l,r){I(l,e,r)},d(l){l&&h(e)}}}function Zn(t){let e,n,l,r,o;return n=new at({props:{number:t[4][0]}}),r=new at({props:{number:t[4][1]}}),{c(){e=P("div"),ee(n.$$.fragment),l=j(),ee(r.$$.fragment),this.h()},l(i){e=N(i,"DIV",{class:!0});var c=T(e);te(n.$$.fragment,c),l=L(c),te(r.$$.fragment,c),c.forEach(h),this.h()},h(){g(e,"class","dices svelte-ql81fn")},m(i,c){I(i,e,c),Q(n,e,null),V(e,l),Q(r,e,null),o=!0},p(i,c){const s={};c&16&&(s.number=i[4][0]),n.$set(s);const f={};c&16&&(f.number=i[4][1]),r.$set(f)},i(i){o||(B(n.$$.fragment,i),B(r.$$.fragment,i),o=!0)},o(i){q(n.$$.fragment,i),q(r.$$.fragment,i),o=!1},d(i){i&&h(e),$(n),$(r)}}}function mt(t){let e,n,l="Zug beenden",r,o;return{c(){e=P("div"),n=P("button"),n.textContent=l,this.h()},l(i){e=N(i,"DIV",{class:!0});var c=T(e);n=N(c,"BUTTON",{"data-svelte-h":!0}),Ie(n)!=="svelte-1gt0av7"&&(n.textContent=l),c.forEach(h),this.h()},h(){g(e,"class","actions svelte-ql81fn")},m(i,c){I(i,e,c),V(e,n),r||(o=re(n,"click",t[10]),r=!0)},p:H,d(i){i&&h(e),r=!1,o()}}}function Hn(t){let e,n,l,r,o=t[7]==="white"?"Weiß":"Schwarz",i,c,s=t[5]?"war":"ist",f,_,u,a,C,b,M,k,p,y,v,S,X,Y,m,G,F,ne,z;function Ye(D){t[14](D)}function Ee(D){t[15](D)}function W(D){t[16](D)}function We(D){t[17](D)}let x={};t[0]!==void 0&&(x.forcedCheckerPositions=t[0]),t[2]!==void 0&&(x.forcedPlayer=t[2]),t[1]!==void 0&&(x.forcedTurn=t[1]),t[3]!==void 0&&(x.forcedDices=t[3]),p=new Un({props:x}),oe.push(()=>ve(p,"forcedCheckerPositions",Ye)),oe.push(()=>ve(p,"forcedPlayer",Ee)),oe.push(()=>ve(p,"forcedTurn",W)),oe.push(()=>ve(p,"forcedDices",We));let A=!t[4][0]&&!t[4][1]&&t[8]&&_t();F=new Gt({props:{maxDrag:[150,150],resetAfterDrag:!0,deactivated:t[4][0]||!t[8],$$slots:{default:[Zn]},$$scope:{ctx:t}}}),F.$on("dragend",t[9]);let U=t[4][0]&&t[4][1]&&t[8]&&mt(t);return{c(){e=P("div"),n=P("div"),l=P("div"),r=P("p"),i=ie(o),c=j(),f=ie(s),_=ie(" am Zug"),u=j(),a=P("p"),C=ie("Zug "),b=ie(t[6]),k=j(),ee(p.$$.fragment),Y=j(),m=P("div"),A&&A.c(),G=j(),ee(F.$$.fragment),ne=j(),U&&U.c(),this.h()},l(D){e=N(D,"DIV",{class:!0});var d=T(e);n=N(d,"DIV",{class:!0});var w=T(n);l=N(w,"DIV",{class:!0});var O=T(l);r=N(O,"P",{class:!0});var E=T(r);i=ce(E,o),c=L(E),f=ce(E,s),_=ce(E," am Zug"),E.forEach(h),u=L(O),a=N(O,"P",{class:!0});var R=T(a);C=ce(R,"Zug "),b=ce(R,t[6]),R.forEach(h),O.forEach(h),k=L(w),te(p.$$.fragment,w),w.forEach(h),Y=L(d),m=N(d,"DIV",{class:!0});var me=T(m);A&&A.l(me),G=L(me),te(F.$$.fragment,me),me.forEach(h),ne=L(d),U&&U.l(d),d.forEach(h),this.h()},h(){g(r,"class","player svelte-ql81fn"),g(a,"class","turn svelte-ql81fn"),g(l,"class",M="info "+t[7]+" svelte-ql81fn"),g(n,"class","header svelte-ql81fn"),g(m,"class","dice-container svelte-ql81fn"),g(e,"class","container svelte-ql81fn")},m(D,d){I(D,e,d),V(e,n),V(n,l),V(l,r),V(r,i),V(r,c),V(r,f),V(r,_),V(l,u),V(l,a),V(a,C),V(a,b),V(n,k),Q(p,n,null),V(e,Y),V(e,m),A&&A.m(m,null),V(m,G),Q(F,m,null),V(e,ne),U&&U.m(e,null),z=!0},p(D,[d]){(!z||d&128)&&o!==(o=D[7]==="white"?"Weiß":"Schwarz")&&Ce(i,o),(!z||d&32)&&s!==(s=D[5]?"war":"ist")&&Ce(f,s),(!z||d&64)&&Ce(b,D[6]),(!z||d&128&&M!==(M="info "+D[7]+" svelte-ql81fn"))&&g(l,"class",M);const w={};!y&&d&1&&(y=!0,w.forcedCheckerPositions=D[0],ge(()=>y=!1)),!v&&d&4&&(v=!0,w.forcedPlayer=D[2],ge(()=>v=!1)),!S&&d&2&&(S=!0,w.forcedTurn=D[1],ge(()=>S=!1)),!X&&d&8&&(X=!0,w.forcedDices=D[3],ge(()=>X=!1)),p.$set(w),!D[4][0]&&!D[4][1]&&D[8]?A||(A=_t(),A.c(),A.m(m,G)):A&&(A.d(1),A=null);const O={};d&272&&(O.deactivated=D[4][0]||!D[8]),d&1048592&&(O.$$scope={dirty:d,ctx:D}),F.$set(O),D[4][0]&&D[4][1]&&D[8]?U?U.p(D,d):(U=mt(D),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},i(D){z||(B(p.$$.fragment,D),B(F.$$.fragment,D),z=!0)},o(D){q(p.$$.fragment,D),q(F.$$.fragment,D),z=!1},d(D){D&&h(e),$(p),A&&A.d(),$(F),U&&U.d()}}}function Rn(t,e,n){let l,r,o,i,c,s,f,_,u;K(t,Oe,m=>n(18,i=m)),K(t,Bn,m=>n(19,c=m)),K(t,Mn,m=>n(11,s=m)),K(t,$t,m=>n(12,f=m)),K(t,et,m=>n(13,_=m)),K(t,xt,m=>n(8,u=m));let{forcedCheckerPositions:a}=e,C,b,M,k=s;const p=async()=>{n(4,k=await Tn(c))},y=async()=>{await Vn(c,Object.values(i)),Ut(Oe,i={},i)};function v(m){a=m,n(0,a)}function S(m){b=m,n(2,b)}function X(m){C=m,n(1,C)}function Y(m){M=m,n(3,M)}return t.$$set=m=>{"forcedCheckerPositions"in m&&n(0,a=m.forcedCheckerPositions)},t.$$.update=()=>{t.$$.dirty&8196&&n(7,l=b||_),t.$$.dirty&4098&&n(6,r=C||f),t.$$.dirty&6&&n(5,o=b&&C),t.$$.dirty&2072&&(n(4,k=M||s),console.log(k,M))},[a,C,b,M,k,o,r,l,u,p,y,s,f,_,v,S,X,Y]}class Fn extends ae{constructor(e){super(),ue(this,e,Rn,Hn,se,{forcedCheckerPositions:0})}}function gt(t){let e,n,l=t[3]-1+"",r;return{c(){e=P("span"),n=ie("+"),r=ie(l),this.h()},l(o){e=N(o,"SPAN",{class:!0});var i=T(e);n=ce(i,"+"),r=ce(i,l),i.forEach(h),this.h()},h(){g(e,"class","bottom-info svelte-1v6urwz")},m(o,i){I(o,e,i),V(e,n),V(e,r)},p(o,i){i&8&&l!==(l=o[3]-1+"")&&Ce(r,l)},d(o){o&&h(e)}}}function Jn(t){let e,n,l,r,o,i,c;const s=t[6].default,f=jt(s,t,t[5],null);let _=t[3]>1&&gt(t);return{c(){e=P("div"),n=P("span"),r=j(),f&&f.c(),o=j(),_&&_.c(),this.h()},l(u){e=N(u,"DIV",{class:!0,"data-position":!0});var a=T(e);n=N(a,"SPAN",{class:!0}),T(n).forEach(h),r=L(a),f&&f.l(a),o=L(a),_&&_.l(a),a.forEach(h),this.h()},h(){g(n,"class",l="label "+t[1]+" svelte-1v6urwz"),g(e,"class",i=t[1]+" checkerContainer "+t[2]+" box svelte-1v6urwz"),g(e,"data-position",t[0])},m(u,a){I(u,e,a),V(e,n),V(e,r),f&&f.m(e,null),V(e,o),_&&_.m(e,null),t[7](e),c=!0},p(u,[a]){(!c||a&2&&l!==(l="label "+u[1]+" svelte-1v6urwz"))&&g(n,"class",l),f&&f.p&&(!c||a&32)&&Yt(f,s,u,u[5],c?Xt(s,u[5],a,null):Wt(u[5]),null),u[3]>1?_?_.p(u,a):(_=gt(u),_.c(),_.m(e,null)):_&&(_.d(1),_=null),(!c||a&6&&i!==(i=u[1]+" checkerContainer "+u[2]+" box svelte-1v6urwz"))&&g(e,"class",i),(!c||a&1)&&g(e,"data-position",u[0])},i(u){c||(B(f,u),c=!0)},o(u){q(f,u),c=!1},d(u){u&&h(e),f&&f.d(u),_&&_.d(),t[7](null)}}}function Gn(t,e,n){let{$$slots:l={},$$scope:r}=e,{position:o}=e,{color:i}=e,{type:c}=e,s,f;const _=new MutationObserver(()=>{n(3,s=f.querySelectorAll(".draggable").length)});Ke(()=>{_.observe(f,{childList:!0})});function u(a){oe[a?"unshift":"push"](()=>{f=a,n(4,f)})}return t.$$set=a=>{"position"in a&&n(0,o=a.position),"color"in a&&n(1,i=a.color),"type"in a&&n(2,c=a.type),"$$scope"in a&&n(5,r=a.$$scope)},[o,i,c,s,f,r,l,u]}class en extends ae{constructor(e){super(),ue(this,e,Gn,Jn,se,{position:0,color:1,type:2})}}const pt=t=>t==="hit-area-white"||t==="out-area-black"?-1:t==="hit-area-black"||t==="out-area-white"?24:parseInt(t),Kn=({dices:t,usedDices:e,currentMove:n})=>{console.log(t,e,n);const r=(t[0]===t[1]?[t[0],t[0],t[0],t[0]]:t).filter(c=>{const s=e.indexOf(c);return s!==-1&&e.splice(s,1),s===-1});if(r.length===0)return;const o=Math.abs(pt(n.end)-pt(n.start));return r.find(c=>c===o)};function vt(t,e,n){const l=t.slice();return l[13]=e[n].x,l[14]=e[n].y,l[15]=e[n].id,l[17]=n,l}function bt(t,e,n){const l=t.slice();return l[18]=e[n],l[20]=n,l}function wt(t,e,n){const l=t.slice();return l[18]=e[n],l[17]=n,l}function kt(t,e,n){const l=t.slice();return l[22]=e[n],l}function yt(t,e,n){const l=t.slice();return l[25]=e[n],l[17]=n,l}function Dt(t,e,n){const l=t.slice();return l[22]=e[n],l}function Et(t,e,n){const l=t.slice();return l[25]=e[n],l[17]=n,l}function Ct(t,e,n){const l=t.slice();return l[22]=e[n],l}function Pt(t){let e,n;const l=[t[22],{position:`hit-area-${t[25]}`}];let r={};for(let o=0;o<l.length;o+=1)r=qe(r,l[o]);return e=new tt({props:r}),e.$on("move",t[5]),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,i){Q(e,o,i),n=!0},p(o,i){const c=i[0]&4?Qe(l,[$e(o[22]),l[1]]):{};e.$set(c)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){q(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Qn(t){let e,n,l=Z(t[2][`hit-area-${t[25]}`]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=Pt(Ct(t,l,i));const o=i=>q(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=j()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=L(i)},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);I(i,e,c),n=!0},p(i,c){if(c[0]&36){l=Z(i[2][`hit-area-${i[25]}`]||[]);let s;for(s=0;s<l.length;s+=1){const f=Ct(i,l,s);r[s]?(r[s].p(f,c),B(r[s],1)):(r[s]=Pt(f),r[s].c(),B(r[s],1),r[s].m(e.parentNode,e))}for(de(),s=l.length;s<r.length;s+=1)o(s);he()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)q(r[c]);n=!1},d(i){i&&h(e),fe(r,i)}}}function It(t){let e,n;return e=new en({props:{position:`hit-area-${t[25]}`,color:t[25],type:"hit",$$slots:{default:[Qn]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,r){Q(e,l,r),n=!0},p(l,r){const o={};r[0]&4|r[1]&2&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){q(e.$$.fragment,l),n=!1},d(l){$(e,l)}}}function Nt(t){let e,n;const l=[t[22],{position:`out-area-${t[25]}`}];let r={};for(let o=0;o<l.length;o+=1)r=qe(r,l[o]);return e=new tt({props:r}),e.$on("move",t[5]),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,i){Q(e,o,i),n=!0},p(o,i){const c=i[0]&4?Qe(l,[$e(o[22]),l[1]]):{};e.$set(c)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){q(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function $n(t){let e,n,l=Z(t[2][`out-area-${t[25]}`]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=Nt(Dt(t,l,i));const o=i=>q(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=j()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=L(i)},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);I(i,e,c),n=!0},p(i,c){if(c[0]&36){l=Z(i[2][`out-area-${i[25]}`]||[]);let s;for(s=0;s<l.length;s+=1){const f=Dt(i,l,s);r[s]?(r[s].p(f,c),B(r[s],1)):(r[s]=Nt(f),r[s].c(),B(r[s],1),r[s].m(e.parentNode,e))}for(de(),s=l.length;s<r.length;s+=1)o(s);he()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)q(r[c]);n=!1},d(i){i&&h(e),fe(r,i)}}}function Tt(t){let e,n;return e=new en({props:{position:`out-area-${t[25]}`,color:t[25],type:"out",$$slots:{default:[$n]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,r){Q(e,l,r),n=!0},p(l,r){const o={};r[0]&4|r[1]&2&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){q(e.$$.fragment,l),n=!1},d(l){$(e,l)}}}function Vt(t){let e,n,l=Z(t[2][t[17]+t[20]*12]),r=[];for(let i=0;i<l.length;i+=1)r[i]=At(kt(t,l,i));const o=i=>q(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=De()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=De()},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);I(i,e,c),n=!0},p(i,c){if(c[0]&36){l=Z(i[2][i[17]+i[20]*12]);let s;for(s=0;s<l.length;s+=1){const f=kt(i,l,s);r[s]?(r[s].p(f,c),B(r[s],1)):(r[s]=At(f),r[s].c(),B(r[s],1),r[s].m(e.parentNode,e))}for(de(),s=l.length;s<r.length;s+=1)o(s);he()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)q(r[c]);n=!1},d(i){i&&h(e),fe(r,i)}}}function At(t){let e,n;const l=[t[22],{position:t[17]+t[20]*12}];let r={};for(let o=0;o<l.length;o+=1)r=qe(r,l[o]);return e=new tt({props:r}),e.$on("move",t[5]),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,i){Q(e,o,i),n=!0},p(o,i){const c=i[0]&4?Qe(l,[$e(o[22]),l[1]]):{};e.$set(c)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){q(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Bt(t){let e,n,l,r,o;n=new En({props:{color:t[17]%2===0?"darkgrey":"grey",reversed:t[20]===0}});let i=t[2][t[17]+t[20]*12]&&Vt(t);return{c(){e=P("div"),ee(n.$$.fragment),l=j(),r=P("div"),i&&i.c(),this.h()},l(c){e=N(c,"DIV",{class:!0,style:!0});var s=T(e);te(n.$$.fragment,s),l=L(s),r=N(s,"DIV",{class:!0,"data-position":!0});var f=T(r);i&&i.l(f),f.forEach(h),s.forEach(h),this.h()},h(){g(r,"class","checkerContainer "+(t[20]===1&&"reversed")+" svelte-1mhnvbw"),g(r,"data-position",t[17]+t[20]*12),g(e,"class","triangle root-triangle svelte-1mhnvbw"),J(e,"width",100/12+"%")},m(c,s){I(c,e,s),Q(n,e,null),V(e,l),V(e,r),i&&i.m(r,null),o=!0},p(c,s){c[2][c[17]+c[20]*12]?i?(i.p(c,s),s[0]&4&&B(i,1)):(i=Vt(c),i.c(),B(i,1),i.m(r,null)):i&&(de(),q(i,1,1,()=>{i=null}),he())},i(c){o||(B(n.$$.fragment,c),B(i),o=!0)},o(c){q(n.$$.fragment,c),q(i),o=!1},d(c){c&&h(e),$(n),i&&i.d()}}}function Mt(t){let e,n,l,r=Z(Array.from({length:12})),o=[];for(let c=0;c<r.length;c+=1)o[c]=Bt(wt(t,r,c));const i=c=>q(o[c],1,1,()=>{o[c]=null});return{c(){e=P("div");for(let c=0;c<o.length;c+=1)o[c].c();n=j(),this.h()},l(c){e=N(c,"DIV",{class:!0});var s=T(e);for(let f=0;f<o.length;f+=1)o[f].l(s);n=L(s),s.forEach(h),this.h()},h(){g(e,"class","side "+(t[20]===0?"upper":"lower")+" svelte-1mhnvbw")},m(c,s){I(c,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);V(e,n),l=!0},p(c,s){if(s[0]&36){r=Z(Array.from({length:12}));let f;for(f=0;f<r.length;f+=1){const _=wt(c,r,f);o[f]?(o[f].p(_,s),B(o[f],1)):(o[f]=Bt(_),o[f].c(),B(o[f],1),o[f].m(e,n))}for(de(),f=r.length;f<o.length;f+=1)i(f);he()}},i(c){if(!l){for(let s=0;s<r.length;s+=1)B(o[s]);l=!0}},o(c){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)q(o[s]);l=!1},d(c){c&&h(e),fe(o,c)}}}function St(t){let e,n=Z(t[1]),l=[];for(let r=0;r<n.length;r+=1)l[r]=Ot(vt(t,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=De()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=De()},m(r,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(r,o);I(r,e,o)},p(r,o){if(o[0]&2){n=Z(r[1]);let i;for(i=0;i<n.length;i+=1){const c=vt(r,n,i);l[i]?l[i].p(c,o):(l[i]=Ot(c),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(r){r&&h(e),fe(l,r)}}}function Ot(t){let e,n=t[15]+"",l,r;return{c(){e=P("div"),l=ie(n),r=j(),this.h()},l(o){e=N(o,"DIV",{class:!0,style:!0});var i=T(e);l=ce(i,n),r=L(i),i.forEach(h),this.h()},h(){g(e,"class","marker svelte-1mhnvbw"),J(e,"position","fixed"),J(e,"top",t[14]+"px"),J(e,"left",t[13]+"px"),J(e,"color","white"),J(e,"pointer-events","none")},m(o,i){I(o,e,i),V(e,l),V(e,r)},p(o,i){i[0]&2&&n!==(n=o[15]+"")&&Ce(l,n),i[0]&2&&J(e,"top",o[14]+"px"),i[0]&2&&J(e,"left",o[13]+"px")},d(o){o&&h(e)}}}function xn(t){let e,n,l,r,o,i,c="Geschlagen",s,f,_,u,a,C="Im Ziel",b,M,k,p,y,v,S,X,Y,m;function G(d){t[8](d)}let F={};t[0]!==void 0&&(F.forcedCheckerPositions=t[0]),n=new Fn({props:F}),oe.push(()=>ve(n,"forcedCheckerPositions",G));let ne=Z(["white","black"]),z=[];for(let d=0;d<2;d+=1)z[d]=It(Et(t,ne,d));const Ye=d=>q(z[d],1,1,()=>{z[d]=null});let Ee=Z(["white","black"]),W=[];for(let d=0;d<2;d+=1)W[d]=Tt(yt(t,Ee,d));const We=d=>q(W[d],1,1,()=>{W[d]=null});let x=Z(Array.from({length:2})),A=[];for(let d=0;d<x.length;d+=1)A[d]=Mt(bt(t,x,d));const U=d=>q(A[d],1,1,()=>{A[d]=null});let D=t[1]&&t[4]&&St(t);return{c(){e=P("div"),ee(n.$$.fragment),r=j(),o=P("div"),i=P("span"),i.textContent=c,s=j(),f=P("div");for(let d=0;d<2;d+=1)z[d].c();_=j(),u=P("div"),a=P("span"),a.textContent=C,b=j(),M=P("div");for(let d=0;d<2;d+=1)W[d].c();k=j(),p=P("div"),y=P("div");for(let d=0;d<A.length;d+=1)A[d].c();S=j(),D&&D.c(),X=j(),Y=P("div"),this.h()},l(d){e=N(d,"DIV",{class:!0});var w=T(e);te(n.$$.fragment,w),r=L(w),o=N(w,"DIV",{class:!0});var O=T(o);i=N(O,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(i)!=="svelte-1ko309i"&&(i.textContent=c),s=L(O),f=N(O,"DIV",{class:!0});var E=T(f);for(let le=0;le<2;le+=1)z[le].l(E);E.forEach(h),O.forEach(h),_=L(w),u=N(w,"DIV",{class:!0});var R=T(u);a=N(R,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(a)!=="svelte-15oige1"&&(a.textContent=C),b=L(R),M=N(R,"DIV",{class:!0});var me=T(M);for(let le=0;le<2;le+=1)W[le].l(me);me.forEach(h),R.forEach(h),w.forEach(h),k=L(d),p=N(d,"DIV",{class:!0});var Ae=T(p);y=N(Ae,"DIV",{class:!0});var nt=T(y);for(let le=0;le<A.length;le+=1)A[le].l(nt);nt.forEach(h),S=L(Ae),D&&D.l(Ae),Ae.forEach(h),X=L(d),Y=N(d,"DIV",{class:!0}),T(Y).forEach(h),this.h()},h(){g(i,"class","label svelte-1mhnvbw"),g(f,"class","boxes svelte-1mhnvbw"),g(o,"class","hit-area svelte-1mhnvbw"),g(a,"class","label svelte-1mhnvbw"),g(M,"class","boxes svelte-1mhnvbw"),g(u,"class","out-area svelte-1mhnvbw"),g(e,"class","side-area svelte-1mhnvbw"),g(y,"class",v="board "+t[3]+" svelte-1mhnvbw"),g(p,"class","main-area svelte-1mhnvbw"),g(Y,"class","moving-checker-cache svelte-1mhnvbw")},m(d,w){I(d,e,w),Q(n,e,null),V(e,r),V(e,o),V(o,i),V(o,s),V(o,f);for(let O=0;O<2;O+=1)z[O]&&z[O].m(f,null);V(e,_),V(e,u),V(u,a),V(u,b),V(u,M);for(let O=0;O<2;O+=1)W[O]&&W[O].m(M,null);I(d,k,w),I(d,p,w),V(p,y);for(let O=0;O<A.length;O+=1)A[O]&&A[O].m(y,null);V(p,S),D&&D.m(p,null),I(d,X,w),I(d,Y,w),m=!0},p(d,w){const O={};if(!l&&w[0]&1&&(l=!0,O.forcedCheckerPositions=d[0],ge(()=>l=!1)),n.$set(O),w[0]&36){ne=Z(["white","black"]);let E;for(E=0;E<2;E+=1){const R=Et(d,ne,E);z[E]?(z[E].p(R,w),B(z[E],1)):(z[E]=It(R),z[E].c(),B(z[E],1),z[E].m(f,null))}for(de(),E=2;E<2;E+=1)Ye(E);he()}if(w[0]&36){Ee=Z(["white","black"]);let E;for(E=0;E<2;E+=1){const R=yt(d,Ee,E);W[E]?(W[E].p(R,w),B(W[E],1)):(W[E]=Tt(R),W[E].c(),B(W[E],1),W[E].m(M,null))}for(de(),E=2;E<2;E+=1)We(E);he()}if(w[0]&36){x=Z(Array.from({length:2}));let E;for(E=0;E<x.length;E+=1){const R=bt(d,x,E);A[E]?(A[E].p(R,w),B(A[E],1)):(A[E]=Mt(R),A[E].c(),B(A[E],1),A[E].m(y,null))}for(de(),E=x.length;E<A.length;E+=1)U(E);he()}(!m||w[0]&8&&v!==(v="board "+d[3]+" svelte-1mhnvbw"))&&g(y,"class",v),d[1]&&d[4]?D?D.p(d,w):(D=St(d),D.c(),D.m(p,null)):D&&(D.d(1),D=null)},i(d){if(!m){B(n.$$.fragment,d);for(let w=0;w<2;w+=1)B(z[w]);for(let w=0;w<2;w+=1)B(W[w]);for(let w=0;w<x.length;w+=1)B(A[w]);m=!0}},o(d){q(n.$$.fragment,d),z=z.filter(Boolean);for(let w=0;w<2;w+=1)q(z[w]);W=W.filter(Boolean);for(let w=0;w<2;w+=1)q(W[w]);A=A.filter(Boolean);for(let w=0;w<A.length;w+=1)q(A[w]);m=!1},d(d){d&&(h(e),h(k),h(p),h(X),h(Y)),$(n),fe(z,d),fe(W,d),fe(A,d),D&&D.d()}}}function el(t,e,n){let l,r,o,i,c,s;K(t,Oe,k=>n(9,o=k)),K(t,Ve,k=>n(7,i=k)),K(t,Qt,k=>n(3,c=k)),K(t,An,k=>n(4,s=k));let f=Fe.reduce((k,p)=>(k[p.position]||(k[p.position]=[]),k[p.position].push({id:p.id,color:p.color}),k),{});const _=Fe.reduce((k,p)=>(k[p.id]={id:p.id,color:p.color},k),{}),u=(k,p,y)=>{const v=_[k];if(n(6,f[p]=f[p].filter(S=>S.id!==v.id),f),f[y]||n(6,f[y]=[],f),!f[y].length){f[y].push(v);return}if(f[y][0].color===v.color){f[y].push(v);return}if(f[y].length===1){u(f[y][0].id,y,`hit-area-${f[y][0].color}`),f[y].push(v);return}};let a;Ke(()=>{n(1,a=[...document.querySelectorAll(".checkerContainer")].map(k=>{const{left:p,top:y,width:v,height:S}=k.getBoundingClientRect();return{x:p+v/2,y:y+S/2,id:k.dataset.position}}))});const C=({x:k,y:p})=>a.reduce((v,S)=>{const X=Math.sqrt(Math.pow(k-S.x,2)+Math.pow(p-S.y,2));return X<v.distance?{distance:X,...S}:v},{distance:1/0,id:null}).id,b=k=>{const{checker_id:p,start:y,coordinates:v,reset:S}=k.detail,X=_[p],Y=C(v),m=i.throws[i.throws.length-1],G=Kn({dices:[m.dice1,m.dice2],usedDices:o.map(ne=>ne.usedDice),currentMove:{start:y,end:Y}});if(!G||y===Y||!y.includes("hit")&&!y.includes("out")&&X.color==="white"&&Number(y)>Number(Y)||!y.includes("hit")&&!y.includes("out")&&X.color==="black"&&Number(y)<Number(Y)){S();return}const F={checker_id:p,start:y,end:Y,usedDice:G};Ut(Oe,o=[...o,F],o),u(p,y,Y)};function M(k){l=k,n(0,l)}return t.$$.update=()=>{if(t.$$.dirty[0]&128){const{moves:k}=i||{};if(k)for(const p of k)u(p.checker_id,p.start,p.end)}t.$$.dirty[0]&65&&n(2,r=l||f)},n(0,l=null),[l,a,r,c,s,b,f,i,M]}class tl extends ae{constructor(e){super(),ue(this,e,el,xn,se,{},null,[-1,-1])}}function nl(t){let e,n,l;return n=new tl({}),{c(){e=P("div"),ee(n.$$.fragment),this.h()},l(r){e=N(r,"DIV",{class:!0});var o=T(e);te(n.$$.fragment,o),o.forEach(h),this.h()},h(){g(e,"class","game svelte-ze3agv")},m(r,o){I(r,e,o),Q(n,e,null),l=!0},p:H,i(r){l||(B(n.$$.fragment,r),l=!0)},o(r){q(n.$$.fragment,r),l=!1},d(r){r&&h(e),$(n)}}}class ll extends ae{constructor(e){super(),ue(this,e,null,nl,se,{})}}new ll({target:document.getElementById("app")});

var Gt=Object.defineProperty;var Kt=(t,e,n)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var We=(t,e,n)=>Kt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Z(){}function Oe(t,e){for(const n in e)t[n]=e[n];return t}function Tt(t){return t()}function et(){return Object.create(null)}function _e(t){t.forEach(Tt)}function Fe(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Qt(t){return Object.keys(t).length===0}function At(t,...e){if(t==null){for(const l of e)l(void 0);return Z}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function G(t,e,n){t.$$.on_destroy.push(At(e,n))}function Vt(t,e,n,l){if(t){const r=Bt(t,e,n,l);return t[0](r)}}function Bt(t,e,n,l){return t[1]&&l?Oe(n.ctx.slice(),t[1](l(e))):n.ctx}function Mt(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],i=Math.max(e.dirty.length,r.length);for(let c=0;c<i;c+=1)o[c]=e.dirty[c]|r[c];return o}return e.dirty|r}return e.dirty}function St(t,e,n,l,r,o){if(r){const i=Bt(e,n,l,o);t.p(i,r)}}function qt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Ot(t,e,n){return t.set(n),e}let ze=!1;function $t(){ze=!0}function xt(){ze=!1}function en(t,e,n,l){for(;t<e;){const r=t+(e-t>>1);n(r)<=l?t=r+1:e=r}return t}function tn(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const s=[];for(let f=0;f<e.length;f++){const d=e[f];d.claim_order!==void 0&&s.push(d)}e=s}const n=new Int32Array(e.length+1),l=new Int32Array(e.length);n[0]=-1;let r=0;for(let s=0;s<e.length;s++){const f=e[s].claim_order,d=(r>0&&e[n[r]].claim_order<=f?r+1:en(1,r,a=>e[n[a]].claim_order,f))-1;l[s]=n[d]+1;const u=d+1;n[u]=s,r=Math.max(u,r)}const o=[],i=[];let c=e.length-1;for(let s=n[r]+1;s!=0;s=l[s-1]){for(o.push(e[s-1]);c>=s;c--)i.push(e[c]);c--}for(;c>=0;c--)i.push(e[c]);o.reverse(),i.sort((s,f)=>s.claim_order-f.claim_order);for(let s=0,f=0;s<i.length;s++){for(;f<o.length&&i[s].claim_order>=o[f].claim_order;)f++;const d=f<o.length?o[f]:null;t.insertBefore(i[s],d)}}function nn(t,e){t.appendChild(e)}function M(t,e){if(ze){for(tn(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function N(t,e,n){ze&&!n?M(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function _(t){t.parentNode&&t.parentNode.removeChild(t)}function ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function je(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function le(t){return document.createTextNode(t)}function j(){return le(" ")}function Me(){return le("")}function ee(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Pe(t){return t.dataset.svelteH}function T(t){return Array.from(t.childNodes)}function ln(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function zt(t,e,n,l,r=!1){ln(t);const o=(()=>{for(let i=t.claim_info.last_index;i<t.length;i++){const c=t[i];if(e(c)){const s=n(c);return s===void 0?t.splice(i,1):t[i]=s,r||(t.claim_info.last_index=i),c}}for(let i=t.claim_info.last_index-1;i>=0;i--){const c=t[i];if(e(c)){const s=n(c);return s===void 0?t.splice(i,1):t[i]=s,r?s===void 0&&t.claim_info.last_index--:t.claim_info.last_index=i,c}}return l()})();return o.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,o}function jt(t,e,n,l){return zt(t,r=>r.nodeName===e,r=>{const o=[];for(let i=0;i<r.attributes.length;i++){const c=r.attributes[i];n[c.name]||o.push(c.name)}o.forEach(i=>r.removeAttribute(i))},()=>l(e))}function I(t,e,n){return jt(t,e,n,C)}function Je(t,e,n){return jt(t,e,n,je)}function ue(t,e){return zt(t,n=>n.nodeType===3,n=>{const l=""+e;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>le(e),!0)}function L(t){return ue(t," ")}function Ve(t,e){e=""+e,t.data!==e&&(t.data=e)}function oe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let Ae;function rn(){if(Ae===void 0){Ae=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ae=!0}}return Ae}function on(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=C("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const r=rn();let o;return r?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=ee(window,"message",i=>{i.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{o=ee(l.contentWindow,"resize",e),e()}),nn(t,l),()=>{(r||o&&l.contentWindow)&&o(),_(l)}}function sn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Ie;function Ce(t){Ie=t}function Lt(){if(!Ie)throw new Error("Function called outside component initialization");return Ie}function Xt(t){Lt().$$.on_mount.push(t)}function Yt(){const t=Lt();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=sn(e,n,{cancelable:l});return r.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}const ke=[],te=[];let De=[];const He=[],cn=Promise.resolve();let Ue=!1;function fn(){Ue||(Ue=!0,cn.then(Wt))}function Se(t){De.push(t)}function ge(t){He.push(t)}const Ze=new Set;let we=0;function Wt(){if(we!==0)return;const t=Ie;do{try{for(;we<ke.length;){const e=ke[we];we++,Ce(e),un(e.$$)}}catch(e){throw ke.length=0,we=0,e}for(Ce(null),ke.length=0,we=0;te.length;)te.pop()();for(let e=0;e<De.length;e+=1){const n=De[e];Ze.has(n)||(Ze.add(n),n())}De.length=0}while(ke.length);for(;He.length;)He.pop()();Ue=!1,Ze.clear(),Ce(t)}function un(t){if(t.fragment!==null){t.update(),_e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Se)}}function an(t){const e=[],n=[];De.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),De=e}const Be=new Set;let pe;function de(){pe={r:0,c:[],p:pe}}function he(){pe.r||_e(pe.c),pe=pe.p}function B(t,e){t&&t.i&&(Be.delete(t),t.i(e))}function S(t,e,n,l){if(t&&t.o){if(Be.has(t))return;Be.add(t),pe.c.push(()=>{Be.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function U(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ge(t,e){const n={},l={},r={$$scope:1};let o=t.length;for(;o--;){const i=t[o],c=e[o];if(c){for(const s in i)s in c||(l[s]=1);for(const s in c)r[s]||(n[s]=c[s],r[s]=1);t[o]=c}else for(const s in i)r[s]=1}for(const i in l)i in n||(n[i]=void 0);return n}function Ke(t){return typeof t=="object"&&t!==null?t:{}}function ve(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function K(t){t&&t.c()}function Q(t,e){t&&t.l(e)}function F(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Se(()=>{const o=t.$$.on_mount.map(Tt).filter(Fe);t.$$.on_destroy?t.$$.on_destroy.push(...o):_e(o),t.$$.on_mount=[]}),r.forEach(Se)}function J(t,e){const n=t.$$;n.fragment!==null&&(an(n.after_update),_e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),fn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function se(t,e,n,l,r,o,i=null,c=[-1]){const s=Ie;Ce(t);const f=t.$$={fragment:null,ctx:[],props:o,update:Z,not_equal:r,bound:et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:et(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};i&&i(f.root);let d=!1;if(f.ctx=n?n(t,e.props||{},(u,a,...D)=>{const g=D.length?D[0]:a;return f.ctx&&r(f.ctx[u],f.ctx[u]=g)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](g),d&&dn(t,u)),a}):[],f.update(),d=!0,_e(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){$t();const u=T(e.target);f.fragment&&f.fragment.l(u),u.forEach(_)}else f.fragment&&f.fragment.c();e.intro&&B(t.$$.fragment),F(t,e.target,e.anchor),xt(),Wt()}Ce(s)}class ce{constructor(){We(this,"$$");We(this,"$$set")}$destroy(){J(this,1),this.$destroy=Z}$on(e,n){if(!Fe(n))return Z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Qt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const hn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hn);function tt(t){let e;function n(o,i){return o[1]?mn:_n}let l=n(t),r=l(t);return{c(){e=je("svg"),r.c(),this.h()},l(o){e=Je(o,"svg",{class:!0});var i=T(e);r.l(i),i.forEach(_),this.h()},h(){v(e,"class","svelte-18d6l3w")},m(o,i){N(o,e,i),r.m(e,null)},p(o,i){l===(l=n(o))&&r?r.p(o,i):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null)))},d(o){o&&_(e),r.d()}}}function _n(t){let e,n;return{c(){e=je("polygon"),this.h()},l(l){e=Je(l,"polygon",{points:!0,fill:!0}),T(e).forEach(_),this.h()},h(){v(e,"points",n="0,"+t[3]+" "+t[2]+","+t[3]+" "+t[2]/2+",0"),v(e,"fill",t[0])},m(l,r){N(l,e,r)},p(l,r){r&12&&n!==(n="0,"+l[3]+" "+l[2]+","+l[3]+" "+l[2]/2+",0")&&v(e,"points",n),r&1&&v(e,"fill",l[0])},d(l){l&&_(e)}}}function mn(t){let e,n;return{c(){e=je("polygon"),this.h()},l(l){e=Je(l,"polygon",{points:!0,fill:!0}),T(e).forEach(_),this.h()},h(){v(e,"points",n="0,0 "+t[2]+",0 "+t[2]/2+","+t[3]),v(e,"fill",t[0])},m(l,r){N(l,e,r)},p(l,r){r&12&&n!==(n="0,0 "+l[2]+",0 "+l[2]/2+","+l[3])&&v(e,"points",n),r&1&&v(e,"fill",l[0])},d(l){l&&_(e)}}}function gn(t){let e,n,l=t[2]&&t[3]&&tt(t);return{c(){e=C("div"),l&&l.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var o=T(e);l&&l.l(o),o.forEach(_),this.h()},h(){v(e,"class","container svelte-18d6l3w"),Se(()=>t[4].call(e))},m(r,o){N(r,e,o),l&&l.m(e,null),n=on(e,t[4].bind(e))},p(r,[o]){r[2]&&r[3]?l?l.p(r,o):(l=tt(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Z,o:Z,d(r){r&&_(e),l&&l.d(),n()}}}function pn(t,e,n){let{color:l}=e,{reversed:r=!1}=e,o,i;function c(){o=this.clientWidth,i=this.clientHeight,n(2,o),n(3,i)}return t.$$set=s=>{"color"in s&&n(0,l=s.color),"reversed"in s&&n(1,r=s.reversed)},[l,r,o,i,c]}class vn extends ce{constructor(e){super(),se(this,e,pn,gn,re,{color:0,reversed:1})}}function bn(t){let e,n,l,r,o;const i=t[15].default,c=Vt(i,t,t[14],null);return{c(){e=C("div"),c&&c.c(),this.h()},l(s){e=I(s,"DIV",{id:!0,style:!0,class:!0});var f=T(e);c&&c.l(f),f.forEach(_),this.h()},h(){v(e,"id",t[2]),oe(e,"transform","translate("+t[3]+"px, "+t[4]+"px)"),v(e,"class",n="draggable "+(t[1]&&"deactivated")+" "+(t[5]&&"moving")+" svelte-gvmcw0")},m(s,f){N(s,e,f),c&&c.m(e,null),t[16](e),l=!0,r||(o=[ee(window,"mousemove",t[7]),ee(window,"touchmove",t[7]),ee(e,"mousedown",t[6]),ee(e,"mouseup",t[8]),ee(e,"touchstart",t[6]),ee(e,"touchend",t[8],{passive:!0})],r=!0)},p(s,[f]){c&&c.p&&(!l||f&16384)&&St(c,i,s,s[14],l?Mt(i,s[14],f,null):qt(s[14]),null),(!l||f&4)&&v(e,"id",s[2]),(!l||f&24)&&oe(e,"transform","translate("+s[3]+"px, "+s[4]+"px)"),(!l||f&34&&n!==(n="draggable "+(s[1]&&"deactivated")+" "+(s[5]&&"moving")+" svelte-gvmcw0"))&&v(e,"class",n)},i(s){l||(B(c,s),l=!0)},o(s){S(c,s),l=!1},d(s){s&&_(e),c&&c.d(s),t[16](null),r=!1,_e(o)}}}function wn(t,e,n){let{$$slots:l={},$$scope:r}=e;const o=Yt();let{maxDrag:i=[1/0,1/0]}=e,{resetAfterDrag:c=!1}=e,{deactivated:s=!1}=e,{invertX:f=!1}=e,{invertY:d=!1}=e,{el:u=null}=e,{id:a=null}=e,D=0,g=0,w=0,k=0,P=!1;function A(p){console.log(p,"onMouseDown"),!s&&(n(5,P=!0),o("dragstart"),p.touches&&(w=p.touches[0].screenX,k=p.touches[0].screenY))}function y(p){if(P&&!p.touches)n(3,D+=(f?-1:1)*p.movementX),n(4,g+=(d?-1:1)*p.movementY);else if(P&&p.touches){const $=p.touches[0];if(w!==0||k!==0){const R=$.screenX-w,z=$.screenY-k;n(3,D+=(f?-1:1)*R),n(4,g+=(d?-1:1)*z)}w=$.screenX,k=$.screenY,console.log(D,g),p.stopPropagation(),p.preventDefault()}i&&(D>i[0]||D<-i[0]||g>i[1]||g<-i[1])&&V()}function V(){n(5,P=!1),o("dragend"),c&&(n(3,D=0),n(4,g=0))}const O=()=>{n(3,D=0),n(4,g=0)};function W(p){te[p?"unshift":"push"](()=>{u=p,n(0,u)})}return t.$$set=p=>{"maxDrag"in p&&n(9,i=p.maxDrag),"resetAfterDrag"in p&&n(10,c=p.resetAfterDrag),"deactivated"in p&&n(1,s=p.deactivated),"invertX"in p&&n(11,f=p.invertX),"invertY"in p&&n(12,d=p.invertY),"el"in p&&n(0,u=p.el),"id"in p&&n(2,a=p.id),"$$scope"in p&&n(14,r=p.$$scope)},[u,s,a,D,g,P,A,y,V,i,c,f,d,O,r,l,W]}class Zt extends ce{constructor(e){super(),se(this,e,wn,bn,re,{maxDrag:9,resetAfterDrag:10,deactivated:1,invertX:11,invertY:12,el:0,id:2,reset:13})}get reset(){return this.$$.ctx[13]}}const ye=[];function Ne(t,e){return{subscribe:Ht(t,e).subscribe}}function Ht(t,e=Z){let n;const l=new Set;function r(c){if(re(t,c)&&(t=c,n)){const s=!ye.length;for(const f of l)f[1](),ye.push(f,t);if(s){for(let f=0;f<ye.length;f+=2)ye[f][0](ye[f+1]);ye.length=0}}}function o(c){r(c(t))}function i(c,s=Z){const f=[c,s];return l.add(f),l.size===1&&(n=e(r,o)||Z),c(t),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:i}}function Le(t,e,n){const l=!Array.isArray(t),r=l?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ne(n,(i,c)=>{let s=!1;const f=[];let d=0,u=Z;const a=()=>{if(d)return;u();const g=e(l?f[0]:f,i,c);o?i(g):u=Fe(g)?g:Z},D=r.map((g,w)=>At(g,k=>{f[w]=k,d&=~(1<<w),s&&a()},()=>{d|=1<<w}));return s=!0,a(),function(){_e(D),u(),s=!1}})}const yn="https://agricola.uber.space/backgammon/backend",Qe=yn,kn=async(t="test")=>await(await fetch(`${Qe}/${t}`)).json(),Dn=async(t="test")=>{const n=await(await fetch(`${Qe}/${t}/roll`)).json(),l=n.throws[n.throws.length-1];return[l.dice1,l.dice2]},En=async(t="test",e)=>await(await fetch(`${Qe}/${t}/moves`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text(),Xe=t=>new URL(window.location.href).searchParams.get(t);Ne(!1,t=>{const e=Xe("debug");t(e==="true")});const Ut=Ne(null,(t,e)=>{const n=Xe("user")||"white";t(n)}),Cn=Ne(null,(t,e)=>{const n=Xe("game")||"test";t(n)}),qe=Ht({});let nt=null;const Te=Ne(null,(t,e)=>{const n=Xe("game")||"test",l=setInterval(async()=>{const r=await kn(n);JSON.stringify(r)!==nt&&(t(r),nt=JSON.stringify(r))},1e3);return()=>clearInterval(l)}),$e=Le(Te,t=>{var n;return t?(((n=t.moves[t.moves.length-1])==null?void 0:n.player)||"b")==="w"?"black":"white":null}),Rt=Le(Te,t=>{if(!t)return 1;const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?n.turn+1:(n==null?void 0:n.turn)||1}),Pn=Le(Te,t=>{if(!t)return[null,null];const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?[null,null]:[(n==null?void 0:n.dice1)||null,(n==null?void 0:n.dice2)||null]}),Ft=Le([$e,Ut],([t,e])=>t===e);function lt(t){let e;return{c(){e=C("div"),this.h()},l(n){e=I(n,"DIV",{class:!0,style:!0}),T(e).forEach(_),this.h()},h(){v(e,"class","moved svelte-1oqyr8y"),oe(e,"background-color",t[2]==="white"?"black":"white")},m(n,l){N(n,e,l)},p(n,l){l&4&&oe(e,"background-color",n[2]==="white"?"black":"white")},d(n){n&&_(e)}}}function In(t){let e,n,l=t[3]&&lt(t);return{c(){e=C("div"),l&&l.c(),this.h()},l(r){e=I(r,"DIV",{class:!0,style:!0});var o=T(e);l&&l.l(o),o.forEach(_),this.h()},h(){v(e,"class",n="checker "+t[2]+" svelte-1oqyr8y"),oe(e,"background-color",t[2]),oe(e,"border",(t[3]?"2px":"1px")+" solid black")},m(r,o){N(r,e,o),l&&l.m(e,null)},p(r,o){r[3]?l?l.p(r,o):(l=lt(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null),o&4&&n!==(n="checker "+r[2]+" svelte-1oqyr8y")&&v(e,"class",n),o&4&&oe(e,"background-color",r[2]),o&8&&oe(e,"border",(r[3]?"2px":"1px")+" solid black")},d(r){r&&_(e),l&&l.d()}}}function Nn(t){let e,n,l,r;function o(s){t[11](s)}function i(s){t[12](s)}let c={id:t[1],deactivated:!t[0],$$slots:{default:[In]},$$scope:{ctx:t}};return t[4]!==void 0&&(c.el=t[4]),t[5]!==void 0&&(c.reset=t[5]),e=new Zt({props:c}),te.push(()=>ve(e,"el",o)),te.push(()=>ve(e,"reset",i)),e.$on("dragstart",t[6]),e.$on("dragend",t[7]),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,f){F(e,s,f),r=!0},p(s,[f]){const d={};f&2&&(d.id=s[1]),f&1&&(d.deactivated=!s[0]),f&65548&&(d.$$scope={dirty:f,ctx:s}),!n&&f&16&&(n=!0,d.el=s[4],ge(()=>n=!1)),!l&&f&32&&(l=!0,d.reset=s[5],ge(()=>l=!1)),e.$set(d)},i(s){r||(B(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){J(e,s)}}}function Tn(t,e,n){let l,r;G(t,Ft,y=>n(9,l=y)),G(t,$e,y=>n(10,r=y));let{id:o}=e,{position:i}=e,{color:c}=e,{hasBeenMoved:s}=e,{draggable:f=!1}=e;const d=Yt();let u,a,D=()=>{},g;Xt(()=>{a=document.querySelector(".moving-checker-cache")});const w=()=>{g=u.parentElement;const{left:y,top:V}=u.getBoundingClientRect();console.log("onDragStart",y,V,u),a.appendChild(u),n(4,u.style.position="absolute",u),n(4,u.style.left=`${y}px`,u),n(4,u.style.top=`${V}px`,u),a.style.pointerEvents="auto"},k=()=>{const{left:y,top:V,width:O,height:W}=u.getBoundingClientRect(),p={x:y+O/2,y:V+W/2};d("move",{checker_id:o,start:String(i),coordinates:p,reset:()=>g.appendChild(u)}),D(),a.style.pointerEvents="none",n(4,u.style.position="static",u)};function P(y){u=y,n(4,u)}function A(y){D=y,n(5,D)}return t.$$set=y=>{"id"in y&&n(1,o=y.id),"position"in y&&n(8,i=y.position),"color"in y&&n(2,c=y.color),"hasBeenMoved"in y&&n(3,s=y.hasBeenMoved),"draggable"in y&&n(0,f=y.draggable)},t.$$.update=()=>{t.$$.dirty&1540&&n(0,f=c===r&&l)},[f,o,c,s,u,D,w,k,i,l,r,P,A]}class xe extends ce{constructor(e){super(),se(this,e,Tn,Nn,re,{id:1,position:8,color:2,hasBeenMoved:3,draggable:0})}}function An(t){let e,n="?";return{c(){e=C("span"),e.textContent=n,this.h()},l(l){e=I(l,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-1p91mot"&&(e.textContent=n),this.h()},h(){v(e,"class","svelte-a1rwuv")},m(l,r){N(l,e,r)},p:Z,d(l){l&&_(e)}}}function Vn(t){let e=[1,3,5].includes(t[0]),n,l=[2,3,4,5,6].includes(t[0]),r,o=[4,5,6].includes(t[0]),i,c,s=e&&rt(),f=l&&it(),d=o&&ot(),u=t[0]===6&&st();return{c(){s&&s.c(),n=j(),f&&f.c(),r=j(),d&&d.c(),i=j(),u&&u.c(),c=Me()},l(a){s&&s.l(a),n=L(a),f&&f.l(a),r=L(a),d&&d.l(a),i=L(a),u&&u.l(a),c=Me()},m(a,D){s&&s.m(a,D),N(a,n,D),f&&f.m(a,D),N(a,r,D),d&&d.m(a,D),N(a,i,D),u&&u.m(a,D),N(a,c,D)},p(a,D){D&1&&(e=[1,3,5].includes(a[0])),e?s||(s=rt(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),D&1&&(l=[2,3,4,5,6].includes(a[0])),l?f||(f=it(),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),D&1&&(o=[4,5,6].includes(a[0])),o?d||(d=ot(),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null),a[0]===6?u||(u=st(),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(a){a&&(_(n),_(r),_(i),_(c)),s&&s.d(a),f&&f.d(a),d&&d.d(a),u&&u.d(a)}}}function rt(t){let e;return{c(){e=C("div"),this.h()},l(n){e=I(n,"DIV",{class:!0}),T(e).forEach(_),this.h()},h(){v(e,"class","dot center svelte-a1rwuv")},m(n,l){N(n,e,l)},d(n){n&&_(e)}}}function it(t){let e,n,l;return{c(){e=C("div"),n=j(),l=C("div"),this.h()},l(r){e=I(r,"DIV",{class:!0}),T(e).forEach(_),n=L(r),l=I(r,"DIV",{class:!0}),T(l).forEach(_),this.h()},h(){v(e,"class","dot top-left svelte-a1rwuv"),v(l,"class","dot bottom-right svelte-a1rwuv")},m(r,o){N(r,e,o),N(r,n,o),N(r,l,o)},d(r){r&&(_(e),_(n),_(l))}}}function ot(t){let e,n,l;return{c(){e=C("div"),n=j(),l=C("div"),this.h()},l(r){e=I(r,"DIV",{class:!0}),T(e).forEach(_),n=L(r),l=I(r,"DIV",{class:!0}),T(l).forEach(_),this.h()},h(){v(e,"class","dot top-right svelte-a1rwuv"),v(l,"class","dot bottom-left svelte-a1rwuv")},m(r,o){N(r,e,o),N(r,n,o),N(r,l,o)},d(r){r&&(_(e),_(n),_(l))}}}function st(t){let e,n,l;return{c(){e=C("div"),n=j(),l=C("div"),this.h()},l(r){e=I(r,"DIV",{class:!0}),T(e).forEach(_),n=L(r),l=I(r,"DIV",{class:!0}),T(l).forEach(_),this.h()},h(){v(e,"class","dot center-left svelte-a1rwuv"),v(l,"class","dot center-right svelte-a1rwuv")},m(r,o){N(r,e,o),N(r,n,o),N(r,l,o)},d(r){r&&(_(e),_(n),_(l))}}}function Bn(t){let e;function n(o,i){return o[0]?Vn:An}let l=n(t),r=l(t);return{c(){e=C("div"),r.c(),this.h()},l(o){e=I(o,"DIV",{class:!0});var i=T(e);r.l(i),i.forEach(_),this.h()},h(){v(e,"class","dice svelte-a1rwuv")},m(o,i){N(o,e,i),r.m(e,null)},p(o,[i]){l===(l=n(o))&&r?r.p(o,i):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null)))},i:Z,o:Z,d(o){o&&_(e),r.d()}}}function Mn(t,e,n){let{number:l}=e;return t.$$set=r=>{"number"in r&&n(0,l=r.number)},[l]}class ct extends ce{constructor(e){super(),se(this,e,Mn,Bn,re,{number:0})}}const Re=[{position:0,color:"white",id:"0-0"},{position:0,color:"white",id:"0-1"},{position:5,color:"black",id:"5-0"},{position:5,color:"black",id:"5-1"},{position:5,color:"black",id:"5-2"},{position:5,color:"black",id:"5-3"},{position:5,color:"black",id:"5-4"},{position:7,color:"black",id:"7-0"},{position:7,color:"black",id:"7-1"},{position:7,color:"black",id:"7-2"},{position:11,color:"white",id:"11-0"},{position:11,color:"white",id:"11-1"},{position:11,color:"white",id:"11-2"},{position:11,color:"white",id:"11-3"},{position:11,color:"white",id:"11-4"},{position:12,color:"black",id:"12-0"},{position:12,color:"black",id:"12-1"},{position:12,color:"black",id:"12-2"},{position:12,color:"black",id:"12-3"},{position:12,color:"black",id:"12-4"},{position:16,color:"white",id:"16-0"},{position:16,color:"white",id:"16-1"},{position:16,color:"white",id:"16-2"},{position:18,color:"white",id:"18-0"},{position:18,color:"white",id:"18-1"},{position:18,color:"white",id:"18-2"},{position:18,color:"white",id:"18-3"},{position:18,color:"white",id:"18-4"},{position:23,color:"black",id:"23-0"},{position:23,color:"black",id:"23-1"}];function ft(t,e,n){const l=t.slice();return l[12]=e[n],l[14]=n,l}function ut(t){let e,n,l,r;function o(){return t[9](t[14])}return{c(){e=C("div"),this.h()},l(i){e=I(i,"DIV",{class:!0}),T(e).forEach(_),this.h()},h(){v(e,"class",n="info "+t[12].player+" svelte-u4d6th")},m(i,c){N(i,e,c),l||(r=[ee(e,"mouseenter",o),ee(e,"mouseout",t[10])],l=!0)},p(i,c){t=i,c&1&&n!==(n="info "+t[12].player+" svelte-u4d6th")&&v(e,"class",n)},d(i){i&&_(e),l=!1,_e(r)}}}function Sn(t){let e,n=U(t[0]),l=[];for(let r=0;r<n.length;r+=1)l[r]=ut(ft(t,n,r));return{c(){e=C("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var o=T(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_),this.h()},h(){v(e,"class","container svelte-u4d6th")},m(r,o){N(r,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(r,[o]){if(o&7){n=U(r[0]);let i;for(i=0;i<n.length;i+=1){const c=ft(r,n,i);l[i]?l[i].p(c,o):(l[i]=ut(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},i:Z,o:Z,d(r){r&&_(e),ae(l,r)}}}function qn(t,e,n){let l,r;G(t,Te,g=>n(7,l=g)),G(t,Rt,g=>n(8,r=g));let{forcedCheckerPositions:o}=e,{forcedPlayer:i}=e,{forcedTurn:c}=e,{forcedDices:s}=e,f=[];const d=g=>{const{state:w,moves:k,throw:P,player:A}=f[g];n(4,i=A),n(5,c=g+1),n(6,s=[P.dice1,P.dice2]),n(3,o=w.reduce((y,V)=>{y[V.position]=y[V.position]||[];const O=k.find(W=>W.checker_id===V.id);return O?(y[O.end]=y[O.end]||[],y[O.end].push({id:V.id,color:V.color,hasBeenMoved:!0})):y[V.position].push({id:V.id,color:V.color}),y},{}))},u=()=>{n(3,o=null),n(4,i=null),n(5,c=null),n(6,s=null)},a=g=>d(g),D=()=>u();return t.$$set=g=>{"forcedCheckerPositions"in g&&n(3,o=g.forcedCheckerPositions),"forcedPlayer"in g&&n(4,i=g.forcedPlayer),"forcedTurn"in g&&n(5,c=g.forcedTurn),"forcedDices"in g&&n(6,s=g.forcedDices)},t.$$.update=()=>{t.$$.dirty&384&&n(0,f=Array.from({length:r-1},(g,w)=>{const k=l.moves.filter(A=>A.turn<w+1);return{state:Re.map(A=>{const y=k.reverse().find(V=>V.checker_id===A.id);return y?{...A,position:y.end}:A}),moves:l.moves.filter(A=>A.turn===w+1),throw:l.throws.find(A=>A.turn===w+1),player:w%2===0?"white":"black"}}))},[f,d,u,o,i,c,s,l,r,a,D]}class On extends ce{constructor(e){super(),se(this,e,qn,Sn,re,{forcedCheckerPositions:3,forcedPlayer:4,forcedTurn:5,forcedDices:6})}}function at(t){let e,n="Zieh die Würfel mit der Maus,<br/>um zu würfeln";return{c(){e=C("span"),e.innerHTML=n,this.h()},l(l){e=I(l,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-z01ytv"&&(e.innerHTML=n),this.h()},h(){v(e,"class","svelte-ql81fn")},m(l,r){N(l,e,r)},d(l){l&&_(e)}}}function zn(t){let e,n,l,r,o;return n=new ct({props:{number:t[4][0]}}),r=new ct({props:{number:t[4][1]}}),{c(){e=C("div"),K(n.$$.fragment),l=j(),K(r.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=T(e);Q(n.$$.fragment,c),l=L(c),Q(r.$$.fragment,c),c.forEach(_),this.h()},h(){v(e,"class","dices svelte-ql81fn")},m(i,c){N(i,e,c),F(n,e,null),M(e,l),F(r,e,null),o=!0},p(i,c){const s={};c&16&&(s.number=i[4][0]),n.$set(s);const f={};c&16&&(f.number=i[4][1]),r.$set(f)},i(i){o||(B(n.$$.fragment,i),B(r.$$.fragment,i),o=!0)},o(i){S(n.$$.fragment,i),S(r.$$.fragment,i),o=!1},d(i){i&&_(e),J(n),J(r)}}}function dt(t){let e,n,l="Zug beenden",r,o;return{c(){e=C("div"),n=C("button"),n.textContent=l,this.h()},l(i){e=I(i,"DIV",{class:!0});var c=T(e);n=I(c,"BUTTON",{"data-svelte-h":!0}),Pe(n)!=="svelte-1gt0av7"&&(n.textContent=l),c.forEach(_),this.h()},h(){v(e,"class","actions svelte-ql81fn")},m(i,c){N(i,e,c),M(e,n),r||(o=ee(n,"click",t[10]),r=!0)},p:Z,d(i){i&&_(e),r=!1,o()}}}function jn(t){let e,n,l,r,o=t[7]==="white"?"Weiß":"Schwarz",i,c,s=t[5]?"war":"ist",f,d,u,a,D,g,w,k,P,A,y,V,O,W,p,$,R,z,ne;function Ee(h){t[14](h)}function Y(h){t[15](h)}function Ye(h){t[16](h)}function ie(h){t[17](h)}let q={};t[0]!==void 0&&(q.forcedCheckerPositions=t[0]),t[2]!==void 0&&(q.forcedPlayer=t[2]),t[1]!==void 0&&(q.forcedTurn=t[1]),t[3]!==void 0&&(q.forcedDices=t[3]),P=new On({props:q}),te.push(()=>ve(P,"forcedCheckerPositions",Ee)),te.push(()=>ve(P,"forcedPlayer",Y)),te.push(()=>ve(P,"forcedTurn",Ye)),te.push(()=>ve(P,"forcedDices",ie));let H=!t[4][0]&&!t[4][1]&&t[8]&&at();R=new Zt({props:{maxDrag:[150,150],resetAfterDrag:!0,deactivated:t[4][0]||!t[8],$$slots:{default:[zn]},$$scope:{ctx:t}}}),R.$on("dragend",t[9]);let m=t[4][0]&&t[4][1]&&t[8]&&dt(t);return{c(){e=C("div"),n=C("div"),l=C("div"),r=C("p"),i=le(o),c=j(),f=le(s),d=le(" am Zug"),u=j(),a=C("p"),D=le("Zug "),g=le(t[6]),k=j(),K(P.$$.fragment),W=j(),p=C("div"),H&&H.c(),$=j(),K(R.$$.fragment),z=j(),m&&m.c(),this.h()},l(h){e=I(h,"DIV",{class:!0});var E=T(e);n=I(E,"DIV",{class:!0});var b=T(n);l=I(b,"DIV",{class:!0});var X=T(l);r=I(X,"P",{class:!0});var fe=T(r);i=ue(fe,o),c=L(fe),f=ue(fe,s),d=ue(fe," am Zug"),fe.forEach(_),u=L(X),a=I(X,"P",{class:!0});var be=T(a);D=ue(be,"Zug "),g=ue(be,t[6]),be.forEach(_),X.forEach(_),k=L(b),Q(P.$$.fragment,b),b.forEach(_),W=L(E),p=I(E,"DIV",{class:!0});var me=T(p);H&&H.l(me),$=L(me),Q(R.$$.fragment,me),me.forEach(_),z=L(E),m&&m.l(E),E.forEach(_),this.h()},h(){v(r,"class","player svelte-ql81fn"),v(a,"class","turn svelte-ql81fn"),v(l,"class",w="info "+t[7]+" svelte-ql81fn"),v(n,"class","header svelte-ql81fn"),v(p,"class","dice-container svelte-ql81fn"),v(e,"class","container svelte-ql81fn")},m(h,E){N(h,e,E),M(e,n),M(n,l),M(l,r),M(r,i),M(r,c),M(r,f),M(r,d),M(l,u),M(l,a),M(a,D),M(a,g),M(n,k),F(P,n,null),M(e,W),M(e,p),H&&H.m(p,null),M(p,$),F(R,p,null),M(e,z),m&&m.m(e,null),ne=!0},p(h,[E]){(!ne||E&128)&&o!==(o=h[7]==="white"?"Weiß":"Schwarz")&&Ve(i,o),(!ne||E&32)&&s!==(s=h[5]?"war":"ist")&&Ve(f,s),(!ne||E&64)&&Ve(g,h[6]),(!ne||E&128&&w!==(w="info "+h[7]+" svelte-ql81fn"))&&v(l,"class",w);const b={};!A&&E&1&&(A=!0,b.forcedCheckerPositions=h[0],ge(()=>A=!1)),!y&&E&4&&(y=!0,b.forcedPlayer=h[2],ge(()=>y=!1)),!V&&E&2&&(V=!0,b.forcedTurn=h[1],ge(()=>V=!1)),!O&&E&8&&(O=!0,b.forcedDices=h[3],ge(()=>O=!1)),P.$set(b),!h[4][0]&&!h[4][1]&&h[8]?H||(H=at(),H.c(),H.m(p,$)):H&&(H.d(1),H=null);const X={};E&272&&(X.deactivated=h[4][0]||!h[8]),E&1048592&&(X.$$scope={dirty:E,ctx:h}),R.$set(X),h[4][0]&&h[4][1]&&h[8]?m?m.p(h,E):(m=dt(h),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i(h){ne||(B(P.$$.fragment,h),B(R.$$.fragment,h),ne=!0)},o(h){S(P.$$.fragment,h),S(R.$$.fragment,h),ne=!1},d(h){h&&_(e),J(P),H&&H.d(),J(R),m&&m.d()}}}function Ln(t,e,n){let l,r,o,i,c,s,f,d,u;G(t,qe,p=>n(18,i=p)),G(t,Cn,p=>n(19,c=p)),G(t,Pn,p=>n(11,s=p)),G(t,Rt,p=>n(12,f=p)),G(t,$e,p=>n(13,d=p)),G(t,Ft,p=>n(8,u=p));let{forcedCheckerPositions:a}=e,D,g,w,k=s;const P=async()=>{n(4,k=await Dn(c))},A=async()=>{await En(c,Object.values(i)),Ot(qe,i={},i)};function y(p){a=p,n(0,a)}function V(p){g=p,n(2,g)}function O(p){D=p,n(1,D)}function W(p){w=p,n(3,w)}return t.$$set=p=>{"forcedCheckerPositions"in p&&n(0,a=p.forcedCheckerPositions)},t.$$.update=()=>{t.$$.dirty&8196&&n(7,l=g||d),t.$$.dirty&4098&&n(6,r=D||f),t.$$.dirty&6&&n(5,o=g&&D),t.$$.dirty&2072&&(n(4,k=w||s),console.log(k,w))},[a,D,g,w,k,o,r,l,u,P,A,s,f,d,y,V,O,W]}class Xn extends ce{constructor(e){super(),se(this,e,Ln,jn,re,{forcedCheckerPositions:0})}}function ht(t){let e,n,l=t[3]-1+"",r;return{c(){e=C("span"),n=le("+"),r=le(l),this.h()},l(o){e=I(o,"SPAN",{class:!0});var i=T(e);n=ue(i,"+"),r=ue(i,l),i.forEach(_),this.h()},h(){v(e,"class","bottom-info svelte-1v6urwz")},m(o,i){N(o,e,i),M(e,n),M(e,r)},p(o,i){i&8&&l!==(l=o[3]-1+"")&&Ve(r,l)},d(o){o&&_(e)}}}function Yn(t){let e,n,l,r,o,i,c;const s=t[6].default,f=Vt(s,t,t[5],null);let d=t[3]>1&&ht(t);return{c(){e=C("div"),n=C("span"),r=j(),f&&f.c(),o=j(),d&&d.c(),this.h()},l(u){e=I(u,"DIV",{class:!0,"data-position":!0});var a=T(e);n=I(a,"SPAN",{class:!0}),T(n).forEach(_),r=L(a),f&&f.l(a),o=L(a),d&&d.l(a),a.forEach(_),this.h()},h(){v(n,"class",l="label "+t[1]+" svelte-1v6urwz"),v(e,"class",i=t[1]+" checkerContainer "+t[2]+" box svelte-1v6urwz"),v(e,"data-position",t[0])},m(u,a){N(u,e,a),M(e,n),M(e,r),f&&f.m(e,null),M(e,o),d&&d.m(e,null),t[7](e),c=!0},p(u,[a]){(!c||a&2&&l!==(l="label "+u[1]+" svelte-1v6urwz"))&&v(n,"class",l),f&&f.p&&(!c||a&32)&&St(f,s,u,u[5],c?Mt(s,u[5],a,null):qt(u[5]),null),u[3]>1?d?d.p(u,a):(d=ht(u),d.c(),d.m(e,null)):d&&(d.d(1),d=null),(!c||a&6&&i!==(i=u[1]+" checkerContainer "+u[2]+" box svelte-1v6urwz"))&&v(e,"class",i),(!c||a&1)&&v(e,"data-position",u[0])},i(u){c||(B(f,u),c=!0)},o(u){S(f,u),c=!1},d(u){u&&_(e),f&&f.d(u),d&&d.d(),t[7](null)}}}function Wn(t,e,n){let{$$slots:l={},$$scope:r}=e,{position:o}=e,{color:i}=e,{type:c}=e,s,f;const d=new MutationObserver(()=>{n(3,s=f.querySelectorAll(".draggable").length)});Xt(()=>{d.observe(f,{childList:!0})});function u(a){te[a?"unshift":"push"](()=>{f=a,n(4,f)})}return t.$$set=a=>{"position"in a&&n(0,o=a.position),"color"in a&&n(1,i=a.color),"type"in a&&n(2,c=a.type),"$$scope"in a&&n(5,r=a.$$scope)},[o,i,c,s,f,r,l,u]}class Jt extends ce{constructor(e){super(),se(this,e,Wn,Yn,re,{position:0,color:1,type:2})}}function _t(t,e,n){const l=t.slice();return l[11]=e[n],l[13]=n,l}function mt(t,e,n){const l=t.slice();return l[11]=e[n],l[15]=n,l}function gt(t,e,n){const l=t.slice();return l[16]=e[n],l}function pt(t,e,n){const l=t.slice();return l[19]=e[n],l[15]=n,l}function vt(t,e,n){const l=t.slice();return l[16]=e[n],l}function bt(t,e,n){const l=t.slice();return l[19]=e[n],l[15]=n,l}function wt(t,e,n){const l=t.slice();return l[16]=e[n],l}function yt(t){let e,n;const l=[t[16],{position:`hit-area-${t[19]}`}];let r={};for(let o=0;o<l.length;o+=1)r=Oe(r,l[o]);return e=new xe({props:r}),e.$on("move",t[3]),{c(){K(e.$$.fragment)},l(o){Q(e.$$.fragment,o)},m(o,i){F(e,o,i),n=!0},p(o,i){const c=i&2?Ge(l,[Ke(o[16]),l[1]]):{};e.$set(c)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function Zn(t){let e,n,l=U(t[1][`hit-area-${t[19]}`]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=yt(wt(t,l,i));const o=i=>S(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=j()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=L(i)},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);N(i,e,c),n=!0},p(i,c){if(c&10){l=U(i[1][`hit-area-${i[19]}`]||[]);let s;for(s=0;s<l.length;s+=1){const f=wt(i,l,s);r[s]?(r[s].p(f,c),B(r[s],1)):(r[s]=yt(f),r[s].c(),B(r[s],1),r[s].m(e.parentNode,e))}for(de(),s=l.length;s<r.length;s+=1)o(s);he()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)S(r[c]);n=!1},d(i){i&&_(e),ae(r,i)}}}function kt(t){let e,n;return e=new Jt({props:{position:`hit-area-${t[19]}`,color:t[19],type:"hit",$$slots:{default:[Zn]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,r){F(e,l,r),n=!0},p(l,r){const o={};r&67108866&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){J(e,l)}}}function Dt(t){let e,n;const l=[t[16],{position:`out-area-${t[19]}`}];let r={};for(let o=0;o<l.length;o+=1)r=Oe(r,l[o]);return e=new xe({props:r}),e.$on("move",t[3]),{c(){K(e.$$.fragment)},l(o){Q(e.$$.fragment,o)},m(o,i){F(e,o,i),n=!0},p(o,i){const c=i&2?Ge(l,[Ke(o[16]),l[1]]):{};e.$set(c)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function Hn(t){let e,n,l=U(t[1][`out-area-${t[19]}`]||[]),r=[];for(let i=0;i<l.length;i+=1)r[i]=Dt(vt(t,l,i));const o=i=>S(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=j()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=L(i)},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);N(i,e,c),n=!0},p(i,c){if(c&10){l=U(i[1][`out-area-${i[19]}`]||[]);let s;for(s=0;s<l.length;s+=1){const f=vt(i,l,s);r[s]?(r[s].p(f,c),B(r[s],1)):(r[s]=Dt(f),r[s].c(),B(r[s],1),r[s].m(e.parentNode,e))}for(de(),s=l.length;s<r.length;s+=1)o(s);he()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)S(r[c]);n=!1},d(i){i&&_(e),ae(r,i)}}}function Et(t){let e,n;return e=new Jt({props:{position:`out-area-${t[19]}`,color:t[19],type:"out",$$slots:{default:[Hn]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,r){F(e,l,r),n=!0},p(l,r){const o={};r&67108866&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){J(e,l)}}}function Ct(t){let e,n,l=U(t[1][t[15]+t[13]*12]),r=[];for(let i=0;i<l.length;i+=1)r[i]=Pt(gt(t,l,i));const o=i=>S(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Me()},l(i){for(let c=0;c<r.length;c+=1)r[c].l(i);e=Me()},m(i,c){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,c);N(i,e,c),n=!0},p(i,c){if(c&10){l=U(i[1][i[15]+i[13]*12]);let s;for(s=0;s<l.length;s+=1){const f=gt(i,l,s);r[s]?(r[s].p(f,c),B(r[s],1)):(r[s]=Pt(f),r[s].c(),B(r[s],1),r[s].m(e.parentNode,e))}for(de(),s=l.length;s<r.length;s+=1)o(s);he()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)B(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)S(r[c]);n=!1},d(i){i&&_(e),ae(r,i)}}}function Pt(t){let e,n;const l=[t[16],{position:t[15]+t[13]*12}];let r={};for(let o=0;o<l.length;o+=1)r=Oe(r,l[o]);return e=new xe({props:r}),e.$on("move",t[3]),{c(){K(e.$$.fragment)},l(o){Q(e.$$.fragment,o)},m(o,i){F(e,o,i),n=!0},p(o,i){const c=i&2?Ge(l,[Ke(o[16]),l[1]]):{};e.$set(c)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function It(t){let e,n,l,r,o;n=new vn({props:{color:t[15]%2===0?"darkgrey":"grey",reversed:t[13]===0}});let i=t[1][t[15]+t[13]*12]&&Ct(t);return{c(){e=C("div"),K(n.$$.fragment),l=j(),r=C("div"),i&&i.c(),this.h()},l(c){e=I(c,"DIV",{class:!0,style:!0});var s=T(e);Q(n.$$.fragment,s),l=L(s),r=I(s,"DIV",{class:!0,"data-position":!0});var f=T(r);i&&i.l(f),f.forEach(_),s.forEach(_),this.h()},h(){v(r,"class","checkerContainer "+(t[13]===1&&"reversed")+" svelte-1mhnvbw"),v(r,"data-position",t[15]+t[13]*12),v(e,"class","triangle root-triangle svelte-1mhnvbw"),oe(e,"width",100/12+"%")},m(c,s){N(c,e,s),F(n,e,null),M(e,l),M(e,r),i&&i.m(r,null),o=!0},p(c,s){c[1][c[15]+c[13]*12]?i?(i.p(c,s),s&2&&B(i,1)):(i=Ct(c),i.c(),B(i,1),i.m(r,null)):i&&(de(),S(i,1,1,()=>{i=null}),he())},i(c){o||(B(n.$$.fragment,c),B(i),o=!0)},o(c){S(n.$$.fragment,c),S(i),o=!1},d(c){c&&_(e),J(n),i&&i.d()}}}function Nt(t){let e,n,l,r=U(Array.from({length:12})),o=[];for(let c=0;c<r.length;c+=1)o[c]=It(mt(t,r,c));const i=c=>S(o[c],1,1,()=>{o[c]=null});return{c(){e=C("div");for(let c=0;c<o.length;c+=1)o[c].c();n=j(),this.h()},l(c){e=I(c,"DIV",{class:!0});var s=T(e);for(let f=0;f<o.length;f+=1)o[f].l(s);n=L(s),s.forEach(_),this.h()},h(){v(e,"class","side "+(t[13]===0?"upper":"lower")+" svelte-1mhnvbw")},m(c,s){N(c,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);M(e,n),l=!0},p(c,s){if(s&10){r=U(Array.from({length:12}));let f;for(f=0;f<r.length;f+=1){const d=mt(c,r,f);o[f]?(o[f].p(d,s),B(o[f],1)):(o[f]=It(d),o[f].c(),B(o[f],1),o[f].m(e,n))}for(de(),f=r.length;f<o.length;f+=1)i(f);he()}},i(c){if(!l){for(let s=0;s<r.length;s+=1)B(o[s]);l=!0}},o(c){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)S(o[s]);l=!1},d(c){c&&_(e),ae(o,c)}}}function Un(t){let e,n,l,r,o,i,c="Geschlagen",s,f,d,u,a,D="Im Ziel",g,w,k,P,A,y,V,O,W;function p(m){t[6](m)}let $={};t[0]!==void 0&&($.forcedCheckerPositions=t[0]),n=new Xn({props:$}),te.push(()=>ve(n,"forcedCheckerPositions",p));let R=U(["white","black"]),z=[];for(let m=0;m<2;m+=1)z[m]=kt(bt(t,R,m));const ne=m=>S(z[m],1,1,()=>{z[m]=null});let Ee=U(["white","black"]),Y=[];for(let m=0;m<2;m+=1)Y[m]=Et(pt(t,Ee,m));const Ye=m=>S(Y[m],1,1,()=>{Y[m]=null});let ie=U(Array.from({length:2})),q=[];for(let m=0;m<ie.length;m+=1)q[m]=Nt(_t(t,ie,m));const H=m=>S(q[m],1,1,()=>{q[m]=null});return{c(){e=C("div"),K(n.$$.fragment),r=j(),o=C("div"),i=C("span"),i.textContent=c,s=j(),f=C("div");for(let m=0;m<2;m+=1)z[m].c();d=j(),u=C("div"),a=C("span"),a.textContent=D,g=j(),w=C("div");for(let m=0;m<2;m+=1)Y[m].c();k=j(),P=C("div"),A=C("div");for(let m=0;m<q.length;m+=1)q[m].c();V=j(),O=C("div"),this.h()},l(m){e=I(m,"DIV",{class:!0});var h=T(e);Q(n.$$.fragment,h),r=L(h),o=I(h,"DIV",{class:!0});var E=T(o);i=I(E,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(i)!=="svelte-1ko309i"&&(i.textContent=c),s=L(E),f=I(E,"DIV",{class:!0});var b=T(f);for(let x=0;x<2;x+=1)z[x].l(b);b.forEach(_),E.forEach(_),d=L(h),u=I(h,"DIV",{class:!0});var X=T(u);a=I(X,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(a)!=="svelte-15oige1"&&(a.textContent=D),g=L(X),w=I(X,"DIV",{class:!0});var fe=T(w);for(let x=0;x<2;x+=1)Y[x].l(fe);fe.forEach(_),X.forEach(_),h.forEach(_),k=L(m),P=I(m,"DIV",{class:!0});var be=T(P);A=I(be,"DIV",{class:!0});var me=T(A);for(let x=0;x<q.length;x+=1)q[x].l(me);me.forEach(_),be.forEach(_),V=L(m),O=I(m,"DIV",{class:!0}),T(O).forEach(_),this.h()},h(){v(i,"class","label svelte-1mhnvbw"),v(f,"class","boxes svelte-1mhnvbw"),v(o,"class","hit-area svelte-1mhnvbw"),v(a,"class","label svelte-1mhnvbw"),v(w,"class","boxes svelte-1mhnvbw"),v(u,"class","out-area svelte-1mhnvbw"),v(e,"class","side-area svelte-1mhnvbw"),v(A,"class",y="board "+t[2]+" svelte-1mhnvbw"),v(P,"class","main-area svelte-1mhnvbw"),v(O,"class","moving-checker-cache svelte-1mhnvbw")},m(m,h){N(m,e,h),F(n,e,null),M(e,r),M(e,o),M(o,i),M(o,s),M(o,f);for(let E=0;E<2;E+=1)z[E]&&z[E].m(f,null);M(e,d),M(e,u),M(u,a),M(u,g),M(u,w);for(let E=0;E<2;E+=1)Y[E]&&Y[E].m(w,null);N(m,k,h),N(m,P,h),M(P,A);for(let E=0;E<q.length;E+=1)q[E]&&q[E].m(A,null);N(m,V,h),N(m,O,h),W=!0},p(m,[h]){const E={};if(!l&&h&1&&(l=!0,E.forcedCheckerPositions=m[0],ge(()=>l=!1)),n.$set(E),h&10){R=U(["white","black"]);let b;for(b=0;b<2;b+=1){const X=bt(m,R,b);z[b]?(z[b].p(X,h),B(z[b],1)):(z[b]=kt(X),z[b].c(),B(z[b],1),z[b].m(f,null))}for(de(),b=2;b<2;b+=1)ne(b);he()}if(h&10){Ee=U(["white","black"]);let b;for(b=0;b<2;b+=1){const X=pt(m,Ee,b);Y[b]?(Y[b].p(X,h),B(Y[b],1)):(Y[b]=Et(X),Y[b].c(),B(Y[b],1),Y[b].m(w,null))}for(de(),b=2;b<2;b+=1)Ye(b);he()}if(h&10){ie=U(Array.from({length:2}));let b;for(b=0;b<ie.length;b+=1){const X=_t(m,ie,b);q[b]?(q[b].p(X,h),B(q[b],1)):(q[b]=Nt(X),q[b].c(),B(q[b],1),q[b].m(A,null))}for(de(),b=ie.length;b<q.length;b+=1)H(b);he()}(!W||h&4&&y!==(y="board "+m[2]+" svelte-1mhnvbw"))&&v(A,"class",y)},i(m){if(!W){B(n.$$.fragment,m);for(let h=0;h<2;h+=1)B(z[h]);for(let h=0;h<2;h+=1)B(Y[h]);for(let h=0;h<ie.length;h+=1)B(q[h]);W=!0}},o(m){S(n.$$.fragment,m),z=z.filter(Boolean);for(let h=0;h<2;h+=1)S(z[h]);Y=Y.filter(Boolean);for(let h=0;h<2;h+=1)S(Y[h]);q=q.filter(Boolean);for(let h=0;h<q.length;h+=1)S(q[h]);W=!1},d(m){m&&(_(e),_(k),_(P),_(V),_(O)),J(n),ae(z,m),ae(Y,m),ae(q,m)}}}function Rn(t,e,n){let l,r,o,i;G(t,qe,g=>n(7,r=g)),G(t,Te,g=>n(5,o=g)),G(t,Ut,g=>n(2,i=g));let c=null,s=Re.reduce((g,w)=>(g[w.position]||(g[w.position]=[]),g[w.position].push({id:w.id,color:w.color}),g),{});const f=Re.reduce((g,w)=>(g[w.id]={id:w.id,color:w.color},g),{}),d=(g,w,k)=>{const P=f[g];if(n(4,s[w]=s[w].filter(A=>A.id!==P.id),s),s[k]||n(4,s[k]=[],s),!s[k].length){s[k].push(P);return}if(s[k][0].color===P.color){s[k].push(P);return}if(s[k].length===1){d(s[k][0].id,k,`hit-area-${s[k][0].color}`),s[k].push(P);return}},u=({x:g,y:w})=>[...document.querySelectorAll(".checkerContainer")].map(A=>{const{left:y,top:V,width:O,height:W}=A.getBoundingClientRect();return{x:y+O/2,y:V+W/2,id:A.dataset.position}}).reduce((A,y)=>{const V=Math.sqrt(Math.pow(g-y.x,2)+Math.pow(w-y.y,2));return V<A.distance?{distance:V,...y}:A},{distance:1/0,id:null}).id,a=g=>{const{checker_id:w,start:k,coordinates:P,reset:A}=g.detail,y=f[w],V=u(P);if(k===V||!k.includes("hit")&&!k.includes("out")&&y.color==="white"&&Number(k)>Number(V)||!k.includes("hit")&&!k.includes("out")&&y.color==="black"&&Number(k)<Number(V)){A();return}const O={checker_id:w,start:k,end:V};Ot(qe,r={...r,[w]:O},r),d(w,k,V)};function D(g){c=g,n(0,c)}return t.$$.update=()=>{if(t.$$.dirty&32){const{moves:g}=o||{};if(g)for(const w of g)d(w.checker_id,w.start,w.end)}t.$$.dirty&17&&n(1,l=c||s)},[c,l,i,a,s,o,D]}class Fn extends ce{constructor(e){super(),se(this,e,Rn,Un,re,{})}}function Jn(t){let e,n,l;return n=new Fn({}),{c(){e=C("div"),K(n.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var o=T(e);Q(n.$$.fragment,o),o.forEach(_),this.h()},h(){v(e,"class","game svelte-ze3agv")},m(r,o){N(r,e,o),F(n,e,null),l=!0},p:Z,i(r){l||(B(n.$$.fragment,r),l=!0)},o(r){S(n.$$.fragment,r),l=!1},d(r){r&&_(e),J(n)}}}class Gn extends ce{constructor(e){super(),se(this,e,null,Jn,re,{})}}new Gn({target:document.getElementById("app")});

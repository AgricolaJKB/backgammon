var Bt=Object.defineProperty;var Ot=(t,e,n)=>e in t?Bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>Ot(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function j(){}function Pt(t,e){for(const n in e)t[n]=e[n];return t}function mt(t){return t()}function Ue(){return Object.create(null)}function re(t){t.forEach(mt)}function qe(t){return typeof t=="function"}function x(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Mt(t){return Object.keys(t).length===0}function gt(t,...e){if(t==null){for(const l of e)l(void 0);return j}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function H(t,e,n){t.$$.on_destroy.push(gt(e,n))}function qt(t,e,n,l){if(t){const i=pt(t,e,n,l);return t[0](i)}}function pt(t,e,n,l){return t[1]&&l?Pt(n.ctx.slice(),t[1](l(e))):n.ctx}function Lt(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],r=Math.max(e.dirty.length,i.length);for(let c=0;c<r;c+=1)o[c]=e.dirty[c]|i[c];return o}return e.dirty|i}return e.dirty}function Tt(t,e,n,l,i,o){if(i){const r=pt(e,n,l,o);t.p(r,i)}}function zt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function jt(t,e,n){return t.set(n),e}let Ae=!1;function Xt(){Ae=!0}function Yt(){Ae=!1}function Rt(t,e,n,l){for(;t<e;){const i=t+(e-t>>1);n(i)<=l?t=i+1:e=i}return t}function Wt(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const s=[];for(let f=0;f<e.length;f++){const d=e[f];d.claim_order!==void 0&&s.push(d)}e=s}const n=new Int32Array(e.length+1),l=new Int32Array(e.length);n[0]=-1;let i=0;for(let s=0;s<e.length;s++){const f=e[s].claim_order,d=(i>0&&e[n[i]].claim_order<=f?i+1:Rt(1,i,g=>e[n[g]].claim_order,f))-1;l[s]=n[d]+1;const a=d+1;n[a]=s,i=Math.max(a,i)}const o=[],r=[];let c=e.length-1;for(let s=n[i]+1;s!=0;s=l[s-1]){for(o.push(e[s-1]);c>=s;c--)r.push(e[c]);c--}for(;c>=0;c--)r.push(e[c]);o.reverse(),r.sort((s,f)=>s.claim_order-f.claim_order);for(let s=0,f=0;s<r.length;s++){for(;f<o.length&&r[s].claim_order>=o[f].claim_order;)f++;const d=f<o.length?o[f]:null;t.insertBefore(r[s],d)}}function Ut(t,e){t.appendChild(e)}function S(t,e){if(Ae){for(Wt(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function I(t,e,n){Ae&&!n?S(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function Ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ee(t){return document.createTextNode(t)}function T(){return ee(" ")}function he(){return ee("")}function ue(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ve(t){return t.dataset.svelteH}function N(t){return Array.from(t.childNodes)}function Zt(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function vt(t,e,n,l,i=!1){Zt(t);const o=(()=>{for(let r=t.claim_info.last_index;r<t.length;r++){const c=t[r];if(e(c)){const s=n(c);return s===void 0?t.splice(r,1):t[r]=s,i||(t.claim_info.last_index=r),c}}for(let r=t.claim_info.last_index-1;r>=0;r--){const c=t[r];if(e(c)){const s=n(c);return s===void 0?t.splice(r,1):t[r]=s,i?s===void 0&&t.claim_info.last_index--:t.claim_info.last_index=r,c}}return l()})();return o.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,o}function bt(t,e,n,l){return vt(t,i=>i.nodeName===e,i=>{const o=[];for(let r=0;r<i.attributes.length;r++){const c=i.attributes[r];n[c.name]||o.push(c.name)}o.forEach(r=>i.removeAttribute(r))},()=>l(e))}function D(t,e,n){return bt(t,e,n,C)}function Le(t,e,n){return bt(t,e,n,Ne)}function _e(t,e){return vt(t,n=>n.nodeType===3,n=>{const l=""+e;if(n.data.startsWith(l)){if(n.data.length!==l.length)return n.splitText(l.length)}else n.data=l},()=>ee(e),!0)}function z(t){return _e(t," ")}function Te(t,e){e=""+e,t.data!==e&&(t.data=e)}function R(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let Ee;function Ht(){if(Ee===void 0){Ee=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ee=!0}}return Ee}function Jt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const l=C("iframe");l.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),l.setAttribute("aria-hidden","true"),l.tabIndex=-1;const i=Ht();let o;return i?(l.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=ue(window,"message",r=>{r.source===l.contentWindow&&e()})):(l.src="about:blank",l.onload=()=>{o=ue(l.contentWindow,"resize",e),e()}),Ut(t,l),()=>{(i||o&&l.contentWindow)&&o(),u(l)}}function Ft(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let be;function me(t){be=t}function wt(){if(!be)throw new Error("Function called outside component initialization");return be}function kt(t){wt().$$.on_mount.push(t)}function yt(){const t=wt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=Ft(e,n,{cancelable:l});return i.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}const fe=[],we=[];let de=[];const Oe=[],Gt=Promise.resolve();let Pe=!1;function Kt(){Pe||(Pe=!0,Gt.then(Ct))}function Ie(t){de.push(t)}function Ze(t){Oe.push(t)}const Be=new Set;let se=0;function Ct(){if(se!==0)return;const t=be;do{try{for(;se<fe.length;){const e=fe[se];se++,me(e),Qt(e.$$)}}catch(e){throw fe.length=0,se=0,e}for(me(null),fe.length=0,se=0;we.length;)we.pop()();for(let e=0;e<de.length;e+=1){const n=de[e];Be.has(n)||(Be.add(n),n())}de.length=0}while(fe.length);for(;Oe.length;)Oe.pop()();Pe=!1,Be.clear(),me(t)}function Qt(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ie)}}function $t(t){const e=[],n=[];de.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),de=e}const De=new Set;let ie;function ge(){ie={r:0,c:[],p:ie}}function pe(){ie.r||re(ie.c),ie=ie.p}function B(t,e){t&&t.i&&(De.delete(t),t.i(e))}function q(t,e,n,l){if(t&&t.o){if(De.has(t))return;De.add(t),ie.c.push(()=>{De.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function W(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function G(t){t&&t.c()}function K(t,e){t&&t.l(e)}function J(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),Ie(()=>{const o=t.$$.on_mount.map(mt).filter(qe);t.$$.on_destroy?t.$$.on_destroy.push(...o):re(o),t.$$.on_mount=[]}),i.forEach(Ie)}function F(t,e){const n=t.$$;n.fragment!==null&&($t(n.after_update),re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xt(t,e){t.$$.dirty[0]===-1&&(fe.push(t),Kt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function te(t,e,n,l,i,o,r=null,c=[-1]){const s=be;me(t);const f=t.$$={fragment:null,ctx:[],props:o,update:j,not_equal:i,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Ue(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};r&&r(f.root);let d=!1;if(f.ctx=n?n(t,e.props||{},(a,g,...y)=>{const h=y.length?y[0]:g;return f.ctx&&i(f.ctx[a],f.ctx[a]=h)&&(!f.skip_bound&&f.bound[a]&&f.bound[a](h),d&&xt(t,a)),g}):[],f.update(),d=!0,re(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){Xt();const a=N(e.target);f.fragment&&f.fragment.l(a),a.forEach(u)}else f.fragment&&f.fragment.c();e.intro&&B(t.$$.fragment),J(t,e.target,e.anchor),Yt(),Ct()}me(s)}class ne{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){F(this,1),this.$destroy=j}$on(e,n){if(!qe(n))return j;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Mt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const en="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(en);function tn(t){let e,n;return{c(){e=Ne("polygon"),this.h()},l(l){e=Le(l,"polygon",{points:!0,fill:!0}),N(e).forEach(u),this.h()},h(){p(e,"points",n="0,"+t[3]+" "+t[2]+","+t[3]+" "+t[2]/2+",0"),p(e,"fill",t[0])},m(l,i){I(l,e,i)},p(l,i){i&12&&n!==(n="0,"+l[3]+" "+l[2]+","+l[3]+" "+l[2]/2+",0")&&p(e,"points",n),i&1&&p(e,"fill",l[0])},d(l){l&&u(e)}}}function nn(t){let e,n;return{c(){e=Ne("polygon"),this.h()},l(l){e=Le(l,"polygon",{points:!0,fill:!0}),N(e).forEach(u),this.h()},h(){p(e,"points",n="0,0 "+t[2]+",0 "+t[2]/2+","+t[3]),p(e,"fill",t[0])},m(l,i){I(l,e,i)},p(l,i){i&12&&n!==(n="0,0 "+l[2]+",0 "+l[2]/2+","+l[3])&&p(e,"points",n),i&1&&p(e,"fill",l[0])},d(l){l&&u(e)}}}function ln(t){let e,n,l;function i(c,s){return c[1]?nn:tn}let o=i(t),r=o(t);return{c(){e=C("div"),n=Ne("svg"),r.c(),this.h()},l(c){e=D(c,"DIV",{class:!0});var s=N(e);n=Le(s,"svg",{class:!0});var f=N(n);r.l(f),f.forEach(u),s.forEach(u),this.h()},h(){p(n,"class","svelte-18d6l3w"),p(e,"class","container svelte-18d6l3w"),Ie(()=>t[4].call(e))},m(c,s){I(c,e,s),S(e,n),r.m(n,null),l=Jt(e,t[4].bind(e))},p(c,[s]){o===(o=i(c))&&r?r.p(c,s):(r.d(1),r=o(c),r&&(r.c(),r.m(n,null)))},i:j,o:j,d(c){c&&u(e),r.d(),l()}}}function rn(t,e,n){let{color:l}=e,{reversed:i=!1}=e,o,r;function c(){o=this.clientWidth,r=this.clientHeight,n(2,o),n(3,r)}return t.$$set=s=>{"color"in s&&n(0,l=s.color),"reversed"in s&&n(1,i=s.reversed)},[l,i,o,r,c]}class on extends ne{constructor(e){super(),te(this,e,rn,ln,x,{color:0,reversed:1})}}function sn(t){let e,n,l,i,o;const r=t[15].default,c=qt(r,t,t[14],null);return{c(){e=C("div"),c&&c.c(),this.h()},l(s){e=D(s,"DIV",{id:!0,style:!0,class:!0});var f=N(e);c&&c.l(f),f.forEach(u),this.h()},h(){p(e,"id",t[2]),R(e,"transform","translate("+t[3]+"px, "+t[4]+"px)"),p(e,"class",n="draggable "+(t[1]&&"deactivated")+" "+(t[5]&&"moving")+" svelte-1nblwkq")},m(s,f){I(s,e,f),c&&c.m(e,null),t[16](e),l=!0,i||(o=[ue(window,"mousemove",t[7]),ue(e,"mousedown",t[6]),ue(e,"mouseup",t[8])],i=!0)},p(s,[f]){c&&c.p&&(!l||f&16384)&&Tt(c,r,s,s[14],l?Lt(r,s[14],f,null):zt(s[14]),null),(!l||f&4)&&p(e,"id",s[2]),(!l||f&24)&&R(e,"transform","translate("+s[3]+"px, "+s[4]+"px)"),(!l||f&34&&n!==(n="draggable "+(s[1]&&"deactivated")+" "+(s[5]&&"moving")+" svelte-1nblwkq"))&&p(e,"class",n)},i(s){l||(B(c,s),l=!0)},o(s){q(c,s),l=!1},d(s){s&&u(e),c&&c.d(s),t[16](null),i=!1,re(o)}}}function cn(t,e,n){let{$$slots:l={},$$scope:i}=e;const o=yt();let{maxDrag:r=[1/0,1/0]}=e,{resetAfterDrag:c=!1}=e,{deactivated:s=!1}=e,{invertX:f=!1}=e,{invertY:d=!1}=e,{el:a=null}=e,{id:g=null}=e,y=0,h=0,v=!1;function w(){s||(n(5,v=!0),o("dragstart"))}function b(A){v&&(n(3,y+=(f?-1:1)*A.movementX),n(4,h+=(d?-1:1)*A.movementY)),r&&(y>r[0]||y<-r[0]||h>r[1]||h<-r[1])&&O()}function O(){n(5,v=!1),o("dragend"),c&&(n(3,y=0),n(4,h=0))}const E=()=>{n(3,y=0),n(4,h=0)};function L(A){we[A?"unshift":"push"](()=>{a=A,n(0,a)})}return t.$$set=A=>{"maxDrag"in A&&n(9,r=A.maxDrag),"resetAfterDrag"in A&&n(10,c=A.resetAfterDrag),"deactivated"in A&&n(1,s=A.deactivated),"invertX"in A&&n(11,f=A.invertX),"invertY"in A&&n(12,d=A.invertY),"el"in A&&n(0,a=A.el),"id"in A&&n(2,g=A.id),"$$scope"in A&&n(14,i=A.$$scope)},[a,s,g,y,h,v,w,b,O,r,c,f,d,E,i,l,L]}class Et extends ne{constructor(e){super(),te(this,e,cn,sn,x,{maxDrag:9,resetAfterDrag:10,deactivated:1,invertX:11,invertY:12,el:0,id:2,reset:13})}get reset(){return this.$$.ctx[13]}}function fn(t){let e,n;return{c(){e=C("div"),this.h()},l(l){e=D(l,"DIV",{class:!0,style:!0}),N(e).forEach(u),this.h()},h(){p(e,"class",n="checker "+t[1]+" svelte-sa5qp3"),R(e,"background-color",t[1]),R(e,"border","1px solid black")},m(l,i){I(l,e,i)},p(l,i){i&2&&n!==(n="checker "+l[1]+" svelte-sa5qp3")&&p(e,"class",n),i&2&&R(e,"background-color",l[1])},d(l){l&&u(e)}}}function an(t){let e,n,l,i;function o(s){t[11](s)}function r(s){t[12](s)}let c={id:t[0],deactivated:!t[2],$$slots:{default:[fn]},$$scope:{ctx:t}};return t[3]!==void 0&&(c.el=t[3]),t[4]!==void 0&&(c.reset=t[4]),e=new Et({props:c}),we.push(()=>He(e,"el",o)),we.push(()=>He(e,"reset",r)),e.$on("dragstart",t[5]),e.$on("dragend",t[6]),{c(){G(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,f){J(e,s,f),i=!0},p(s,[f]){const d={};f&1&&(d.id=s[0]),f&4&&(d.deactivated=!s[2]),f&65538&&(d.$$scope={dirty:f,ctx:s}),!n&&f&8&&(n=!0,d.el=s[3],Ze(()=>n=!1)),!l&&f&16&&(l=!0,d.reset=s[4],Ze(()=>l=!1)),e.$set(d)},i(s){i||(B(e.$$.fragment,s),i=!0)},o(s){q(e.$$.fragment,s),i=!1},d(s){F(e,s)}}}function un(t,e,n){let{id:l}=e,{position:i}=e,{color:o}=e,{triangleCentroids:r}=e,{draggable:c=!1}=e,{invertX:s=!1}=e,{invertY:f=!1}=e;const d=yt();let a,g,y=()=>{},h;kt(()=>{g=document.querySelector(".moving-checker-cache")});const v=()=>{h=a.parentElement;const{left:E,top:L}=a.getBoundingClientRect();g.appendChild(a),n(3,a.style.position="absolute",a),n(3,a.style.left=`${E}px`,a),n(3,a.style.top=`${L}px`,a),g.style.pointerEvents="auto"},w=()=>{if(!r)return;const{left:E,top:L,width:A,height:Y}=a.getBoundingClientRect(),Q={x:E+A/2,y:L+Y/2},V=r.reduce((oe,$)=>{const M=Math.sqrt(Math.pow(Q.x-$.x,2)+Math.pow(Q.y-$.y,2));return M<oe.distance?{distance:M,...$}:oe},{distance:1/0,triangle:null});if(console.log(V),!V.occupiedBy||V.occupiedBy===o)d("move",{checker_id:l,start:i,end:Number(V.triangle.dataset.position)});else if(V.length===1&&V.occupiedBy!==o){const oe=document.querySelector(`.hit.${o==="white"?"black":"white"}`),$=V.checkersContainer.children[0];d("move",{checker_id:$.id,start:Number(V.triangle.dataset.position),end:Number(oe.dataset.position)}),d("move",{checker_id:l,start:i,end:Number(V.triangle.dataset.position)})}else h.appendChild(a);y(),g.style.pointerEvents="none",n(3,a.style.position="static",a)};function b(E){a=E,n(3,a)}function O(E){y=E,n(4,y)}return t.$$set=E=>{"id"in E&&n(0,l=E.id),"position"in E&&n(7,i=E.position),"color"in E&&n(1,o=E.color),"triangleCentroids"in E&&n(8,r=E.triangleCentroids),"draggable"in E&&n(2,c=E.draggable),"invertX"in E&&n(9,s=E.invertX),"invertY"in E&&n(10,f=E.invertY)},[l,o,c,a,y,v,w,i,r,s,f,b,O]}class dn extends ne{constructor(e){super(),te(this,e,un,an,x,{id:0,position:7,color:1,triangleCentroids:8,draggable:2,invertX:9,invertY:10})}}function hn(t){let e,n="?";return{c(){e=C("span"),e.textContent=n,this.h()},l(l){e=D(l,"SPAN",{class:!0,"data-svelte-h":!0}),ve(e)!=="svelte-1p91mot"&&(e.textContent=n),this.h()},h(){p(e,"class","svelte-a1rwuv")},m(l,i){I(l,e,i)},p:j,d(l){l&&u(e)}}}function _n(t){let e=[1,3,5].includes(t[0]),n,l=[2,3,4,5,6].includes(t[0]),i,o=[4,5,6].includes(t[0]),r,c,s=e&&Je(),f=l&&Fe(),d=o&&Ge(),a=t[0]===6&&Ke();return{c(){s&&s.c(),n=T(),f&&f.c(),i=T(),d&&d.c(),r=T(),a&&a.c(),c=he()},l(g){s&&s.l(g),n=z(g),f&&f.l(g),i=z(g),d&&d.l(g),r=z(g),a&&a.l(g),c=he()},m(g,y){s&&s.m(g,y),I(g,n,y),f&&f.m(g,y),I(g,i,y),d&&d.m(g,y),I(g,r,y),a&&a.m(g,y),I(g,c,y)},p(g,y){y&1&&(e=[1,3,5].includes(g[0])),e?s||(s=Je(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),y&1&&(l=[2,3,4,5,6].includes(g[0])),l?f||(f=Fe(),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null),y&1&&(o=[4,5,6].includes(g[0])),o?d||(d=Ge(),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),g[0]===6?a||(a=Ke(),a.c(),a.m(c.parentNode,c)):a&&(a.d(1),a=null)},d(g){g&&(u(n),u(i),u(r),u(c)),s&&s.d(g),f&&f.d(g),d&&d.d(g),a&&a.d(g)}}}function Je(t){let e;return{c(){e=C("div"),this.h()},l(n){e=D(n,"DIV",{class:!0}),N(e).forEach(u),this.h()},h(){p(e,"class","dot center svelte-a1rwuv")},m(n,l){I(n,e,l)},d(n){n&&u(e)}}}function Fe(t){let e,n,l;return{c(){e=C("div"),n=T(),l=C("div"),this.h()},l(i){e=D(i,"DIV",{class:!0}),N(e).forEach(u),n=z(i),l=D(i,"DIV",{class:!0}),N(l).forEach(u),this.h()},h(){p(e,"class","dot top-left svelte-a1rwuv"),p(l,"class","dot bottom-right svelte-a1rwuv")},m(i,o){I(i,e,o),I(i,n,o),I(i,l,o)},d(i){i&&(u(e),u(n),u(l))}}}function Ge(t){let e,n,l;return{c(){e=C("div"),n=T(),l=C("div"),this.h()},l(i){e=D(i,"DIV",{class:!0}),N(e).forEach(u),n=z(i),l=D(i,"DIV",{class:!0}),N(l).forEach(u),this.h()},h(){p(e,"class","dot top-right svelte-a1rwuv"),p(l,"class","dot bottom-left svelte-a1rwuv")},m(i,o){I(i,e,o),I(i,n,o),I(i,l,o)},d(i){i&&(u(e),u(n),u(l))}}}function Ke(t){let e,n,l;return{c(){e=C("div"),n=T(),l=C("div"),this.h()},l(i){e=D(i,"DIV",{class:!0}),N(e).forEach(u),n=z(i),l=D(i,"DIV",{class:!0}),N(l).forEach(u),this.h()},h(){p(e,"class","dot center-left svelte-a1rwuv"),p(l,"class","dot center-right svelte-a1rwuv")},m(i,o){I(i,e,o),I(i,n,o),I(i,l,o)},d(i){i&&(u(e),u(n),u(l))}}}function mn(t){let e;function n(o,r){return o[0]?_n:hn}let l=n(t),i=l(t);return{c(){e=C("div"),i.c(),this.h()},l(o){e=D(o,"DIV",{class:!0});var r=N(e);i.l(r),r.forEach(u),this.h()},h(){p(e,"class","dice svelte-a1rwuv")},m(o,r){I(o,e,r),i.m(e,null)},p(o,[r]){l===(l=n(o))&&i?i.p(o,r):(i.d(1),i=l(o),i&&(i.c(),i.m(e,null)))},i:j,o:j,d(o){o&&u(e),i.d()}}}function gn(t,e,n){let{number:l}=e;return t.$$set=i=>{"number"in i&&n(0,l=i.number)},[l]}class Qe extends ne{constructor(e){super(),te(this,e,gn,mn,x,{number:0})}}const ce=[];function ke(t,e){return{subscribe:Dt(t,e).subscribe}}function Dt(t,e=j){let n;const l=new Set;function i(c){if(x(t,c)&&(t=c,n)){const s=!ce.length;for(const f of l)f[1](),ce.push(f,t);if(s){for(let f=0;f<ce.length;f+=2)ce[f][0](ce[f+1]);ce.length=0}}}function o(c){i(c(t))}function r(c,s=j){const f=[c,s];return l.add(f),l.size===1&&(n=e(i,o)||j),c(t),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:r}}function ze(t,e,n){const l=!Array.isArray(t),i=l?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return ke(n,(r,c)=>{let s=!1;const f=[];let d=0,a=j;const g=()=>{if(d)return;a();const h=e(l?f[0]:f,r,c);o?r(h):a=qe(h)?h:j},y=i.map((h,v)=>gt(h,w=>{f[v]=w,d&=~(1<<v),s&&g()},()=>{d|=1<<v}));return s=!0,g(),function(){re(y),a(),s=!1}})}const pn="https://agricola.uber.space/backgammon/backend",je=pn,vn=async(t="test")=>await(await fetch(`${je}/${t}`)).json(),bn=async(t="test")=>{const n=await(await fetch(`${je}/${t}/roll`)).json(),l=n.throws[n.throws.length-1];return[l.dice1,l.dice2]},wn=async(t="test",e)=>await(await fetch(`${je}/${t}/moves`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text(),Se=t=>new URL(window.location.href).searchParams.get(t),kn=ke(!1,t=>{const e=Se("debug");t(e==="true")}),It=ke(null,(t,e)=>{const n=Se("user")||"white";t(n)}),yn=ke(null,(t,e)=>{const n=Se("game")||"test";t(n)}),Me=Dt({});let $e=null;const Xe=ke(null,(t,e)=>{const n=Se("game")||"test",l=setInterval(async()=>{const i=await vn(n);JSON.stringify(i)!==$e&&(t(i),$e=JSON.stringify(i))},1e3);return()=>clearInterval(l)}),Ye=ze(Xe,t=>{var n;return t?(((n=t.moves[t.moves.length-1])==null?void 0:n.player)||"b")==="w"?"black":"white":null}),Cn=ze(Xe,t=>{if(!t)return[null,null];const e=t.moves[t.moves.length-1],n=t.throws[t.throws.length-1];return e&&e.turn===n.turn?[null,null]:[(n==null?void 0:n.dice1)||null,(n==null?void 0:n.dice2)||null]}),At=ze([Ye,It],([t,e])=>t===e);function xe(t){let e,n="Zieh die Würfel mit der Maus, um zu würfeln";return{c(){e=C("span"),e.textContent=n},l(l){e=D(l,"SPAN",{"data-svelte-h":!0}),ve(e)!=="svelte-muv9mm"&&(e.textContent=n)},m(l,i){I(l,e,i)},d(l){l&&u(e)}}}function En(t){let e,n,l,i,o;return n=new Qe({props:{number:t[0][0]}}),i=new Qe({props:{number:t[0][1]}}),{c(){e=C("div"),G(n.$$.fragment),l=T(),G(i.$$.fragment),this.h()},l(r){e=D(r,"DIV",{class:!0});var c=N(e);K(n.$$.fragment,c),l=z(c),K(i.$$.fragment,c),c.forEach(u),this.h()},h(){p(e,"class","dices svelte-x530cv")},m(r,c){I(r,e,c),J(n,e,null),S(e,l),J(i,e,null),o=!0},p(r,c){const s={};c&1&&(s.number=r[0][0]),n.$set(s);const f={};c&1&&(f.number=r[0][1]),i.$set(f)},i(r){o||(B(n.$$.fragment,r),B(i.$$.fragment,r),o=!0)},o(r){q(n.$$.fragment,r),q(i.$$.fragment,r),o=!1},d(r){r&&u(e),F(n),F(i)}}}function et(t){let e,n,l="Zug beenden",i,o;return{c(){e=C("div"),n=C("button"),n.textContent=l,this.h()},l(r){e=D(r,"DIV",{class:!0});var c=N(e);n=D(c,"BUTTON",{"data-svelte-h":!0}),ve(n)!=="svelte-1gt0av7"&&(n.textContent=l),c.forEach(u),this.h()},h(){p(e,"class","actions svelte-x530cv")},m(r,c){I(r,e,c),S(e,n),i||(o=ue(n,"click",t[4]),i=!0)},p:j,d(r){r&&u(e),i=!1,o()}}}function Dn(t){let e,n,l,i=t[1]==="white"?"Weiß":"Schwarz",o,r,c,s,f,d,a,g,y,h=!t[0][0]&&!t[0][1]&&t[2]&&xe();a=new Et({props:{maxDrag:[150,150],resetAfterDrag:!0,deactivated:t[0][0]||!t[2],$$slots:{default:[En]},$$scope:{ctx:t}}}),a.$on("dragend",t[3]);let v=t[0][0]&&t[0][1]&&t[2]&&et(t);return{c(){e=C("div"),n=C("div"),l=C("p"),o=ee(i),r=ee(" ist am Zug"),s=T(),f=C("div"),h&&h.c(),d=T(),G(a.$$.fragment),g=T(),v&&v.c(),this.h()},l(w){e=D(w,"DIV",{class:!0});var b=N(e);n=D(b,"DIV",{class:!0});var O=N(n);l=D(O,"P",{class:!0});var E=N(l);o=_e(E,i),r=_e(E," ist am Zug"),E.forEach(u),O.forEach(u),s=z(b),f=D(b,"DIV",{class:!0});var L=N(f);h&&h.l(L),d=z(L),K(a.$$.fragment,L),L.forEach(u),g=z(b),v&&v.l(b),b.forEach(u),this.h()},h(){p(l,"class","svelte-x530cv"),p(n,"class",c="info "+t[1]+" svelte-x530cv"),p(f,"class","dice-container svelte-x530cv"),p(e,"class","container svelte-x530cv")},m(w,b){I(w,e,b),S(e,n),S(n,l),S(l,o),S(l,r),S(e,s),S(e,f),h&&h.m(f,null),S(f,d),J(a,f,null),S(e,g),v&&v.m(e,null),y=!0},p(w,[b]){(!y||b&2)&&i!==(i=w[1]==="white"?"Weiß":"Schwarz")&&Te(o,i),(!y||b&2&&c!==(c="info "+w[1]+" svelte-x530cv"))&&p(n,"class",c),!w[0][0]&&!w[0][1]&&w[2]?h||(h=xe(),h.c(),h.m(f,d)):h&&(h.d(1),h=null);const O={};b&5&&(O.deactivated=w[0][0]||!w[2]),b&257&&(O.$$scope={dirty:b,ctx:w}),a.$set(O),w[0][0]&&w[0][1]&&w[2]?v?v.p(w,b):(v=et(w),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i(w){y||(B(a.$$.fragment,w),y=!0)},o(w){q(a.$$.fragment,w),y=!1},d(w){w&&u(e),h&&h.d(),F(a),v&&v.d()}}}function In(t,e,n){let l,i,o,r,c;H(t,Me,a=>n(6,l=a)),H(t,yn,a=>n(7,i=a)),H(t,Cn,a=>n(5,o=a)),H(t,Ye,a=>n(1,r=a)),H(t,At,a=>n(2,c=a));let s=o;const f=async()=>{n(0,s=await bn(i))},d=async()=>{const a=await wn(i,Object.values(l));console.log(a)};return t.$$.update=()=>{t.$$.dirty&32&&n(0,s=o)},[s,r,c,f,d,o]}class An extends ne{constructor(e){super(),te(this,e,In,Dn,x,{})}}function tt(t){let e,n,l=t[3]-3+"",i;return{c(){e=C("span"),n=ee("+"),i=ee(l),this.h()},l(o){e=D(o,"SPAN",{class:!0});var r=N(e);n=_e(r,"+"),i=_e(r,l),r.forEach(u),this.h()},h(){p(e,"class","bottom-info svelte-1rxh22a")},m(o,r){I(o,e,r),S(e,n),S(e,i)},p(o,r){r&8&&l!==(l=o[3]-3+"")&&Te(i,l)},d(o){o&&u(e)}}}function Nn(t){let e,n,l,i,o,r=t[3]>3&&tt(t);return{c(){e=C("div"),n=C("span"),i=T(),r&&r.c(),this.h()},l(c){e=D(c,"DIV",{class:!0,"data-position":!0});var s=N(e);n=D(s,"SPAN",{class:!0}),N(n).forEach(u),i=z(s),r&&r.l(s),s.forEach(u),this.h()},h(){p(n,"class",l="label "+t[1]+" svelte-1rxh22a"),p(e,"class",o=t[1]+" checkerContainer "+t[2]+" box svelte-1rxh22a"),p(e,"data-position",t[0])},m(c,s){I(c,e,s),S(e,n),S(e,i),r&&r.m(e,null)},p(c,[s]){s&2&&l!==(l="label "+c[1]+" svelte-1rxh22a")&&p(n,"class",l),c[3]>3?r?r.p(c,s):(r=tt(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null),s&6&&o!==(o=c[1]+" checkerContainer "+c[2]+" box svelte-1rxh22a")&&p(e,"class",o),s&1&&p(e,"data-position",c[0])},i:j,o:j,d(c){c&&u(e),r&&r.d()}}}function Sn(t,e,n){let{position:l}=e,{color:i}=e,{type:o}=e,{numberOfChildren:r}=e;return t.$$set=c=>{"position"in c&&n(0,l=c.position),"color"in c&&n(1,i=c.color),"type"in c&&n(2,o=c.type),"numberOfChildren"in c&&n(3,r=c.numberOfChildren)},[l,i,o,r]}class Nt extends ne{constructor(e){super(),te(this,e,Sn,Nn,x,{position:0,color:1,type:2,numberOfChildren:3})}}const Vn=[{position:0,color:"white",id:"0-0"},{position:0,color:"white",id:"0-1"},{position:5,color:"black",id:"5-0"},{position:5,color:"black",id:"5-1"},{position:5,color:"black",id:"5-2"},{position:5,color:"black",id:"5-3"},{position:5,color:"black",id:"5-4"},{position:7,color:"black",id:"7-0"},{position:7,color:"black",id:"7-1"},{position:7,color:"black",id:"7-2"},{position:11,color:"white",id:"11-0"},{position:11,color:"white",id:"11-1"},{position:11,color:"white",id:"11-2"},{position:11,color:"white",id:"11-3"},{position:11,color:"white",id:"11-4"},{position:12,color:"black",id:"12-0"},{position:12,color:"black",id:"12-1"},{position:12,color:"black",id:"12-2"},{position:12,color:"black",id:"12-3"},{position:12,color:"black",id:"12-4"},{position:16,color:"white",id:"16-0"},{position:16,color:"white",id:"16-1"},{position:16,color:"white",id:"16-2"},{position:18,color:"white",id:"18-0"},{position:18,color:"white",id:"18-1"},{position:18,color:"white",id:"18-2"},{position:18,color:"white",id:"18-3"},{position:18,color:"white",id:"18-4"},{position:23,color:"black",id:"23-0"},{position:23,color:"black",id:"23-1"}];function nt(t,e,n){const l=t.slice();return l[11]=e[n].x,l[12]=e[n].y,l[13]=e[n].triangle,l[15]=n,l}function lt(t,e,n){const l=t.slice();return l[16]=e[n],l[18]=n,l}function it(t,e,n){const l=t.slice();return l[16]=e[n],l[15]=n,l}function rt(t,e,n){const l=t.slice();return l[20]=e[n],l}function ot(t,e,n){const l=t.slice();return l[23]=e[n],l[15]=n,l}function st(t,e,n){const l=t.slice();return l[23]=e[n],l[15]=n,l}function ct(t){var l;let e,n;return e=new Nt({props:{position:24+t[15],color:t[23],type:"hit",numberOfChildren:t[0]&&((l=t[0][24+t[15]])==null?void 0:l.length)}}),{c(){G(e.$$.fragment)},l(i){K(e.$$.fragment,i)},m(i,o){J(e,i,o),n=!0},p(i,o){var c;const r={};o&1&&(r.numberOfChildren=i[0]&&((c=i[0][24+i[15]])==null?void 0:c.length)),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function ft(t){var l;let e,n;return e=new Nt({props:{position:26+t[15],color:t[23],type:"out",numberOfChildren:t[0]&&((l=t[0][26+t[15]])==null?void 0:l.length)}}),{c(){G(e.$$.fragment)},l(i){K(e.$$.fragment,i)},m(i,o){J(e,i,o),n=!0},p(i,o){var c;const r={};o&1&&(r.numberOfChildren=i[0]&&((c=i[0][26+i[15]])==null?void 0:c.length)),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Bn(t){let e,n,l=W(t[5][t[15]+t[18]*12].checkers),i=[];for(let r=0;r<l.length;r+=1)i[r]=at(rt(t,l,r));const o=r=>q(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=he()},l(r){for(let c=0;c<i.length;c+=1)i[c].l(r);e=he()},m(r,c){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(r,c);I(r,e,c),n=!0},p(r,c){if(c&111){l=W(r[5][r[15]+r[18]*12].checkers);let s;for(s=0;s<l.length;s+=1){const f=rt(r,l,s);i[s]?(i[s].p(f,c),B(i[s],1)):(i[s]=at(f),i[s].c(),B(i[s],1),i[s].m(e.parentNode,e))}for(ge(),s=l.length;s<i.length;s+=1)o(s);pe()}},i(r){if(!n){for(let c=0;c<l.length;c+=1)B(i[c]);n=!0}},o(r){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)q(i[c]);n=!1},d(r){r&&u(e),ae(i,r)}}}function at(t){let e,n;return e=new dn({props:{id:t[20],position:t[15]+t[18]*12,color:t[5][t[15]+t[18]*12].color,draggable:t[5][t[15]+t[18]*12].color===t[2]&&t[3],triangleCentroids:t[0],invertX:t[1]==="black",invertY:t[1]==="black"}}),e.$on("move",t[6]),{c(){G(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,i){J(e,l,i),n=!0},p(l,i){const o={};i&12&&(o.draggable=l[5][l[15]+l[18]*12].color===l[2]&&l[3]),i&1&&(o.triangleCentroids=l[0]),i&2&&(o.invertX=l[1]==="black"),i&2&&(o.invertY=l[1]==="black"),e.$set(o)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){q(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function ut(t){let e,n,l,i,o,r;n=new on({props:{color:t[15]%2===0?"darkgrey":"grey",reversed:t[18]===0}});let c=t[5][t[15]+t[18]*12]&&Bn(t);return{c(){e=C("div"),G(n.$$.fragment),l=T(),i=C("div"),c&&c.c(),this.h()},l(s){e=D(s,"DIV",{class:!0,style:!0,"data-position":!0});var f=N(e);K(n.$$.fragment,f),l=z(f),i=D(f,"DIV",{class:!0});var d=N(i);c&&c.l(d),d.forEach(u),f.forEach(u),this.h()},h(){p(i,"class","checkerContainer "+(t[18]===1&&"reversed")+" svelte-1dh3mcl"),p(e,"class","triangle root-triangle svelte-1dh3mcl"),R(e,"width",100/12+"%"),p(e,"data-position",o=(t[1]==="white",t[15]+t[18]*12))},m(s,f){I(s,e,f),J(n,e,null),S(e,l),S(e,i),c&&c.m(i,null),r=!0},p(s,f){s[5][s[15]+s[18]*12]&&c.p(s,f),(!r||f&2&&o!==(o=(s[1]==="white",s[15]+s[18]*12)))&&p(e,"data-position",o)},i(s){r||(B(n.$$.fragment,s),B(c),r=!0)},o(s){q(n.$$.fragment,s),q(c),r=!1},d(s){s&&u(e),F(n),c&&c.d()}}}function dt(t){let e,n,l,i=W(Array.from({length:12})),o=[];for(let c=0;c<i.length;c+=1)o[c]=ut(it(t,i,c));const r=c=>q(o[c],1,1,()=>{o[c]=null});return{c(){e=C("div");for(let c=0;c<o.length;c+=1)o[c].c();n=T(),this.h()},l(c){e=D(c,"DIV",{class:!0});var s=N(e);for(let f=0;f<o.length;f+=1)o[f].l(s);n=z(s),s.forEach(u),this.h()},h(){p(e,"class","side "+(t[18]===0?"upper":"lower")+" svelte-1dh3mcl")},m(c,s){I(c,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);S(e,n),l=!0},p(c,s){if(s&111){i=W(Array.from({length:12}));let f;for(f=0;f<i.length;f+=1){const d=it(c,i,f);o[f]?(o[f].p(d,s),B(o[f],1)):(o[f]=ut(d),o[f].c(),B(o[f],1),o[f].m(e,n))}for(ge(),f=i.length;f<o.length;f+=1)r(f);pe()}},i(c){if(!l){for(let s=0;s<i.length;s+=1)B(o[s]);l=!0}},o(c){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)q(o[s]);l=!1},d(c){c&&u(e),ae(o,c)}}}function ht(t){let e,n=W(t[0]),l=[];for(let i=0;i<n.length;i+=1)l[i]=_t(nt(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=he()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=he()},m(i,o){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,o);I(i,e,o)},p(i,o){if(o&1){n=W(i[0]);let r;for(r=0;r<n.length;r+=1){const c=nt(i,n,r);l[r]?l[r].p(c,o):(l[r]=_t(c),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(i){i&&u(e),ae(l,i)}}}function _t(t){let e,n=t[13].dataset.position+"",l,i;return{c(){e=C("div"),l=ee(n),i=T(),this.h()},l(o){e=D(o,"DIV",{class:!0,style:!0});var r=N(e);l=_e(r,n),i=z(r),r.forEach(u),this.h()},h(){p(e,"class","marker svelte-1dh3mcl"),R(e,"position","fixed"),R(e,"top",t[12]+"px"),R(e,"left",t[11]+"px"),R(e,"color","white")},m(o,r){I(o,e,r),S(e,l),S(e,i)},p(o,r){r&1&&n!==(n=o[13].dataset.position+"")&&Te(l,n),r&1&&R(e,"top",o[12]+"px"),r&1&&R(e,"left",o[11]+"px")},d(o){o&&u(e)}}}function On(t){let e,n,l,i,o,r="Geschlagen",c,s,f,d,a,g="Im Ziel",y,h,v,w,b,O,E,L,A,Y;n=new An({});let Q=W(["white","black"]),V=[];for(let m=0;m<2;m+=1)V[m]=ct(st(t,Q,m));const oe=m=>q(V[m],1,1,()=>{V[m]=null});let $=W(["white","black"]),M=[];for(let m=0;m<2;m+=1)M[m]=ft(ot(t,$,m));const St=m=>q(M[m],1,1,()=>{M[m]=null});let le=W(Array.from({length:2})),P=[];for(let m=0;m<le.length;m+=1)P[m]=dt(lt(t,le,m));const Vt=m=>q(P[m],1,1,()=>{P[m]=null});let X=t[0]&&t[4]&&ht(t);return{c(){e=C("div"),G(n.$$.fragment),l=T(),i=C("div"),o=C("span"),o.textContent=r,c=T(),s=C("div");for(let m=0;m<2;m+=1)V[m].c();f=T(),d=C("div"),a=C("span"),a.textContent=g,y=T(),h=C("div");for(let m=0;m<2;m+=1)M[m].c();v=T(),w=C("div"),b=C("div");for(let m=0;m<P.length;m+=1)P[m].c();E=T(),X&&X.c(),L=T(),A=C("div"),this.h()},l(m){e=D(m,"DIV",{class:!0});var k=N(e);K(n.$$.fragment,k),l=z(k),i=D(k,"DIV",{class:!0});var _=N(i);o=D(_,"SPAN",{class:!0,"data-svelte-h":!0}),ve(o)!=="svelte-1ko309i"&&(o.textContent=r),c=z(_),s=D(_,"DIV",{class:!0});var U=N(s);for(let Z=0;Z<2;Z+=1)V[Z].l(U);U.forEach(u),_.forEach(u),f=z(k),d=D(k,"DIV",{class:!0});var ye=N(d);a=D(ye,"SPAN",{class:!0,"data-svelte-h":!0}),ve(a)!=="svelte-15oige1"&&(a.textContent=g),y=z(ye),h=D(ye,"DIV",{class:!0});var Re=N(h);for(let Z=0;Z<2;Z+=1)M[Z].l(Re);Re.forEach(u),ye.forEach(u),k.forEach(u),v=z(m),w=D(m,"DIV",{class:!0});var Ce=N(w);b=D(Ce,"DIV",{class:!0});var We=N(b);for(let Z=0;Z<P.length;Z+=1)P[Z].l(We);We.forEach(u),E=z(Ce),X&&X.l(Ce),Ce.forEach(u),L=z(m),A=D(m,"DIV",{class:!0}),N(A).forEach(u),this.h()},h(){p(o,"class","label svelte-1dh3mcl"),p(s,"class","boxes svelte-1dh3mcl"),p(i,"class","hit-area svelte-1dh3mcl"),p(a,"class","label svelte-1dh3mcl"),p(h,"class","boxes svelte-1dh3mcl"),p(d,"class","out-area svelte-1dh3mcl"),p(e,"class","side-area svelte-1dh3mcl"),p(b,"class",O="board "+t[1]+" svelte-1dh3mcl"),p(w,"class","main-area svelte-1dh3mcl"),p(A,"class","moving-checker-cache svelte-1dh3mcl")},m(m,k){I(m,e,k),J(n,e,null),S(e,l),S(e,i),S(i,o),S(i,c),S(i,s);for(let _=0;_<2;_+=1)V[_]&&V[_].m(s,null);S(e,f),S(e,d),S(d,a),S(d,y),S(d,h);for(let _=0;_<2;_+=1)M[_]&&M[_].m(h,null);I(m,v,k),I(m,w,k),S(w,b);for(let _=0;_<P.length;_+=1)P[_]&&P[_].m(b,null);S(w,E),X&&X.m(w,null),I(m,L,k),I(m,A,k),Y=!0},p(m,[k]){if(k&1){Q=W(["white","black"]);let _;for(_=0;_<2;_+=1){const U=st(m,Q,_);V[_]?(V[_].p(U,k),B(V[_],1)):(V[_]=ct(U),V[_].c(),B(V[_],1),V[_].m(s,null))}for(ge(),_=2;_<2;_+=1)oe(_);pe()}if(k&1){$=W(["white","black"]);let _;for(_=0;_<2;_+=1){const U=ot(m,$,_);M[_]?(M[_].p(U,k),B(M[_],1)):(M[_]=ft(U),M[_].c(),B(M[_],1),M[_].m(h,null))}for(ge(),_=2;_<2;_+=1)St(_);pe()}if(k&111){le=W(Array.from({length:2}));let _;for(_=0;_<le.length;_+=1){const U=lt(m,le,_);P[_]?(P[_].p(U,k),B(P[_],1)):(P[_]=dt(U),P[_].c(),B(P[_],1),P[_].m(b,null))}for(ge(),_=le.length;_<P.length;_+=1)Vt(_);pe()}(!Y||k&2&&O!==(O="board "+m[1]+" svelte-1dh3mcl"))&&p(b,"class",O),m[0]&&m[4]?X?X.p(m,k):(X=ht(m),X.c(),X.m(w,null)):X&&(X.d(1),X=null)},i(m){if(!Y){B(n.$$.fragment,m);for(let k=0;k<2;k+=1)B(V[k]);for(let k=0;k<2;k+=1)B(M[k]);for(let k=0;k<le.length;k+=1)B(P[k]);Y=!0}},o(m){q(n.$$.fragment,m),V=V.filter(Boolean);for(let k=0;k<2;k+=1)q(V[k]);M=M.filter(Boolean);for(let k=0;k<2;k+=1)q(M[k]);P=P.filter(Boolean);for(let k=0;k<P.length;k+=1)q(P[k]);Y=!1},d(m){m&&(u(e),u(v),u(w),u(L),u(A)),F(n),ae(V,m),ae(M,m),ae(P,m),X&&X.d()}}}function Pn(t,e,n){let l,i,o,r,c,s;H(t,Xe,h=>n(7,l=h)),H(t,Me,h=>n(8,i=h)),H(t,It,h=>n(1,o=h)),H(t,Ye,h=>n(2,r=h)),H(t,At,h=>n(3,c=h)),H(t,kn,h=>n(4,s=h));let f=Vn.reduce((h,v)=>(h[v.position]||(h[v.position]={checkers:[],color:v.color}),h[v.position].checkers.push(v.id),h),{});const d=(h,v)=>{const w=document.getElementById(h);g[v].checkersContainer.appendChild(w)},a=h=>{const{checker_id:v,start:w,end:b}=h.detail,O={checker_id:v,start:w,end:b};jt(Me,i={...i,[v]:O},i),g[b].checkersContainer.appendChild(document.getElementById(v)),y()};let g;const y=()=>{const h=document.querySelectorAll(".triangle");n(0,g=Array.from(h).map(b=>{const{left:O,top:E,width:L,height:A}=b.getBoundingClientRect(),Y=b.querySelector(".checkerContainer");let Q=null,V=0;return Y.children.length&&(Q=Y.children[0].children[0].classList[1],V=Y.children.length),{x:O+L/2,y:E+A/2,triangle:b,checkersContainer:b.querySelector(".checkerContainer"),occupiedBy:Q,length:V}}));const v=document.querySelectorAll(".hit");n(0,g=g.concat(Array.from(v).map(b=>{const{left:O,top:E,width:L,height:A}=b.getBoundingClientRect();return{x:O+L/2,y:E+A/2,triangle:b,checkersContainer:b,occupiedBy:b.classList[0],length:new Array(...b.children).filter(Y=>Y.classList.contains("draggable")).length}})));const w=document.querySelectorAll(".out");n(0,g=g.concat(Array.from(w).map(b=>{const{left:O,top:E,width:L,height:A}=b.getBoundingClientRect();return{x:O+L/2,y:E+A/2,triangle:b,checkersContainer:b,occupiedBy:b.classList[0],length:new Array(...b.children).filter(Y=>Y.classList.contains("draggable")).length}})))};return kt(()=>{y()}),t.$$.update=()=>{if(t.$$.dirty&128){const{moves:h}=l||{};if(h)for(const v of h)d(v.checker_id,v.end);y()}},[g,o,r,c,s,f,a,l]}class Mn extends ne{constructor(e){super(),te(this,e,Pn,On,x,{})}}function qn(t){let e,n,l;return n=new Mn({props:{startSettings:t[0]}}),{c(){e=C("div"),G(n.$$.fragment),this.h()},l(i){e=D(i,"DIV",{class:!0});var o=N(e);K(n.$$.fragment,o),o.forEach(u),this.h()},h(){p(e,"class","game svelte-ze3agv")},m(i,o){I(i,e,o),J(n,e,null),l=!0},p:j,i(i){l||(B(n.$$.fragment,i),l=!0)},o(i){q(n.$$.fragment,i),l=!1},d(i){i&&u(e),F(n)}}}function Ln(t){return[{0:{checkers:2,color:"white"},5:{checkers:5,color:"black"},7:{checkers:3,color:"black"},11:{checkers:5,color:"white"},12:{checkers:5,color:"black"},16:{checkers:3,color:"white"},18:{checkers:5,color:"white"},23:{checkers:2,color:"black"}}]}class Tn extends ne{constructor(e){super(),te(this,e,Ln,qn,x,{})}}new Tn({target:document.getElementById("app")});
